"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[865],{89393:function(e,t,n){let i;n.r(t),n.d(t,{BackLink:function(){return tq},ChildLink:function(){return tZ},ConfirmDeleteDialogContainer:function(){return no},DocumentInspectorHeader:function(){return iH},DocumentPane:function(){return rq},DocumentPaneProviderWrapper:function(){return rH},LOADING_PANE:function(){return lY},LoadingPane:function(){return iA},Pane:function(){return nc},PaneContainer:function(){return aO},PaneContent:function(){return nm},PaneHeader:function(){return nA},PaneHeaderActions:function(){return nQ},PaneItem:function(){return n3},PaneLayout:function(){return nU},ParameterizedLink:function(){return tJ},ReferenceChildLink:function(){return tQ},_DEBUG:function(){return lH},pane:function(){return sA},pane$1:function(){return sT},setActivePanes:function(){return a$},structureTool:function(){return sP},useDocumentPane:function(){return iT},useDocumentTitle:function(){return iG},usePane:function(){return np},usePaneLayout:function(){return tY},usePaneOptions:function(){return rJ},usePaneRouter:function(){return t0},useStructureTool:function(){return iN}});var l=n(56093),o=n(31323),r=n(20053),a=n(3827),s=n(31134),d=n(89806),c=n(78002),u=n(64090),p=n(81960),m=n(23081),h=n(36212),f=n(33115),v=n(191),x=n(51018),g=n(52741),b=n(45948),y=n(75355),j=n(89877),_=n(5251),w=n(22071),k=n(49967),C=n(5899),S=n(72467),z=n(29818),E=n(37808),I=n(91179),P=n(45698),A=n(96141),T=n(33627),R=n(46385),M=n(17282),D=n(68074),L=n(96070),N=n(26728),O=n(31379),U=n(81778),B=n(81092),$=n(73491),V=n(81014),G=n(69887),F=n(60118),K=n(31428),W=n(13273),X=n(63791),H=n(27104),q=n(84655),Y=n(9315),Z=n(11314),J=n(58961),Q=n(67222),ee=n(19720),et=n(92955),en=n(5042),ei=n(45473),el=n(76447),eo=n(30025),er=n(42759),ea=n(27783),es=n(37276),ed=n(58619),ec=n(74576),eu=n(47303),ep=n(72554),em=n(70254),eh=n(87323),ef=n(3444),ev=n(65620),ex=n(19337),eg=n(68947),eb=n(52896),ey=n(46944),ej=n(93574),e_=n(28112),ew=n(98116),ek=n(47470),eC=n(87263),eS=n(36510),ez=n(12950),eE=n(36999),eI=n(41737),eP=n(81006),eA=n(63280);function eT(){let e=(0,l._)(["\n  margin-left: auto;\n"]);return eT=function(){return e},e}function eR(){let e=(0,l._)(["\n  flex: none;\n\n  &[open] "," {\n    transform: rotate(180deg);\n  }\n"]);return eR=function(){return e},e}function eM(){let e=(0,l._)(["\n  list-style: none;\n\n  &::-webkit-details-marker {\n    display: none;\n  }\n"]);return eM=function(){return e},e}function eD(){let e=(0,l._)(["\n  width: 100%;\n  text-align: left;\n  padding: 0 ",";\n  border-collapse: collapse;\n\n  th {\n    padding: ",";\n  }\n\n  td {\n    padding: 0 ",";\n  }\n\n  tr > *:last-child {\n    text-align: right;\n  }\n"]);return eD=function(){return e},e}function eL(){let e=(0,l._)(["\n  min-height: 33px;\n"]);return eL=function(){return e},e}function eN(){let e=(0,l._)(["\n  box-sizing: border-box;\n"]);return eN=function(){return e},e}function eO(){let e=(0,l._)(["\n  height: 110px;\n"]);return eO=function(){return e},e}function eU(){let e=(0,l._)(["\n  position: relative;\n  width: 1px;\n  min-width: 1px;\n\n  &:before {\n    content: '';\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    width: 1px;\n    background-color: var(--card-border-color);\n  }\n\n  &:not([data-disabled]) {\n    cursor: ew-resize;\n    width: 9px;\n    min-width: 9px;\n    margin: 0 -4px;\n\n    &:before {\n      left: 4px;\n    }\n\n    &:after {\n      content: '';\n      display: block;\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 9px;\n      bottom: 0;\n      background-color: var(--card-border-color);\n      opacity: 0;\n      transition: opacity 150ms;\n    }\n\n    &[data-dragging]:after,\n    &:hover:after {\n      opacity: 0.2;\n    }\n  }\n"]);return eU=function(){return e},e}function eB(){let e=(0,l._)(["\n  outline: none;\n\n  // NOTE: This will render a border to the right side of each pane\n  // without taking up physical space.\n  box-shadow: 1px 0 0 var(--card-border-color);\n"]);return eB=function(){return e},e}function e$(){let e=(0,l._)(["\n  position: relative;\n  outline: none;\n"]);return e$=function(){return e},e}function eV(){let e=(0,l._)(["\n  position: sticky;\n  bottom: 0;\n"]);return eV=function(){return e},e}function eG(){let e=(0,l._)(["\n  padding-bottom: env(safe-area-inset-bottom);\n"]);return eG=function(){return e},e}function eF(){let e=(0,l._)(["\n    line-height: 0;\n    position: sticky;\n    top: 0;\n\n    &:not([data-collapsed]):after {\n      content: '';\n      display: block;\n      position: absolute;\n      left: 0;\n      right: 0;\n      bottom: -1px;\n      border-bottom: 1px solid ",";\n      opacity: 1;\n    }\n  "]);return eF=function(){return e},e}function eK(){let e=(0,l._)(["\n  transform-origin: calc(51px / 2);\n\n  [data-collapsed] > div > & {\n    transform: rotate(90deg);\n  }\n"]);return eK=function(){return e},e}function eW(){let e=(0,l._)(["\n    background-color: ",";\n\n    [data-ui='Text'] {\n      color: ",";\n    }\n  "]);return eW=function(){return e},e}function eX(){let e=(0,l._)(["\n  width: 66%;\n  max-width: 175px;\n"]);return eX=function(){return e},e}function eH(){let e=(0,l._)(["\n  cursor: default;\n  outline: none;\n"]);return eH=function(){return e},e}function eq(){let e=(0,l._)(["\n  transition: opacity 200ms;\n  position: relative;\n  z-index: 1;\n  padding-left: env(safe-area-inset-left);\n  padding-right: env(safe-area-inset-right);\n  opacity: 0;\n\n  &:not([hidden]) {\n    display: flex;\n  }\n\n  &:not([data-collapsed]) {\n    overflow: auto;\n  }\n\n  &[data-mounted] {\n    opacity: 1;\n  }\n\n  &[data-resizing] {\n    pointer-events: none;\n  }\n"]);return eq=function(){return e},e}function eY(){let e=(0,l._)(["\n  display: grid;\n  grid-area: header;\n  grid-template-columns: 1fr min-content 1fr;\n  border-block-end: 1px solid var(--card-border-color);\n"]);return eY=function(){return e},e}function eZ(){let e=(0,l._)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return eZ=function(){return e},e}function eJ(){let e=(0,l._)(["\n  --offset-block: 40px;\n  display: grid;\n  height: calc(100vh - var(--offset-block));\n  min-height: 0;\n  overflow: hidden;\n  grid-template-areas:\n    'header header'\n    'previous-document next-document';\n  grid-template-columns: 1fr 1fr;\n  grid-template-rows: min-content minmax(0, 1fr);\n"]);return eJ=function(){return e},e}function eQ(){let e=(0,l._)(["\n  position: relative;\n  height: 100%;\n  overflow: auto;\n  scroll-behavior: smooth;\n  scrollbar-width: var(--scrollbar-width);\n  overscroll-behavior: contain;\n  will-change: scroll-position;\n"]);return eQ=function(){return e},e}function e0(){let e=(0,l._)(["\n  position: relative;\n  grid-area: var(--grid-area);\n"]);return e0=function(){return e},e}function e1(){let e=(0,l._)(["\n  width: auto;\n"]);return e1=function(){return e},e}function e2(){let e=(0,l._)(["\n  flex: 1;\n  text-decoration: none;\n  color: inherit;\n"]);return e2=function(){return e},e}function e3(){let e=(0,l._)(["\n  opacity: 0;\n  transition: opacity 200ms;\n\n  &[data-mounted] {\n    opacity: 1;\n  }\n"]);return e3=function(){return e},e}function e4(){let e=(0,l._)(["\n    & .json-inspector,\n    & .json-inspector .json-inspector__selection {\n      font-family: ",";\n      font-size: ","px;\n      line-height: ","px;\n      color: var(--card-code-fg-color);\n    }\n\n    & .json-inspector .json-inspector__leaf {\n      padding-left: ",";\n    }\n\n    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {\n      padding-top: ",";\n      padding-left: 0;\n    }\n\n    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {\n      display: none;\n    }\n\n    & .json-inspector .json-inspector__line {\n      display: block;\n      position: relative;\n      cursor: default;\n    }\n\n    & .json-inspector .json-inspector__line::after {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: -200px;\n      right: -50px;\n      bottom: 0;\n      z-index: -1;\n      pointer-events: none;\n    }\n\n    & .json-inspector .json-inspector__line:hover::after {\n      background: var(--card-code-bg-color);\n    }\n\n    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {\n      cursor: pointer;\n    }\n\n    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {\n      content: '▸ ';\n      margin-left: calc(0 - "," + 3px);\n      font-size: ","px;\n      line-height: ","px;\n    }\n\n    &\n      .json-inspector\n      .json-inspector__leaf_expanded.json-inspector__leaf_composite\n      > .json-inspector__line::before {\n      content: '▾ ';\n      font-size: ","px;\n      line-height: ","px;\n    }\n\n    & .json-inspector .json-inspector__radio,\n    & .json-inspector .json-inspector__flatpath {\n      display: none;\n    }\n\n    & .json-inspector .json-inspector__value {\n      margin-left: ",";\n    }\n\n    &\n      .json-inspector\n      > .json-inspector__leaf_root\n      > .json-inspector__line\n      > .json-inspector__key\n      + .json-inspector__value {\n      margin: 0;\n    }\n\n    & .json-inspector .json-inspector__key {\n      color: ",";\n    }\n\n    & .json-inspector .json-inspector__value_helper,\n    & .json-inspector .json-inspector__value_null {\n      color: ",";\n    }\n\n    & .json-inspector .json-inspector__not-found {\n      padding-top: ",";\n    }\n\n    & .json-inspector .json-inspector__value_string {\n      color: ",";\n    }\n\n    & .json-inspector .json-inspector__value_boolean {\n      color: ",";\n    }\n\n    & .json-inspector .json-inspector__value_number {\n      color: ",";\n    }\n\n    & .json-inspector .json-inspector__show-original {\n      display: inline-block;\n      padding: 0 6px;\n      cursor: pointer;\n    }\n\n    & .json-inspector .json-inspector__show-original:hover {\n      color: inherit;\n    }\n\n    & .json-inspector .json-inspector__show-original::before {\n      content: '↔';\n    }\n\n    & .json-inspector .json-inspector__show-original:hover::after {\n      content: ' expand';\n    }\n  "]);return e4=function(){return e},e}function e5(){let e=(0,l._)(["\n  box-sizing: border-box;\n"]);return e5=function(){return e},e}function e6(){let e=(0,l._)(["\n  height: 110px;\n"]);return e6=function(){return e},e}function e7(){let e=(0,l._)(["\n  object-fit: cover;\n  width: 100%;\n  height: 100%;\n  height: 180px;\n  display: flex;\n"]);return e7=function(){return e},e}function e8(){let e=(0,l._)(["\n      @supports not (container-type: inline-size) {\n        display: none !important;\n      }\n\n      container-type: inline-size;\n\n      [data-heading] {\n        font-size: ","px;\n        line-height: ","px;\n        overflow-wrap: break-word;\n        text-wrap: pretty;\n      }\n\n      @container (max-width: 560px) {\n        [data-heading] {\n          font-size: ","px;\n          line-height: ","px;\n        }\n      }\n\n      @container (max-width: 420px) {\n        [data-heading] {\n          font-size: ","px;\n          line-height: ","px;\n        }\n      }\n    "]);return e8=function(){return e},e}function e9(){let e=(0,l._)(["\n  ","\n"]);return e9=function(){return e},e}function te(){let e=(0,l._)(["\n    height: 100%;\n    overflow: auto;\n    position: relative;\n    scroll-behavior: smooth;\n    outline: none;\n  "]);return te=function(){return e},e}function tt(){let e=(0,l._)(["\n      &::after {\n        content: '';\n        display: block;\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        width: 150px;\n        background: linear-gradient(to right, ",", var(--card-bg-color));\n        transition: 'opacity 300ms ease-out';\n        pointer-events: none;\n      }\n    "]);return tt=function(){return e},e}function tn(){let e=(0,l._)(["\n    scrollbar-width: none;\n    z-index: 1;\n    flex: 1;\n    position: relative;\n    > div {\n      &::-webkit-scrollbar {\n        width: 0;\n        height: 0;\n      }\n    }\n\n    ","\n  "]);return tn=function(){return e},e}function ti(){let e=(0,l._)(["\n  transition: transform 200ms;\n  &[data-expanded='true'] {\n    transform: rotate(-90deg);\n  }\n"]);return ti=function(){return e},e}function tl(){let e=(0,l._)(["\n  max-width: 200px;\n"]);return tl=function(){return e},e}function to(){let e=(0,l._)(["\n  max-height: ",";\n  min-width: 244px;\n"]);return to=function(){return e},e}function tr(){let e=(0,l._)(["\n      opacity: 1;\n      pointer-events: auto;\n    "]);return tr=function(){return e},e}function ta(){let e=(0,l._)(["\n    opacity: 0;\n    pointer-events: none;\n    transition: opacity 0.2s;\n\n    ","\n  "]);return ta=function(){return e},e}function ts(){let e=(0,l._)(["\n    --card-icon-color: ",";\n    background-color: ",";\n    box-shadow: 0 0 0 1px var(--card-bg-color);\n\n    position: absolute;\n    width: ","px;\n    height: ","px;\n    right: -3px;\n    bottom: -3px;\n    border-radius: 50%;\n  "]);return ts=function(){return e},e}function td(){let e=(0,l._)(["\n    width: 6ch;\n    height: ","px;\n  "]);return td=function(){return e},e}function tc(){let e=(0,l._)(["\n  overflow: hidden;\n  overflow: clip;\n"]);return tc=function(){return e},e}function tu(){let e=(0,l._)(["\n  transform-origin: center;\n"]);return tu=function(){return e},e}function tp(){let e=(0,l._)(["\n  0% {\n    transform: rotate(0);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"]);return tp=function(){return e},e}function tm(){let e=(0,l._)(["\n  transform-origin: center;\n\n  &[data-rotate] {\n    animation: "," 1s ease-in-out infinite;\n  }\n"]);return tm=function(){return e},e}function th(){let e=(0,l._)(["\n  color: var(--card-muted-fg-color);\n\n  em {\n    color: var(--card-fg-color);\n    font-weight: 500;\n    font-style: normal;\n  }\n"]);return th=function(){return e},e}function tf(){let e=(0,l._)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-height: 0;\n  min-width: 0;\n"]);return tf=function(){return e},e}function tv(){let e=(0,l._)(["\n  position: relative;\n  opacity: ",";\n  transition: opacity 0.4s;\n"]);return tv=function(){return e},e}function tx(){let e=(0,l._)(["\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n"]);return tx=function(){return e},e}function tg(){let e=(0,l._)(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]);return tg=function(){return e},e}function tb(){let e=(0,l._)(["\n  0% {\n    opacity: 0;\n  }\n  50% {\n    opacity: 0.1;\n  }\n  100% {\n    opacity: 0.4;\n  }\n"]);return tb=function(){return e},e}function ty(){let e=(0,l._)(["\n  animation: "," 500ms linear infinite;\n"]);return ty=function(){return e},e}function tj(){let e=(0,l._)(["\n  animation: "," 1500ms linear infinite;\n  opacity: 0.4;\n"]);return tj=function(){return e},e}function t_(){let e=(0,l._)(["\n  animation:\n    "," 1500ms linear infinite,\n    "," 1000ms linear;\n  opacity: 0.4;\n"]);return t_=function(){return e},e}function tw(){let e=(0,l._)(["\n  display: flex;\n  overflow: hidden;\n  box-sizing: border-box;\n  width: ","px;\n  border-top: 1px solid var(--card-border-color);\n  background-color: var(--card-bg-color);\n"]);return tw=function(){return e},e}function tk(){let e=(0,l._)(["\n  position: sticky;\n  z-index: 2;\n"]);return tk=function(){return e},e}function tC(){let e=(0,l._)(["\n  flex-shrink: 0;\n"]);return tC=function(){return e},e}function tS(){let e=(0,l._)(["\n  margin: 16px;\n  z-index: 1;\n  padding: 22px 0px;\n  border-top: 1px solid var(--card-border-color);\n  background-color: var(--card-badge-default-bg-color);\n  box-sizing: border-box;\n  text-align: left;\n  width: ","px;\n  max-width: ","px;\n"]);return tS=function(){return e},e}function tz(){let e=(0,l._)(["\n  position: sticky;\n  z-index: 2;\n"]);return tz=function(){return e},e}function tE(){let e=(0,l._)(["\n  visibility: hidden;\n\n  ",":hover & {\n    visibility: visible;\n  }\n"]);return tE=function(){return e},e}function tI(){let e=(0,l._)(["\n  height: 100%;\n"]);return tI=function(){return e},e}function tP(){let e=(0,l._)(["\n  overflow: auto; //our scrollable table container\n  position: relative; //needed for sticky header\n"]);return tP=function(){return e},e}function tA(){let e=(0,l._)(["\n  border-collapse: separate;\n  border-spacing: 0;\n  font-family: arial, sans-serif;\n  white-space: nowrap;\n  width: 100%;\n  border: 1px solid lightgray;\n\n  thead {\n    display: grid;\n    position: sticky;\n    top: 0;\n    z-index: 10;\n  }\n  tr {\n    padding: 0;\n  }\n  tr:last-child {\n    border-bottom: none;\n  }\n"]);return tA=function(){return e},e}function tT(){let e=(0,l._)(["\n  height: 100%;\n  overflow: auto;\n  position: relative;\n  scroll-behavior: smooth;\n"]);return tT=function(){return e},e}function tR(){let e=(0,l._)(["\n  &:not([hidden]) {\n    display: grid;\n  }\n  grid-template-columns: 48px 1fr;\n  align-items: center;\n  gap: 0.25em;\n"]);return tR=function(){return e},e}function tM(){let e=(0,l._)(["\n  overflow: hidden;\n  overflow: clip;\n"]);return tM=function(){return e},e}function tD(){let e=(0,l._)(["\n  height: 100%;\n  overflow: auto;\n  position: relative;\n  scroll-behavior: smooth;\n"]);return tD=function(){return e},e}function tL(){let e=(0,l._)(["\n  &:not([hidden]) {\n    display: grid;\n  }\n  grid-template-columns: 48px 1fr;\n  align-items: center;\n  gap: 0.25em;\n"]);return tL=function(){return e},e}function tN(){let e=(0,l._)(["\n  width: 100%;\n  position: absolute;\n  bottom: -4px;\n"]);return tN=function(){return e},e}function tO(){let e=(0,l._)(["\n  height: 100%;\n  overflow: auto;\n  position: relative;\n  scroll-behavior: smooth;\n"]);return tO=function(){return e},e}function tU(){let e=(0,l._)(["\n  height: 100%;\n  overflow: auto;\n  position: relative;\n  scroll-behavior: smooth;\n"]);return tU=function(){return e},e}function tB(){let e=(0,l._)(["\n  opacity: 0;\n  transition: opacity 200ms;\n  &[data-ready] {\n    opacity: 1;\n  }\n"]);return tB=function(){return e},e}function t$(e){let t,n,i,l;let r=(0,s.c)(21),{document:d}=e,c=(0,h.I_y)();r[0]!==d._type||r[1]!==c?(t=c.get(d._type),r[0]=d._type,r[1]=c,r[2]=t):t=r[2];let u=t,{t:p}=(0,h.$G7)(o.UA);r[3]!==d||r[4]!==u?(n={schemaType:u,value:d},r[3]=d,r[4]=u,r[5]=n):n=r[5];let{error:m,value:f}=(0,h._2T)(n);if(!u){let e,t;return r[6]!==d._type||r[7]!==p?(e=p("doc-title.unknown-schema-type.text",{schemaType:d._type}),r[6]=d._type,r[7]=p,r[8]=e):e=r[8],r[9]!==e?(t=(0,a.jsx)("code",{children:e}),r[9]=e,r[10]=t):t=r[10],t}if(m){let e,t;return r[11]!==m.message||r[12]!==p?(e=p("doc-title.error.text",{errorMessage:m.message}),r[11]=m.message,r[12]=p,r[13]=e):e=r[13],r[14]!==e?(t=(0,a.jsx)(a.Fragment,{children:e}),r[14]=e,r[15]=t):t=r[15],t}return r[16]!==p||r[17]!==(null==f?void 0:f.title)?(i=(null==f?void 0:f.title)||(0,a.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:p("doc-title.fallback.text")}),r[16]=p,r[17]=null==f?void 0:f.title,r[18]=i):i=r[18],r[19]!==i?(l=(0,a.jsx)(a.Fragment,{children:i}),r[19]=i,r[20]=l):l=r[20],l}let tV=(0,x.zo)(d.xu)(eT()),tG=x.zo.details(eR(),tV),tF=x.zo.summary(eM()),tK=x.zo.table(eD(),e=>{let{theme:t}=e;return(0,d.hO)(t.sanity.space[2])},e=>{let{theme:t}=e;return(0,d.hO)(t.sanity.space[1])},e=>{let{theme:t}=e;return(0,d.hO)(t.sanity.space[1])}),tW=(0,x.zo)(d.kC)(eL()),tX=e=>{let t,n,i,l,c,u;let p=(0,s.c)(13),{t:f}=(0,h.$G7)(o.UA),v=e.totalCount-e.references.length;return v?(p[0]!==v||p[1]!==f?(t=f("confirm-delete-dialog.other-reference-count.title",{count:v}),p[0]=v,p[1]=f,p[2]=t):t=p[2],p[3]!==t?(n=(0,a.jsx)(d.xv,{size:1,muted:!0,children:t}),p[3]=t,p[4]=n):n=p[4],p[5]!==f?(i=f("confirm-delete-dialog.other-reference-count.tooltip"),p[5]=f,p[6]=i):i=p[6],p[7]===Symbol.for("react.memo_cache_sentinel")?(l=(0,a.jsx)(d.xv,{size:1,muted:!0,children:(0,a.jsx)(m.hQ6,{})}),p[7]=l):l=p[7],p[8]!==i?(c=(0,a.jsx)(r.u,{portal:!0,placement:"top",content:i,children:l}),p[8]=i,p[9]=c):c=p[9],p[10]!==n||p[11]!==c?(u=(0,a.jsx)(d.xu,{padding:2,children:(0,a.jsxs)(d.gF,{space:2,children:[n,c]})}),p[10]=n,p[11]=c,p[12]=u):u=p[12],u):null};function tH(e){let t,n,i,l,o,c,u;let p=(0,s.c)(27),{icon:m,layout:f,presence:v,schemaType:x,value:g}=e,b=(0,h._je)(g._id),{perspectiveStack:y}=(0,h.Wc0)();p[0]!==y||p[1]!==e.documentPreviewStore||p[2]!==x||p[3]!==g._id?(n=(0,h.eLL)(e.documentPreviewStore,x,g._id,y),p[0]=y,p[1]=e.documentPreviewStore,p[2]=x,p[3]=g._id,p[4]=n):n=p[4],t=n,p[5]===Symbol.for("react.memo_cache_sentinel")?(i={snapshot:null,isLoading:!0,original:null},p[5]=i):i=p[5];let{snapshot:_,original:w,isLoading:k}=(0,j.m)(t,i);p[6]!==k||p[7]!==v||p[8]!==b.draft||p[9]!==b.published||p[10]!==b.versions?(l=k?null:(0,a.jsx)(r.uE,{children:(0,a.jsxs)(d.kC,{align:"center",gap:3,children:[v&&v.length>0&&(0,a.jsx)(h.mEJ,{presence:v}),(0,a.jsx)(h.aAo,{draft:b.draft,published:b.published,versions:b.versions})]})}),p[6]=k,p[7]=v,p[8]=b.draft,p[9]=b.published,p[10]=b.versions,p[11]=l):l=p[11];let C=l;p[12]!==b.draft||p[13]!==b.published||p[14]!==b.versions?(o=(0,a.jsx)(h._mO,{draft:b.draft,published:b.published,versions:b.versions}),p[12]=b.draft,p[13]=b.published,p[14]=b.versions,p[15]=o):o=p[15];let S=o;return p[16]!==w||p[17]!==_||p[18]!==g?(c=(0,h.L_b)({snapshot:_,original:w,fallback:g}),p[16]=w,p[17]=_,p[18]=g,p[19]=c):c=p[19],p[20]!==m||p[21]!==k||p[22]!==f||p[23]!==C||p[24]!==c||p[25]!==S?(u=(0,a.jsx)(h.ogX,{...c,isPlaceholder:k,icon:m,layout:f,status:C,tooltip:S}),p[20]=m,p[21]=k,p[22]=f,p[23]=C,p[24]=c,p[25]=S,p[26]=u):u=p[26],u}let tq=(0,u.forwardRef)(function(e,t){let n,i,l,o,r;let d=(0,s.c)(9),{routerPanesState:c,groupIndex:m}=(0,u.useContext)(p.ud);return d[0]!==m||d[1]!==c?(i=c.slice(0,m),d[0]=m,d[1]=c,d[2]=i):i=d[2],n=i,d[3]!==n?(o={panes:n},d[3]=n,d[4]=o):o=d[4],l=o,d[5]!==e||d[6]!==t||d[7]!==l?(r=(0,a.jsx)(_.Px,{...e,ref:t,state:l}),d[5]=e,d[6]=t,d[7]=l,d[8]=r):r=d[8],r});function tY(){let e=(0,u.useContext)(p.yq);if(!e)throw Error("PaneLayout: missing context value");return e}let tZ=(0,u.forwardRef)(function(e,t){let n,i,l,o,r,d;let c=(0,s.c)(19);c[0]!==e?({childId:n,childPayload:l,childParameters:i,...o}=e,c[0]=e,c[1]=n,c[2]=i,c[3]=l,c[4]=o):(n=c[1],i=c[2],l=c[3],o=c[4]);let{routerPanesState:m,groupIndex:h}=(0,u.useContext)(p.ud);if(c[5]!==n||c[6]!==i||c[7]!==l||c[8]!==h||c[9]!==m){let e;c[11]!==n||c[12]!==i||c[13]!==l?(e=[{id:n,params:i,payload:l}],c[11]=n,c[12]=i,c[13]=l,c[14]=e):e=c[14],r={panes:[...m.slice(0,h+1),e]},c[5]=n,c[6]=i,c[7]=l,c[8]=h,c[9]=m,c[10]=r}else r=c[10];return c[15]!==t||c[16]!==o||c[17]!==r?(d=(0,a.jsx)(_.Px,{...o,ref:t,state:r}),c[15]=t,c[16]=o,c[17]=r,c[18]=d):d=c[18],d}),tJ=(0,u.forwardRef)(function(e,t){let n,i,l,o,r,d,c,m,f;let v=(0,s.c)(22),{routerPanesState:x,groupIndex:g,siblingIndex:b}=(0,u.useContext)(p.ud);v[0]!==e?({params:n,payload:i,...l}=e,v[0]=e,v[1]=n,v[2]=i,v[3]=l):(n=v[1],i=v[2],l=v[3]);let y=(0,h.BoV)(n),j=(0,h.BoV)(i),w=x[g],k=w[b],C=null!=y?y:k.params,S=null!=j?j:k.payload;v[4]!==k||v[5]!==C||v[6]!==S?(r={...k,params:C,payload:S},v[4]=k,v[5]=C,v[6]=S,v[7]=r):r=v[7];let z=r;v[8]!==w||v[9]!==z||v[10]!==b?(d=[...w.slice(0,b),z,...w.slice(b+1)],v[8]=w,v[9]=z,v[10]=b,v[11]=d):d=v[11];let E=d;v[12]!==x||v[13]!==g||v[14]!==E?(c=[...x.slice(0,g),E,...x.slice(g+1)],v[12]=x,v[13]=g,v[14]=E,v[15]=c):c=v[15];let I=c;return v[16]!==I?(m={panes:I},v[16]=I,v[17]=m):m=v[17],o=m,v[18]!==o||v[19]!==t||v[20]!==l?(f=(0,a.jsx)(_.Px,{ref:t,...l,state:o}),v[18]=o,v[19]=t,v[20]=l,v[21]=f):f=v[21],f}),tQ=(0,u.forwardRef)(function(e,t){let n,i,l,o,r,d,c,u,p,m;let h=(0,s.c)(22);h[0]!==e?({documentId:i,documentType:l,parentRefPath:o,children:n,template:d,...r}=e,h[0]=e,h[1]=n,h[2]=i,h[3]=l,h[4]=o,h[5]=r,h[6]=d):(n=h[1],i=h[2],l=h[3],o=h[4],r=h[5],d=h[6]);let f=null==d?void 0:d.params;return h[7]!==o?(c=(0,k.BB)(o),h[7]=o,h[8]=c):c=h[8],h[9]!==d?(u=d&&{template:null==d?void 0:d.id},h[9]=d,h[10]=u):u=h[10],h[11]!==l||h[12]!==c||h[13]!==u?(p={type:l,parentRefPath:c,...u},h[11]=l,h[12]=c,h[13]=u,h[14]=p):p=h[14],h[15]!==n||h[16]!==i||h[17]!==t||h[18]!==r||h[19]!==f||h[20]!==p?(m=(0,a.jsx)(tZ,{...r,ref:t,childId:i,childPayload:f,childParameters:p,children:n}),h[15]=n,h[16]=i,h[17]=t,h[18]=r,h[19]=f,h[20]=p,h[21]=m):m=h[21],m});function t0(){return(0,u.useContext)(p.ud)}let t1=[];function t2(e){let t,n,i,l;let o=(0,s.c)(16),{onClick:r,type:d,value:c}=e,u=null==c?void 0:c._id;o[0]!==u?(t=(0,h.vsM)(u),o[0]=u,o[1]=t):t=o[1];let p=(0,h.Dqo)(t),m=(0,h.rq_)(),{ReferenceChildLink:f}=t0();o[2]!==f||o[3]!==(null==d?void 0:d.name)||o[4]!==(null==c?void 0:c._id)?(n=function(e){return(0,a.jsx)(f,{documentId:null==c?void 0:c._id,documentType:null==d?void 0:d.name,parentRefPath:t1,...e})},o[2]=f,o[3]=null==d?void 0:d.name,o[4]=null==c?void 0:c._id,o[5]=n):n=o[5];let v=n,x=null==d?void 0:d.icon,g=(null==p?void 0:p.length)>0?p:t1;return o[6]!==m||o[7]!==x||o[8]!==g||o[9]!==d||o[10]!==c?(i=(0,a.jsx)(tH,{documentPreviewStore:m,icon:x,layout:"compact",presence:g,schemaType:d,value:c}),o[6]=m,o[7]=x,o[8]=g,o[9]=d,o[10]=c,o[11]=i):i=o[11],o[12]!==r||o[13]!==v||o[14]!==i?(l=(0,a.jsx)(h.oUE,{__unstable_focusRing:!0,as:v,"data-as":"a",onClick:r,radius:2,children:i}),o[12]=r,o[13]=v,o[14]=i,o[15]=l):l=o[15],l}function t3(e){let t,n,i,l,u,p,f,v,x,g,b,y,j,_,w,k,C,S,z,E;let I=(0,s.c)(78),{crossDatasetReferences:P,internalReferences:A,documentTitle:T,totalCount:R,action:M,datasetNames:D,hasUnknownDatasetNames:L,onReferenceLinkClick:N}=e,O=(0,h.I_y)(),U=(0,c.pm)(),{t:B}=(0,h.$G7)(o.UA);I[0]!==N||I[1]!==O||I[2]!==B?(t=e=>{let t=O.get(e._type);return t?(0,a.jsx)(t2,{type:t,value:e,onClick:N}):(0,a.jsx)(d.xu,{padding:2,children:(0,a.jsx)(h.ogX,{icon:m.Tzq,title:B("confirm-delete-dialog.preview-item.preview-unavailable.title"),subtitle:B("confirm-delete-dialog.preview-item.preview-unavailable.subtitle",{documentId:e._id}),layout:"default"})})},I[0]=N,I[1]=O,I[2]=B,I[3]=t):t=I[3];let $=t;if((null==A?void 0:A.totalCount)===0&&(null==P?void 0:P.totalCount)===0){let e,t;return I[4]!==T?(e={DocumentTitle:()=>(0,a.jsx)("strong",{children:T})},I[4]=T,I[5]=e):e=I[5],I[6]!==M||I[7]!==B||I[8]!==e?(t=(0,a.jsx)(d.xv,{as:"p",size:1,children:(0,a.jsx)(h.vNl,{t:B,i18nKey:"confirm-delete-dialog.confirmation.text",context:M,components:e})}),I[6]=M,I[7]=B,I[8]=e,I[9]=t):t=I[9],t}if(I[10]!==M||I[11]!==P||I[12]!==D||I[13]!==T||I[14]!==L||I[15]!==A||I[16]!==$||I[17]!==B||I[18]!==U||I[19]!==R){let e,t,o,s;let c=[...D,...L?["unavailable"]:[]],k=B("confirm-delete-dialog.cdr-summary.subtitle",{count:c.length,datasets:c.join(", "),context:L&&c.length?"unavailable":""});l=d.kC,w="column",u=4,I[34]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(d.xv,{"aria-hidden":"true",size:1,children:(0,a.jsx)(m.foC,{})}),I[34]=e):e=I[34],I[35]!==T?(t={DocumentTitle:()=>T},I[35]=T,I[36]=t):t=I[36],I[37]!==R?(o={count:R},I[37]=R,I[38]=o):o=I[38],I[39]!==B||I[40]!==t||I[41]!==o?(p=(0,a.jsx)(d.Zb,{padding:3,radius:2,tone:"caution",flex:"none",children:(0,a.jsxs)(d.kC,{children:[e,(0,a.jsx)(d.xu,{flex:1,marginLeft:3,children:(0,a.jsx)(d.xv,{size:1,children:(0,a.jsx)(h.vNl,{i18nKey:"confirm-delete-dialog.referring-document-count.text",components:t,t:B,values:o})})})]})}),I[39]=B,I[40]=t,I[41]=o,I[42]=p):p=I[42],I[43]!==T?(s={DocumentTitle:()=>T},I[43]=T,I[44]=s):s=I[44],I[45]!==M||I[46]!==B||I[47]!==s?(f=(0,a.jsx)(d.xu,{flex:"none",children:(0,a.jsx)(d.xv,{size:1,children:(0,a.jsx)(h.vNl,{i18nKey:"confirm-delete-dialog.referring-documents-descriptor.text",t:B,context:M,components:s})})}),I[45]=M,I[46]=B,I[47]=s,I[48]=f):f=I[48],i=d.Zb,b=2,y=1,j="auto",_=2,n=d.kC,v="column",I[49]!==A||I[50]!==$?(x=A.totalCount>0&&(0,a.jsxs)(d.Kq,{as:"ul",marginBottom:2,space:2,"data-testid":"internal-references",children:[null==A?void 0:A.references.map(e=>(0,a.jsx)(d.xu,{as:"li",children:$(e)},e._id)),A.totalCount>A.references.length&&(0,a.jsx)(d.xu,{as:"li",padding:3,children:(0,a.jsx)(tX,{...A})})]}),I[49]=A,I[50]=$,I[51]=x):x=I[51],g=P.totalCount>0&&(0,a.jsxs)(tG,{"data-testid":"cross-dataset-references",style:{borderTop:A.totalCount>0?"1px solid var(--card-shadow-outline-color)":void 0},children:[(0,a.jsx)(tF,{children:(0,a.jsx)(d.Zb,{as:"a",marginTop:A.totalCount>0?2:0,radius:2,shadow:1,paddingY:1,children:(0,a.jsxs)(d.kC,{align:"center",gap:3,paddingX:3,paddingY:1,children:[(0,a.jsx)(d.xv,{size:1,children:(0,a.jsx)(m.TAM,{})}),(0,a.jsxs)(d.Kq,{space:2,children:[(0,a.jsx)(d.xv,{textOverflow:"ellipsis",size:1,children:B("confirm-delete-dialog.cdr-summary.title",{count:c.length,documentCount:B("confirm-delete-dialog.cdr-summary.document-count",{count:P.totalCount})})}),(0,a.jsx)(d.xv,{title:k,textOverflow:"ellipsis",size:1,muted:!0,children:k})]}),(0,a.jsx)(tV,{children:(0,a.jsx)(d.xv,{muted:!0,size:1,children:(0,a.jsx)(m.v4q,{})})})]})})}),(0,a.jsxs)(d.xu,{overflow:"auto",paddingTop:2,children:[(0,a.jsxs)(tK,{children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:(0,a.jsx)(d.xv,{muted:!0,size:1,style:{minWidth:"5rem"},weight:"medium",children:B("confirm-delete-dialog.cdr-table.project-id.label")})}),(0,a.jsx)("th",{children:(0,a.jsx)(d.xv,{muted:!0,size:1,weight:"medium",children:B("confirm-delete-dialog.cdr-table.dataset.label")})}),(0,a.jsx)("th",{children:(0,a.jsx)(d.xv,{muted:!0,size:1,weight:"medium",children:B("confirm-delete-dialog.cdr-table.document-id.label")})})]})}),(0,a.jsx)("tbody",{children:P.references.filter(t4).map((e,t)=>{let{projectId:n,datasetName:i,documentId:l}=e;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)(d.xv,{size:1,children:n})}),(0,a.jsx)("td",{children:(0,a.jsx)(d.xv,{size:1,children:i||"unavailable"})}),(0,a.jsx)("td",{children:(0,a.jsxs)(tW,{align:"center",gap:2,justify:"flex-end",children:[(0,a.jsx)(d.xv,{textOverflow:"ellipsis",size:1,children:l||"unavailable"}),l&&(0,a.jsx)(r.zx,{mode:"bleed",icon:m.TIy,tooltipProps:{content:B("confirm-delete-dialog.cdr-table.copy-id-button.tooltip")},onClick:()=>{navigator.clipboard.writeText(l).catch(()=>{U.push({status:"error",title:B("confirm-delete-dialog.cdr-table.id-copied-toast.title-failed")})})}})]})})]},"".concat(l,"-").concat(t))})})]}),(0,a.jsx)(tX,{...P})]})]}),I[10]=M,I[11]=P,I[12]=D,I[13]=T,I[14]=L,I[15]=A,I[16]=$,I[17]=B,I[18]=U,I[19]=R,I[20]=n,I[21]=i,I[22]=l,I[23]=u,I[24]=p,I[25]=f,I[26]=v,I[27]=x,I[28]=g,I[29]=b,I[30]=y,I[31]=j,I[32]=_,I[33]=w}else n=I[20],i=I[21],l=I[22],u=I[23],p=I[24],f=I[25],v=I[26],x=I[27],g=I[28],b=I[29],y=I[30],j=I[31],_=I[32],w=I[33];return I[52]!==n||I[53]!==v||I[54]!==x||I[55]!==g?(k=(0,a.jsxs)(n,{direction:v,children:[x,g]}),I[52]=n,I[53]=v,I[54]=x,I[55]=g,I[56]=k):k=I[56],I[57]!==i||I[58]!==k||I[59]!==b||I[60]!==y||I[61]!==j||I[62]!==_?(C=(0,a.jsx)(i,{radius:b,shadow:y,flex:j,padding:_,children:k}),I[57]=i,I[58]=k,I[59]=b,I[60]=y,I[61]=j,I[62]=_,I[63]=C):C=I[63],I[64]!==T?(S={DocumentTitle:()=>T},I[64]=T,I[65]=S):S=I[65],I[66]!==M||I[67]!==B||I[68]!==S?(z=(0,a.jsx)(d.xu,{flex:"none",children:(0,a.jsx)(d.xv,{size:1,children:(0,a.jsx)(h.vNl,{i18nKey:"confirm-delete-dialog.referential-integrity-disclaimer.text",t:B,context:M,components:S})})}),I[66]=M,I[67]=B,I[68]=S,I[69]=z):z=I[69],I[70]!==l||I[71]!==u||I[72]!==p||I[73]!==f||I[74]!==C||I[75]!==z||I[76]!==w?(E=(0,a.jsxs)(l,{direction:w,gap:u,children:[p,f,C,z]}),I[70]=l,I[71]=u,I[72]=p,I[73]=f,I[74]=C,I[75]=z,I[76]=w,I[77]=E):E=I[77],E}function t4(e){return"projectId"in e}let t5=()=>(i||(i=(0,C.R)(document,"visibilitychange").pipe((0,M.O)(null),(0,T.U)(()=>"visible"===document.visibilityState),(0,P.x)(),(0,et.w)(e=>e?(0,S.H)(0,5e3):z.E),(0,en.d)({refCount:!0,bufferSize:1}))),i),t6=(0,h.ek8)(e=>{let[t,n]=e;return n.listenQuery({fetch:'{"references":*[references($documentId)][0...100]{_id,_type},"totalCount":count(*[references($documentId)])}',listen:"*[references($documentId)]"},{documentId:t},{tag:"use-referring-documents",transitions:["appear","disappear"],throttleTime:5e3})}),t7=(0,h.ek8)(e=>{let[t,n]=e;return t5().pipe((0,et.w)(()=>(function(e,t){let{versionedClient:n}=t;return t5().pipe((0,et.w)(()=>(function(e,t){let{versionedClient:n}=t,i=(0,h.qyu)(e),l=(0,h.vsM)(e),o={uri:n.getDataUrl("doc","".concat(i,",").concat(l)),json:!0,query:{excludeContent:"true"},tag:"use-referring-documents.document-existence"};return n.observable.request(o).pipe((0,T.U)(e=>{let{omitted:t}=e,n=t.filter(e=>"existence"===e.reason);if(2!==n.length)return 0===n.length||n.some(e=>e.id===i)?l:i}))})(e,t)),(0,et.w)(e=>{if(!e)return(0,E.of)({totalCount:0,references:[]});let t=n.config().dataset;return n.observable.request({url:"/data/references/".concat(t,"/documents/").concat(e,"/to?excludeInternalReferences=true&excludePaths=true"),tag:"use-referring-documents.external"}).pipe((0,D.K)(e=>{if("object"==typeof e&&e&&"statusCode"in e&&"response"in e&&404===e.statusCode)return(0,E.of)({totalCount:0,references:[]});throw e}))}))})(t,{versionedClient:n})))});function t8(e){return"string"!=typeof e.datasetName}function t9(e){return!!e&&""!==e}function ne(e){return(null==e?void 0:e.datasetName)||""}function nt(e){return e.projectId}let nn=(0,x.zo)(d.xu)(eN()),ni=(0,x.zo)(d.kC).attrs({align:"center",direction:"column",justify:"center"})(eO());function nl(e){let t,n,i,l,d,c,p,m,f,v;let x=(0,s.c)(40),{id:g,type:b,action:y,onCancel:j,onConfirm:_}=e,w=void 0===y?"delete":y,{t:k}=(0,h.$G7)(o.UA),C="deletion-confirmation-".concat((0,u.useId)()),{internalReferences:S,crossDatasetReferences:z,isLoading:E,totalCount:I,projectIds:P,datasetNames:A,hasUnknownDatasetNames:T}=function(e){let t,n,i,l,o,r,a,d,c;let u=(0,s.c)(24),p=(0,h.m85)(h.Dr7),m=(0,h.H__)();u[0]!==e?(t=(0,h.vsM)(e),u[0]=e,u[1]=t):t=u[1];let f=t;u[2]!==m||u[3]!==f?(n=[f,m],u[2]=m,u[3]=f,u[4]=n):n=u[4];let[v,x]=t6(n);u[5]!==f||u[6]!==p?(i=[f,p],u[5]=f,u[6]=p,u[7]=i):i=u[7];let[g,b]=t7(i);u[8]!==(null==g?void 0:g.references)?(l=()=>Array.from(new Set(null==g?void 0:g.references.map(nt).filter(Boolean))).sort(),u[8]=null==g?void 0:g.references,u[9]=l):l=u[9],u[10]!==l?(o=l(),u[10]=l,u[11]=o):o=u[11];let y=o;u[12]!==(null==g?void 0:g.references)?(a=Array.from(new Set(null==g?void 0:g.references.map(ne).filter(t9))).sort(),u[12]=null==g?void 0:g.references,u[13]=a):a=u[13],r=a,u[14]!==(null==g?void 0:g.references)?(d=()=>!!(null==g?void 0:g.references.some(t8)),u[14]=null==g?void 0:g.references,u[15]=d):d=u[15];let j=d(),_=((null==v?void 0:v.totalCount)||0)+((null==g?void 0:g.totalCount)||0),w=x||b;return u[16]!==g||u[17]!==r||u[18]!==j||u[19]!==v||u[20]!==y||u[21]!==_||u[22]!==w?(c={totalCount:_,projectIds:y,datasetNames:r,hasUnknownDatasetNames:j,internalReferences:v,crossDatasetReferences:g,isLoading:w},u[16]=g,u[17]=r,u[18]=j,u[19]=v,u[20]=y,u[21]=_,u[22]=w,u[23]=c):c=u[23],c}(g);x[0]!==g||x[1]!==b?(n={_id:g,_type:b},x[0]=g,x[1]=b,x[2]=n):n=x[2],t=n,x[3]!==t?(i=(0,a.jsx)(t$,{document:t}),x[3]=t,x[4]=i):i=x[4];let R=i,M=!E;return x[5]!==w||x[6]!==k?(l=k("confirm-delete-dialog.header.text",{context:w}),x[5]=w,x[6]=k,x[7]=l):l=x[7],x[8]!==k?(d=k("confirm-delete-dialog.cancel-button.text"),x[8]=k,x[9]=d):d=x[9],x[10]!==j||x[11]!==d?(c={onClick:j,text:d},x[10]=j,x[11]=d,x[12]=c):c=x[12],x[13]!==w||x[14]!==_||x[15]!==M||x[16]!==k||x[17]!==I?(p=M?{text:k(I>0?"confirm-delete-dialog.confirm-anyway-button.text":"confirm-delete-dialog.confirm-button.text",{context:w}),onClick:_}:void 0,x[13]=w,x[14]=_,x[15]=M,x[16]=k,x[17]=I,x[18]=p):p=x[18],x[19]!==c||x[20]!==p?(m={cancelButton:c,confirmButton:p},x[19]=c,x[20]=p,x[21]=m):m=x[21],x[22]!==w||x[23]!==z||x[24]!==A||x[25]!==R||x[26]!==T||x[27]!==S||x[28]!==E||x[29]!==j||x[30]!==P||x[31]!==k||x[32]!==I?(f=(0,a.jsx)(nn,{children:z&&S&&!E?(0,a.jsx)(t3,{crossDatasetReferences:z,internalReferences:S,documentTitle:R,isLoading:E,totalCount:I,action:w,projectIds:P,datasetNames:A,hasUnknownDatasetNames:T,onReferenceLinkClick:j}):(0,a.jsx)(ni,{"data-testid":"loading-container",children:(0,a.jsx)(h.Bwn,{showText:!0,title:k("confirm-delete-dialog.loading.text")})})}),x[22]=w,x[23]=z,x[24]=A,x[25]=R,x[26]=T,x[27]=S,x[28]=E,x[29]=j,x[30]=P,x[31]=k,x[32]=I,x[33]=f):f=x[33],x[34]!==C||x[35]!==j||x[36]!==f||x[37]!==l||x[38]!==m?(v=(0,a.jsx)(r.Vq,{width:1,id:C,header:l,footer:m,onClose:j,onClickOutside:j,children:f}),x[34]=C,x[35]=j,x[36]=f,x[37]=l,x[38]=m,x[39]=v):v=x[39],v}function no(e){let t,n;let i=(0,s.c)(6),{t:l}=(0,h.$G7)(o.UA),c=(0,u.useId)(),[p,m]=(0,u.useState)(null);i[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>m(null),i[0]=t):t=i[0];let f=t;return i[1]!==p||i[2]!==c||i[3]!==e||i[4]!==l?(n=p?(0,a.jsx)(r.Vq,{id:"dialog-error-".concat(c),"data-testid":"confirm-delete-error-dialog",header:l("confirm-delete-dialog.error.title.text"),footer:{confirmButton:{text:l("confirm-delete-dialog.error.retry-button.text"),onClick:f,tone:"default"}},onClose:e.onCancel,children:(0,a.jsx)(d.xu,{padding:4,children:(0,a.jsx)(d.xv,{size:1,children:l("confirm-delete-dialog.error.message.text")})})}):(0,a.jsx)(r.SV,{onCatch:m,children:(0,a.jsx)(nl,{...e})}),i[1]=p,i[2]=c,i[3]=e,i[4]=l,i[5]=n):n=i[5],n}function nr(e){let t,n,i;let l=(0,s.c)(6),{children:o,ms:r}=e,d=void 0===r?0:r,[c,p]=(0,u.useState)(d<=0);if(l[0]!==d?(t=()=>{if(d<=0)return;let e=setTimeout(()=>p(!0),d);return()=>{clearTimeout(e)}},n=[d],l[0]=d,l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,u.useEffect)(t,n),!c||!o){let e;return l[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(a.Fragment,{}),l[3]=e):e=l[3],e}return l[4]!==o?(i="function"==typeof o?o():o,l[4]=o,l[5]=i):i=l[5],i}let na=(0,x.zo)(d.mh)(eU());function ns(e){let t,n;let i=(0,s.c)(7),{disabled:l,element:o}=e,{resize:r}=tY(),[d,c]=(0,u.useState)(!1);i[0]!==o||i[1]!==r?(t=e=>{if(!o)return;c(!0),e.preventDefault();let t=e.pageX;r("start",o,0);let n=e=>{e.preventDefault(),r("move",o,e.pageX-t)},i=e=>{e.preventDefault(),c(!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i),r("end",o,0)};window.addEventListener("mousemove",n),window.addEventListener("mouseup",i)},i[0]=o,i[1]=r,i[2]=t):t=i[2];let p=t,m=l?"":void 0,h=d?"":void 0;return i[3]!==p||i[4]!==m||i[5]!==h?(n=(0,a.jsx)(na,{"data-disabled":m,"data-dragging":h,onMouseDown:p}),i[3]=p,i[4]=m,i[5]=h,i[6]=n):n=i[6],n}let nd=(0,x.zo)(d.Zb)(eB()),nc=(0,u.forwardRef)(function(e,t){var n,i,l;let o,r,c,m,f,v,x,g,b,y,j,_,w,k,C,S,z,E,I,P,A,T,R,M,D,L,N,O,U,B,$,V;let G=(0,s.c)(86);G[0]!==e?({children:o,currentMinWidth:c,currentMaxWidth:r,flex:g,id:m,minWidth:v,maxWidth:f,selected:b,...x}=e,G[0]=e,G[1]=o,G[2]=r,G[3]=c,G[4]=m,G[5]=f,G[6]=v,G[7]=x,G[8]=g,G[9]=b):(o=G[1],r=G[2],c=G[3],m=G[4],f=G[5],v=G[6],x=G[7],g=G[8],b=G[9]);let F=void 0===g?1:g,K=void 0!==b&&b,[W,X]=(0,u.useState)(null),{collapse:H,collapsed:q,expand:Y,expandedElement:Z,mount:J,panes:Q}=tY();if(G[10]!==Q||G[11]!==W){let e;G[14]!==W?(e=e=>e.element===W,G[14]=W,G[15]=e):e=G[15],j=(y=Q.find(e))&&Q.indexOf(y),G[10]=Q,G[11]=W,G[12]=y,G[13]=j}else y=G[12],j=G[13];let ee=j,et="number"==typeof ee?Q[ee+1]:void 0,en=ee===Q.length-1,ei=Z===W,el=!q&&((null==y?void 0:y.collapsed)||!1),eo=(null==et?void 0:et.collapsed)||!1,er=(0,u.useRef)(null),ea=null!==(n=null==y?void 0:y.flex)&&void 0!==n?n:F,es=null!==(i=null==y?void 0:y.currentMinWidth)&&void 0!==i?i:c,ed=null!==(l=null==y?void 0:y.currentMaxWidth)&&void 0!==l?l:r;G[16]===Symbol.for("react.memo_cache_sentinel")?(_=()=>er.current,G[16]=_):_=G[16],(0,u.useImperativeHandle)(t,_),G[17]===Symbol.for("react.memo_cache_sentinel")?(w=e=>{X(e),er.current=e},G[17]=w):w=G[17];let ec=w;G[18]!==r||G[19]!==c||G[20]!==F||G[21]!==m||G[22]!==f||G[23]!==v||G[24]!==J||G[25]!==W?(k=()=>{if(W)return J(W,{currentMinWidth:c,currentMaxWidth:r,flex:F,id:m,minWidth:v,maxWidth:f})},C=[c,r,F,m,v,f,J,W],G[18]=r,G[19]=c,G[20]=F,G[21]=m,G[22]=f,G[23]=v,G[24]=J,G[25]=W,G[26]=k,G[27]=C):(k=G[26],C=G[27]),(0,u.useLayoutEffect)(k,C),G[28]!==H||G[29]!==W?(S=()=>{W&&H(W)},G[28]=H,G[29]=W,G[30]=S):S=G[30];let eu=S;G[31]!==Y||G[32]!==W?(z=()=>{W&&Y(W)},G[31]=Y,G[32]=W,G[33]=z):z=G[33];let ep=z,em=!q&&el;G[34]!==eu||G[35]!==ep||G[36]!==en||G[37]!==ee||G[38]!==W||G[39]!==em?(I={collapse:eu,collapsed:em,expand:ep,index:ee,isLast:en,rootElement:W},G[34]=eu,G[35]=ep,G[36]=en,G[37]=ee,G[38]=W,G[39]=em,G[40]=I):I=G[40],E=I;e:{if(q){P=void 0;break e}if(el){P=51;break e}if(0===es||en){P=v||204;break e}P=es||v||204}let eh=P;t:{if(el){A=51;break t}if(q&&en){A=void 0;break t}if(en){if(f){A=null!=ed?ed:f;break t}A=void 0;break t}A=null!=ed?ed:f}let ef=A,ev=q&&!en;G[41]!==el||G[42]!==en||G[43]!==q||G[44]!==eo||G[45]!==W?(R=!en&&!q&&(0,a.jsx)(h.jr5,{zOffset:"paneResizer",children:(0,a.jsx)(ns,{disabled:el||eo,element:W})}),G[41]=el,G[42]=en,G[43]=q,G[44]=eo,G[45]=W,G[46]=R):R=G[46],T=R;let ex=ef===1/0?void 0:ef;G[47]!==ea||G[48]!==eh||G[49]!==ex?(D={flex:ea,minWidth:eh,maxWidth:ex},G[47]=ea,G[48]=eh,G[49]=ex,G[50]=D):D=G[50],M=D;let eg=q?void 0:"hidden",eb=el?"":void 0,ey=K?"":void 0;return G[51]!==el||G[52]!==ed||G[53]!==es||G[54]!==ei||G[55]!==ea||G[56]!==ef||G[57]!==eh||G[58]!==ee?(L=!1,G[51]=el,G[52]=ed,G[53]=es,G[54]=ei,G[55]=ea,G[56]=ef,G[57]=eh,G[58]=ee,G[59]=L):L=G[59],G[60]!==o||G[61]!==ev?(N=!ev&&(0,a.jsx)(d.kC,{direction:"column",height:"fill",children:o}),G[60]=o,G[61]=ev,G[62]=N):N=G[62],G[63]!==W||G[64]!==N?(O=(0,a.jsx)(d.NM,{element:W,children:N}),G[63]=W,G[64]=N,G[65]=O):O=G[65],G[66]!==ev||G[67]!==m||G[68]!==ee||G[69]!==x||G[70]!==M||G[71]!==eg||G[72]!==eb||G[73]!==ey||G[74]!==L||G[75]!==O?(U=(0,a.jsxs)(nd,{"data-testid":"pane","data-ui":"Pane",tone:"inherit",hidden:ev,id:m,overflow:eg,...x,"data-pane-collapsed":eb,"data-pane-index":ee,"data-pane-selected":ey,ref:ec,style:M,children:[L,O]}),G[66]=ev,G[67]=m,G[68]=ee,G[69]=x,G[70]=M,G[71]=eg,G[72]=eb,G[73]=ey,G[74]=L,G[75]=O,G[76]=U):U=G[76],G[77]!==en||G[78]!==U?(B=(0,a.jsx)(h.K4Y,{isLastPane:en,children:U}),G[77]=en,G[78]=U,G[79]=B):B=G[79],G[80]!==E||G[81]!==B?($=(0,a.jsx)(h.jr5,{zOffset:"pane",children:(0,a.jsx)(p.tc.Provider,{value:E,children:B})}),G[80]=E,G[81]=B,G[82]=$):$=G[82],G[83]!==T||G[84]!==$?(V=(0,a.jsxs)(a.Fragment,{children:[$,T]}),G[83]=T,G[84]=$,G[85]=V):V=G[85],V}),nu=(0,x.zo)(d.Zb)(e$());function np(){let e=(0,u.useContext)(p.tc);if(!e)throw Error("Pane: missing context value");return e}nu.displayName="PaneContent__root";let nm=(0,u.forwardRef)(function(e,t){let n,i,l,o,r,d;let c=(0,s.c)(14);c[0]!==e?({as:n,children:i,overflow:l,padding:o,...r}=e,c[0]=e,c[1]=n,c[2]=i,c[3]=l,c[4]=o,c[5]=r):(n=c[1],i=c[2],l=c[3],o=c[4],r=c[5]);let{collapsed:u}=np(),{collapsed:p}=tY(),m=p?void 0:l;return c[6]!==n||c[7]!==i||c[8]!==u||c[9]!==o||c[10]!==t||c[11]!==r||c[12]!==m?(d=(0,a.jsx)(nu,{"data-testid":"pane-content",forwardedAs:n,...r,flex:1,hidden:u,overflow:m,padding:o,ref:t,tone:"inherit",children:i}),c[6]=n,c[7]=i,c[8]=u,c[9]=o,c[10]=t,c[11]=r,c[12]=m,c[13]=d):d=c[13],d});function nh(e){return e?e.toLocaleLowerCase().replaceAll(" ",""):""}let nf={constrainSize:!0,placement:"left-start",portal:!0};function nv(e){let t,n,i,l;let o=(0,s.c)(35),{disabled:r,isAfterGroup:c,node:u}=e,p=(0,h.sr_)("i18n"in u?u:void 0);if("divider"===u.type){let e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(d.R,{}),o[0]=e):e=o[0],e}o[1]!==p||o[2]!==u?(t=p(u),o[1]=p,o[2]=u,o[3]=t):t=o[3];let{title:m}=t;if("group"===u.type){let e,t,n,i;if(0===u.children.length)return null;if(u.expanded){let e,t,n;return o[4]!==c?(e=c&&(0,a.jsx)(d.R,{}),o[4]=c,o[5]=e):e=o[5],o[6]!==r||o[7]!==u.children||o[8]!==u.disabled?(t=u.children.map((e,t)=>{var n;return(0,a.jsx)(nv,{disabled:r||!!u.disabled,isAfterGroup:(null===(n=u.children[t-1])||void 0===n?void 0:n.type)==="group",node:e},e.key)}),o[6]=r,o[7]=u.children,o[8]=u.disabled,o[9]=t):t=o[9],o[10]!==e||o[11]!==t?(n=(0,a.jsxs)(a.Fragment,{children:[e,t]}),o[10]=e,o[11]=t,o[12]=n):n=o[12],n}o[13]!==c?(e=c&&(0,a.jsx)(d.R,{}),o[13]=c,o[14]=e):e=o[14];let l=u.icon;return o[15]!==r||o[16]!==u.children||o[17]!==u.disabled?(t=u.children.map((e,t)=>{var n;return(0,a.jsx)(nv,{disabled:r||!!u.disabled,isAfterGroup:(null===(n=u.children[t-1])||void 0===n?void 0:n.type)==="group",node:e},e.key)}),o[15]=r,o[16]=u.children,o[17]=u.disabled,o[18]=t):t=o[18],o[19]!==r||o[20]!==u.icon||o[21]!==t||o[22]!==m?(n=(0,a.jsx)(eC.k,{disabled:r,icon:l,popover:nf,text:m,children:t}),o[19]=r,o[20]=u.icon,o[21]=t,o[22]=m,o[23]=n):n=o[23],o[24]!==e||o[25]!==n?(i=(0,a.jsxs)(a.Fragment,{children:[e,n]}),o[24]=e,o[25]=n,o[26]=i):i=o[26],i}return o[27]!==c?(n=c&&(0,a.jsx)(d.R,{}),o[27]=c,o[28]=n):n=o[28],o[29]!==r||o[30]!==u?(i=(0,a.jsx)(nx,{disabled:r,node:u}),o[29]=r,o[30]=u,o[31]=i):i=o[31],o[32]!==n||o[33]!==i?(l=(0,a.jsxs)(a.Fragment,{children:[n,i]}),o[32]=n,o[33]=i,o[34]=l):l=o[34],l}function nx(e){let t;let n=(0,s.c)(5),{node:i}=e;if(i.intent){let t;return n[0]!==i.intent||n[1]!==e?(t=(0,a.jsx)(nb,{...e,intent:i.intent}),n[0]=i.intent,n[1]=e,n[2]=t):t=n[2],t}return n[3]!==e?(t=(0,a.jsx)(ng,{...e}),n[3]=e,n[4]=t):t=n[4],t}function ng(e){var t;let n,i,l,o;let c=(0,s.c)(17),{disabled:u,node:p}=e;c[0]!==p.disabled?(n="object"==typeof p.disabled&&(0,a.jsx)(d.xv,{size:1,children:p.disabled.reason}),c[0]=p.disabled,c[1]=n):n=c[1];let f=n,{title:v}=(0,h.v0Z)(p),x=u||!!p.disabled;c[2]!==p.hotkey?(i=null===(t=p.hotkey)||void 0===t?void 0:t.split("+"),c[2]=p.hotkey,c[3]=i):i=c[3];let g=p.iconRight||p.selected&&m.KML,b="action-".concat(nh(p.title));return c[4]!==p.icon||c[5]!==p.onAction||c[6]!==p.selected||c[7]!==p.tone||c[8]!==x||c[9]!==i||c[10]!==g||c[11]!==b||c[12]!==v?(l=(0,a.jsx)(r.sN,{disabled:x,hotkeys:i,icon:p.icon,iconRight:g,onClick:p.onAction,pressed:p.selected,text:v,tone:p.tone,"data-testid":b}),c[4]=p.icon,c[5]=p.onAction,c[6]=p.selected,c[7]=p.tone,c[8]=x,c[9]=i,c[10]=g,c[11]=b,c[12]=v,c[13]=l):l=c[13],c[14]!==l||c[15]!==f?(o=(0,a.jsx)(h.xMr,{content:f,placement:"left",children:l}),c[14]=l,c[15]=f,c[16]=o):o=c[16],o}function nb(e){var t;let n,i,l,o,c,u;let p=(0,s.c)(23),{disabled:f,intent:v,node:x}=e;p[0]!==x.disabled?(n="object"==typeof x.disabled&&(0,a.jsx)(d.xv,{size:1,children:x.disabled.reason}),p[0]=x.disabled,p[1]=n):n=p[1];let g=n;p[2]!==v.params||p[3]!==v.type?(i={intent:v.type,params:v.params},p[2]=v.params,p[3]=v.type,p[4]=i):i=p[4];let b=(0,_.PM)(i);p[5]!==b||p[6]!==x?(l=e=>{b.onClick(e),x.onAction()},p[5]=b,p[6]=x,p[7]=l):l=p[7];let y=l,{title:j}=(0,h.v0Z)(x),w=f||!!x.disabled;p[8]!==x.hotkey?(o=null===(t=x.hotkey)||void 0===t?void 0:t.split("+"),p[8]=x.hotkey,p[9]=o):o=p[9];let k=x.selected?m.KML:void 0;return p[10]!==y||p[11]!==b.href||p[12]!==x.icon||p[13]!==x.selected||p[14]!==x.tone||p[15]!==w||p[16]!==o||p[17]!==k||p[18]!==j?(c=(0,a.jsx)(r.sN,{as:"a",disabled:w,hotkeys:o,href:b.href,icon:x.icon,iconRight:k,onClick:y,pressed:x.selected,text:j,tone:x.tone}),p[10]=y,p[11]=b.href,p[12]=x.icon,p[13]=x.selected,p[14]=x.tone,p[15]=w,p[16]=o,p[17]=k,p[18]=j,p[19]=c):c=p[19],p[20]!==c||p[21]!==g?(u=(0,a.jsx)(h.xMr,{content:g,placement:"left",children:c}),p[20]=c,p[21]=g,p[22]=u):u=p[22],u}let ny={constrainSize:!0,placement:"bottom",portal:!0};function nj(e,t){return e.some(e=>"item"===e.type&&e.tone===t||"group"===e.type&&nj(e.children,t))}function n_(e){let t,n,i,l,o;let c=(0,s.c)(13),{nodes:p,actionsNodes:m}=e,f=(0,u.useId)(),v=nj(p,"critical"),x=nj(p,"caution"),g=v?"critical":x?"caution":void 0;return c[0]!==g?(t=(0,a.jsx)(h.lXN,{tone:g,"data-testid":"pane-context-menu-button"}),c[0]=g,c[1]=t):t=c[1],c[2]!==m?(n=m&&(0,a.jsxs)(a.Fragment,{children:[m,(0,a.jsx)(d.R,{})]}),c[2]=m,c[3]=n):n=c[3],c[4]!==p?(i=p.map((e,t)=>{var n;let i=(null===(n=p[t-1])||void 0===n?void 0:n.type)==="group";return(0,a.jsx)(nv,{isAfterGroup:i,node:e},e.key)}),c[4]=p,c[5]=i):i=c[5],c[6]!==n||c[7]!==i?(l=(0,a.jsxs)(d.v2,{children:[n,i]}),c[6]=n,c[7]=i,c[8]=l):l=c[8],c[9]!==f||c[10]!==t||c[11]!==l?(o=(0,a.jsx)(r.j2,{button:t,id:f,menu:l,popover:ny}),c[9]=f,c[10]=t,c[11]=l,c[12]=o):o=c[12],o}let nw=(0,x.zo)(d.mh)(eV()),nk=(0,x.zo)(d.Zb)(eG()),nC=(0,u.forwardRef)(function(e,t){let n,i;let l=(0,s.c)(7),{children:o,padding:r}=e,{collapsed:c}=np();return l[0]!==o||l[1]!==r?(n=(0,a.jsx)(nk,{tone:"inherit",children:(0,a.jsx)(d.xu,{padding:r,children:o})}),l[0]=o,l[1]=r,l[2]=n):n=l[2],l[3]!==c||l[4]!==t||l[5]!==n?(i=(0,a.jsx)(h.jr5,{zOffset:"paneFooter",children:(0,a.jsx)(nw,{"data-testid":"pane-footer",hidden:c,ref:t,children:n})}),l[3]=c,l[4]=t,l[5]=n,l[6]=i):i=l[6],i}),nS=(0,x.zo)(d.mh)(e=>{let{$border:t}=e;return(0,x.iv)(eF(),t?"var(--card-border-color)":"transparent")}),nz=(0,x.zo)(d.kC)(eK()),nE=(0,x.zo)(d.Zb)(e=>{let{theme:t}=e,{fg:n,bg:i}=t.sanity.color.card.enabled;return(0,x.iv)(eW(),i,n)}),nI=(0,x.zo)(c.Qr)(eX()),nP=(0,x.zo)(d.xv)(eH()),nA=(0,u.forwardRef)(function(e,t){let n,i,l,o,r,u,p,m,f,v,x,g,b,y;let j=(0,s.c)(48),{actions:_,backButton:w,border:k,contentAfter:C,loading:S,subActions:z,tabs:E,tabIndex:I,title:P,appendTitle:A}=e,{collapse:T,collapsed:R,expand:M,rootElement:D}=np(),L=(0,c.XL)(D||null),N=R?(null==L?void 0:L.height)||window.innerHeight:void 0;j[0]!==N?(i={width:N},j[0]=N,j[1]=i):i=j[1],n=i,j[2]!==T||j[3]!==R?(l=()=>{R||T()},j[2]=T,j[3]=R,j[4]=l):l=j[4];let O=l;j[5]!==R||j[6]!==M?(o=()=>{R&&M()},j[5]=R,j[6]=M,j[7]=o):o=j[7];let U=o,B=!!(!R&&(E||z)),$=R?"":void 0,V=R?"":void 0;j[8]!==w?(r=w&&(0,a.jsx)(d.xu,{flex:"none",children:w}),j[8]=w,j[9]=r):r=j[9];let G=w?1:2;j[10]!==S?(u=S&&(0,a.jsx)(d.xu,{children:(0,a.jsx)(nI,{animated:!0,radius:1,size:1})}),j[10]=S,j[11]=u):u=j[11],j[12]!==A||j[13]!==S||j[14]!==P?(p=!S&&(0,a.jsxs)(d.kC,{align:"center",gap:1,children:[(0,a.jsx)(nP,{size:1,textOverflow:"ellipsis",weight:"semibold",children:P}),A]}),j[12]=A,j[13]=S,j[14]=P,j[15]=p):p=j[15],j[16]!==O||j[17]!==p||j[18]!==G||j[19]!==u||j[20]!==I?(m=(0,a.jsxs)(nE,{__unstable_focusRing:!0,flex:1,onClick:O,paddingLeft:G,padding:2,tabIndex:I,children:[u,p]}),j[16]=O,j[17]=p,j[18]=G,j[19]=u,j[20]=I,j[21]=m):m=j[21],j[22]!==_||j[23]!==R?(f=_&&(0,a.jsx)(d.xu,{hidden:R,children:(0,a.jsx)(h.jr5,{zOffset:"paneHeader",children:_})}),j[22]=_,j[23]=R,j[24]=f):f=j[24],j[25]!==m||j[26]!==f||j[27]!==r?(v=(0,a.jsxs)(d.kC,{align:"flex-start",gap:3,children:[r,m,f]}),j[25]=m,j[26]=f,j[27]=r,j[28]=v):v=j[28],j[29]!==R||j[30]!==B||j[31]!==z||j[32]!==E?(x=B&&(0,a.jsxs)(d.kC,{align:"center",hidden:R,overflow:"auto",children:[(0,a.jsx)(d.xu,{flex:1,marginRight:z?3:0,children:E}),z]}),j[29]=R,j[30]=B,j[31]=z,j[32]=E,j[33]=x):x=j[33],j[34]!==U||j[35]!==n||j[36]!==v||j[37]!==x?(g=(0,a.jsxs)(nz,{direction:"column",gap:3,onClick:U,padding:3,sizing:"border",style:n,children:[v,x]}),j[34]=U,j[35]=n,j[36]=v,j[37]=x,j[38]=g):g=j[38];let F=!R&&C;return j[39]!==g||j[40]!==F||j[41]!==V?(b=(0,a.jsx)(h.jr5,{zOffset:"paneHeader",children:(0,a.jsxs)(d.Zb,{"data-collapsed":V,tone:"inherit",children:[g,F]})}),j[39]=g,j[40]=F,j[41]=V,j[42]=b):b=j[42],j[43]!==k||j[44]!==t||j[45]!==b||j[46]!==$?(y=(0,a.jsx)(d.li,{zOffset:100,children:(0,a.jsx)(nS,{$border:k,"data-collapsed":$,"data-testid":"pane-header",ref:t,children:b})}),j[43]=k,j[44]=t,j[45]=b,j[46]=$,j[47]=y):y=j[47],y});function nT(e){var t;return e.disabled?{disabledReason:"object"==typeof e.disabled?e.disabled.reason:void 0,ariaLabel:"object"==typeof e.disabled&&"string"==typeof(null===(t=e.disabled)||void 0===t?void 0:t.reason)?e.disabled.reason:"This is disabled",isDisabled:!!e.disabled}:{disabledReason:void 0,ariaLabel:void 0,isDisabled:!1}}function nR(e){let t=(0,s.c)(4),{node:n}=e;if("item"===n.type){let e;return t[0]!==n?(e=(0,a.jsx)(nM,{node:n}),t[0]=n,t[1]=e):e=t[1],e}if("group"===n.type){let e;return t[2]!==n?(e=(0,a.jsx)(nL,{node:n}),t[2]=n,t[3]=e):e=t[3],e}return console.warn('unknown menu node (expected `type: "item" | "group"`):',n),null}function nM(e){let t,n,i,l,o;let r=(0,s.c)(23),{node:d}=e,{title:c}=(0,h.v0Z)(d),{t:u}=(0,h.$G7)();if(d.intent){let t;return r[0]!==d.intent||r[1]!==e?(t=(0,a.jsx)(nD,{...e,intent:d.intent}),r[0]=d.intent,r[1]=e,r[2]=t):t=r[2],t}r[3]!==d?(t=nT(d),r[3]=d,r[4]=t):t=r[4];let{disabledReason:p,ariaLabel:m,isDisabled:f}=t;r[5]!==m||r[6]!==u||r[7]!==c?(n=m||c||u("status-button.aria-label"),r[5]=m,r[6]=u,r[7]=c,r[8]=n):n=r[8],r[9]!==f||r[10]!==d.hotkey?(i=!f&&d.hotkey?d.hotkey.split("+"):void 0,r[9]=f,r[10]=d.hotkey,r[11]=i):i=r[11];let v=f?p:c;return r[12]!==i||r[13]!==v?(l={hotkeys:i,content:v},r[12]=i,r[13]=v,r[14]=l):l=r[14],r[15]!==f||r[16]!==d.icon||r[17]!==d.onAction||r[18]!==d.selected||r[19]!==d.tone||r[20]!==n||r[21]!==l?(o=(0,a.jsx)(h.YG6,{disabled:f,icon:d.icon,onClick:d.onAction,selected:d.selected,tone:d.tone,"aria-label":n,tooltipProps:l}),r[15]=f,r[16]=d.icon,r[17]=d.onAction,r[18]=d.selected,r[19]=d.tone,r[20]=n,r[21]=l,r[22]=o):o=r[22],o}function nD(e){let t,n,i,l,o,r,d;let c=(0,s.c)(27),{intent:u,node:p}=e;c[0]!==u.params||c[1]!==u.type?(t={intent:u.type,params:u.params},c[0]=u.params,c[1]=u.type,c[2]=t):t=c[2];let m=(0,_.PM)(t),{t:f}=(0,h.$G7)();c[3]!==m||c[4]!==p?(n=e=>{m.onClick(e),p.onAction()},c[3]=m,c[4]=p,c[5]=n):n=c[5];let v=n;c[6]!==p?(i=nT(p),c[6]=p,c[7]=i):i=c[7];let{disabledReason:x,ariaLabel:g,isDisabled:b}=i;c[8]!==g||c[9]!==p.title||c[10]!==f?(l=g||p.title||f("status-button.aria-label"),c[8]=g,c[9]=p.title,c[10]=f,c[11]=l):l=c[11],c[12]!==b||c[13]!==p.hotkey?(o=!b&&p.hotkey?p.hotkey.split("+"):void 0,c[12]=b,c[13]=p.hotkey,c[14]=o):o=c[14];let y=b?x:p.title;return c[15]!==o||c[16]!==y?(r={hotkeys:o,content:y,placement:"bottom",portal:!0},c[15]=o,c[16]=y,c[17]=r):r=c[17],c[18]!==v||c[19]!==m.href||c[20]!==b||c[21]!==p.icon||c[22]!==p.selected||c[23]!==p.tone||c[24]!==l||c[25]!==r?(d=(0,a.jsx)(h.YG6,{forwardedAs:"a",disabled:b,href:m.href,icon:p.icon,onClick:v,selected:p.selected,tone:p.tone,"aria-label":l,tooltipProps:r}),c[18]=v,c[19]=m.href,c[20]=b,c[21]=p.icon,c[22]=p.selected,c[23]=p.tone,c[24]=l,c[25]=r,c[26]=d):d=c[26],d}function nL(e){var t;let n,i,l,o,c;let p=(0,s.c)(16),{node:f}=e,{title:v}=(0,h.v0Z)(f),x=!!f.disabled,g=null!==(t=f.icon)&&void 0!==t?t:m.Tzq;p[0]!==f.title?(n={content:f.title,portal:!0},p[0]=f.title,p[1]=n):n=p[1],p[2]!==x||p[3]!==g||p[4]!==n||p[5]!==v?(i=(0,a.jsx)(r.zx,{disabled:x,icon:g,label:v,mode:"bleed",tooltipProps:n}),p[2]=x,p[3]=g,p[4]=n,p[5]=v,p[6]=i):i=p[6];let b=(0,u.useId)();return p[7]!==f.children||p[8]!==f.disabled?(l=f.children.map((e,t)=>{var n;return(0,a.jsx)(nv,{disabled:!!f.disabled,isAfterGroup:(null===(n=f.children[t-1])||void 0===n?void 0:n.type)==="group",node:e},e.key)}),p[7]=f.children,p[8]=f.disabled,p[9]=l):l=p[9],p[10]!==l?(o=(0,a.jsx)(d.v2,{children:l}),p[10]=l,p[11]=o):o=p[11],p[12]!==i||p[13]!==b||p[14]!==o?(c=(0,a.jsx)(r.j2,{button:i,id:b,menu:o}),p[12]=i,p[13]=b,p[14]=o,p[15]=c):c=p[15],c}let nN=(0,x.zo)(d.Zb)(eq()),nO=[];function nU(e){var t;let n,i,l,o,r,d,m,h,f,v,x,g,b,y,j,_,w,k;let C=(0,s.c)(41);C[0]!==e?({children:n,minWidth:i,onCollapse:l,onExpand:o,...r}=e,C[0]=e,C[1]=n,C[2]=i,C[3]=l,C[4]=o,C[5]=r):(n=C[1],i=C[2],l=C[3],o=C[4],r=C[5]);let[S]=(0,u.useState)(nB),[z,E]=(0,u.useState)(null),I=(null===(t=(0,c.XL)(z))||void 0===t?void 0:t.width)||0,P=void 0!==I&&i?I<i:void 0;C[6]===Symbol.for("react.memo_cache_sentinel")?(d={expandedElement:null,panes:[],resizing:!1},C[6]=d):d=C[6];let[A,T]=(0,u.useState)(d);C[7]!==S||C[8]!==z?(m=()=>S.setRootElement(z),h=[S,z],C[7]=S,C[8]=z,C[9]=m,C[10]=h):(m=C[9],h=C[10]),(0,u.useEffect)(m,h),C[11]!==S||C[12]!==I?(f=()=>S.setRootWidth(I),v=[S,I],C[11]=S,C[12]=I,C[13]=f,C[14]=v):(f=C[13],v=C[14]),(0,u.useEffect)(f,v),C[15]!==S?(x=()=>S.subscribe(T),g=[S],C[15]=S,C[16]=x,C[17]=g):(x=C[16],g=C[17]),(0,u.useEffect)(x,g),C[18]!==P||C[19]!==l||C[20]!==o?(b=()=>{void 0!==P&&(P&&l&&l(),!P&&o&&o())},y=[P,l,o],C[18]=P,C[19]=l,C[20]=o,C[21]=b,C[22]=y):(b=C[21],y=C[22]),(0,u.useEffect)(b,y),C[23]!==P||C[24]!==S.collapse||C[25]!==S.expand||C[26]!==S.mount||C[27]!==S.resize||C[28]!==A.expandedElement||C[29]!==A.panes||C[30]!==A.resizing?(_={collapse:S.collapse,collapsed:P,expand:S.expand,expandedElement:A.expandedElement,mount:S.mount,panes:A.panes,resize:S.resize,resizing:A.resizing},C[23]=P,C[24]=S.collapse,C[25]=S.expand,C[26]=S.mount,C[27]=S.resize,C[28]=A.expandedElement,C[29]=A.panes,C[30]=A.resizing,C[31]=_):_=C[31],j=_;let R=P?"":void 0,M=A.resizing?"":void 0,D=I?"":void 0;return C[32]!==n||C[33]!==r||C[34]!==R||C[35]!==M||C[36]!==D?(w=(0,a.jsx)(nN,{"data-ui":"PaneLayout",...r,"data-collapsed":R,"data-resizing":M,"data-mounted":D,ref:E,children:n}),C[32]=n,C[33]=r,C[34]=R,C[35]=M,C[36]=D,C[37]=w):w=C[37],C[38]!==j||C[39]!==w?(k=(0,a.jsx)(p.yq.Provider,{value:j,children:w}),C[38]=j,C[39]=w,C[40]=k):k=C[40],k}function nB(){return function(){let e=[],t=[],n=new WeakMap,i=new Set,l={},o=null,r=0,a=null,s=new Map,d=!1;function c(e){i.delete(e),a=e,u()}return{collapse:function(e){i.add(e),a===e&&(a=null),u()},expand:c,mount:function(e,i){return n.set(e,{...i,original:i}),t.push(e),o&&function(e,t){let n=new WeakMap;for(let i of t)n.set(i,function(e,t){let n=[],i=t;for(;i!==e;){let t=i.parentElement;if(!t)break;let l=Array.from(t.childNodes).indexOf(i);if(n.unshift(l),t===e)break;i=t}return n}(e,i));t.sort((e,t)=>{let i=n.get(e)||nO,l=n.get(t)||nO,o=Math.max(i.length,l.length);for(let e=0;e<o;e+=1){let t=i[e]||-1,n=l[e]||-1;if(t!==n)return t-n}return 0})}(o,t),c(e),()=>{let i=t.indexOf(e);i>-1&&t.splice(i,1),n.delete(e),u()}},resize:function(e,i,o){let r=t.indexOf(i),a=n.get(i);if(!a)return;let c=t[r+1],p=n.get(c);if(p){if("start"===e&&(d=!0,l.left={element:i,flex:a.flex||1,width:i.offsetWidth},l.right={element:c,flex:p.flex||1,width:c.offsetWidth},u()),"move"===e&&l.left&&l.right){s=new Map;let{leftW:e,rightW:t,leftFlex:n,rightFlex:r}=function(e,t,n,i){var l,o;let r={flex:e.left.flex+e.right.flex,width:e.left.width+e.right.width},a=null!==(l=t.minWidth)&&void 0!==l?l:204,s=null!==(o=n.minWidth)&&void 0!==o?o:204,d=Math.min(t.maxWidth||1/0,r.width-s),c=Math.min(n.maxWidth||1/0,r.width-a),u=a-e.left.width,p=e.right.width-c;u<p&&(u=p);let m=e.right.width-s,h=d-e.left.width;m>h&&(m=h);let f=Math.min(Math.max(i,u),m),v=e.left.width+f,x=e.right.width-f;return{leftFlex:v/r.width*r.flex,leftW:v,rightFlex:x/r.width*r.flex,rightW:x}}(l,a,p,o);s.set(i,{flex:n,width:e}),s.set(c,{flex:r,width:t}),u()}if("end"===e){var m,h,f,v;d=!1;let e=s.get(i),t=s.get(c);n.set(i,{...a,currentMinWidth:0,currentMaxWidth:null!==(m=a.maxWidth)&&void 0!==m?m:1/0,flex:null!==(h=null==e?void 0:e.flex)&&void 0!==h?h:a.flex}),n.set(c,{...p,currentMinWidth:0,currentMaxWidth:null!==(f=a.maxWidth)&&void 0!==f?f:1/0,flex:null!==(v=null==t?void 0:t.flex)&&void 0!==v?v:p.flex}),s=new Map,delete l.left,delete l.right,u()}}},setRootElement:function(e){o=e},setRootWidth:function(e){r=e,u()},subscribe:function(t){return e.push(t),()=>{let n=e.push(t);n>-1&&e.splice(n,1)}}};function u(){if(!r)return;let l=[];for(let e of t)e!==a&&l.unshift(e);a&&l.unshift(a);let o=new WeakMap,c=l.length,u=l[0],p=r-(c-1)*51;for(let e of l){var m,h,f,v;let t=n.get(e);if(!t)continue;let l=t.currentMinWidth||t.minWidth||204,r=e===u,a=i.has(e),d=l>p,c=!r&&(a||d),x=s.get(e);o.set(e,{element:e,collapsed:c,currentMinWidth:null!==(m=null==x?void 0:x.width)&&void 0!==m?m:t.currentMinWidth,currentMaxWidth:null!==(h=null==x?void 0:x.width)&&void 0!==h?h:t.currentMaxWidth,flex:null!==(v=null!==(f=null==x?void 0:x.flex)&&void 0!==f?f:t.flex)&&void 0!==v?v:1}),c?p-=51:p-=l-51}let x=[];for(let e of t){let t=o.get(e);t&&x.push(t)}for(let n of e)n({expandedElement:a||t[t.length-1]||null,panes:x,resizing:d})}}()}function n$(e){return("item"===e.type||"group"===e.type)&&e.renderAsButton}let nV=ek(n$);function nG(e){let{fieldActions:t=[],menuItems:n,menuItemGroups:i}=e,l=[],o=0;for(let e=0;e<t.length;e+=1){let n=t[e];l.push(function e(t,n){var i,l,o;return"divider"===t.type?{type:"divider",key:n}:"group"===t.type?{type:"group",key:n,children:t.children.map((t,i)=>e(t,"".concat(n,"-").concat(i,"-").concat(t.type))),disabled:t.disabled,expanded:null===(i=t.expanded)||void 0===i||i,icon:t.icon,title:t.title,i18n:t.i18n,renderAsButton:null!==(l=t.renderAsButton)&&void 0!==l&&l}:{type:"item",key:n,intent:t.intent,disabled:t.disabled,icon:t.icon,iconRight:t.iconRight,onAction:t.onAction,renderAsButton:null!==(o=t.renderAsButton)&&void 0!==o&&o,selected:t.selected,title:t.title,i18n:t.i18n,tone:t.tone}}(n,"".concat(e,"-").concat(n.type)))}o+=l.length;let r=[];for(let e of i)r.find(t=>t.key===e.id)||r.push({type:"group",key:e.id,children:[],expanded:!0,renderAsButton:!1,title:e.title,i18n:e.i18n});let a=[];for(let t=0;t<n.length;t+=1){var s,d;let i=n[t],l=i.group&&r.find(e=>e.key===i.group),c="string"==typeof i.disabled?{reason:i.disabled}:i.disabled;i.group&&!l&&(l={type:"group",key:i.group,disabled:c,expanded:!0,icon:i.icon,title:i.group,children:[],renderAsButton:!1},r.push(l)),l?l.children.push({type:"item",key:"".concat(o+t,"-item"),hotkey:i.shortcut,icon:i.icon,intent:i.intent,disabled:c,onAction:()=>e.actionHandler(i),renderAsButton:null!==(s=i.showAsAction)&&void 0!==s&&s,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone}):a.push({type:"item",key:"".concat(o+t,"-item"),hotkey:i.shortcut,icon:i.icon,intent:i.intent,disabled:c,onAction:()=>e.actionHandler(i),renderAsButton:null!==(d=i.showAsAction)&&void 0!==d&&d,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone})}return[...a,...r,...l]}let nF=(0,u.forwardRef)(function(e,t){let n,i,l,o,d;let c=(0,s.c)(10);return c[0]!==e?({intent:n,...i}=e,c[0]=e,c[1]=n,c[2]=i):(n=c[1],i=c[2]),c[3]!==n?(o=(0,u.forwardRef)(function(e,t){return(0,a.jsx)(_.nR,{...e,intent:n.type,params:n.params,ref:t,searchParams:n.searchParams})}),c[3]=n,c[4]=o):o=c[4],l=o,c[5]!==l||c[6]!==e.disabled||c[7]!==t||c[8]!==i?(d=e.disabled?(0,a.jsx)(r.zx,{...i,as:"a",role:"link","aria-disabled":"true"}):(0,a.jsx)(r.zx,{...i,as:l,"data-as":"a",ref:t}),c[5]=l,c[6]=e.disabled,c[7]=t,c[8]=i,c[9]=d):d=c[9],d});function nK(e){let t,n,i;let l=(0,s.c)(12),{reveal:d,context:c,loading:u,children:p}=e,m=(0,h.xJ)(),{t:f}=(0,h.$G7)(o.UA);if(!d){let e;return l[0]!==p?(e=(0,a.jsx)(a.Fragment,{children:p}),l[0]=p,l[1]=e):e=l[1],e}return l[2]!==c||l[3]!==m||l[4]!==u||l[5]!==f?(t=u?f("insufficient-permissions-message-tooltip.loading-text"):(0,a.jsx)(h.FMn,{context:c,currentUser:m}),l[2]=c,l[3]=m,l[4]=u,l[5]=f,l[6]=t):t=l[6],l[7]!==p?(n=(0,a.jsx)("div",{children:p}),l[7]=p,l[8]=n):n=l[8],l[9]!==t||l[10]!==n?(i=(0,a.jsx)(r.u,{content:t,portal:!0,children:n}),l[9]=t,l[10]=n,l[11]=i):i=l[11],i}let nW={constrainSize:!0,placement:"bottom",portal:!0},nX=(e,t,n)=>{var i;let l=null===(i=e.find(e=>e.id===t.templateId))||void 0===i?void 0:i.schemaType;if(!l)return null;let o={template:t.templateId,type:l,version:n,id:t.initialDocumentId};return{type:"create",params:t.parameters?[o,t.parameters]:o,searchParams:n?[["perspective",n]]:void 0}};function nH(e){let t,n,i,l,c,p,f,v,x;let g=(0,s.c)(60),{templateItems:b}=e,y=(0,h.zEW)(),{selectedReleaseId:j}=(0,h.Wc0)(),{t:w}=(0,h.$G7)(o.UA);g[0]!==b||g[1]!==y?(t=[...b,...y],g[0]=b,g[1]=y,g[2]=t):t=g[2];let k=(0,h.sr_)(t);g[3]!==b?(n={templateItems:b},g[3]=b,g[4]=n):n=g[4];let[C,S]=(0,h.UMU)(n);i=!S&&(null==C?void 0:C.length)!==0&&(null==C?void 0:C.every(nY));e:{let e;if(!C){let e;g[5]===Symbol.for("react.memo_cache_sentinel")?(e={},g[5]=e):e=g[5],l=e;break e}g[6]!==C?(e=C.reduce(nq,{}),g[6]=C,g[7]=e):e=g[7],l=e}let z=l;if(0===b.length)return null;if(i){let e,t,n;return g[8]!==w?(e=w("pane-header.disabled-created-button.aria-label"),g[8]=w,g[9]=e):e=g[9],g[10]!==e?(t=(0,a.jsx)(r.zx,{"aria-label":e,icon:m.dtP,"data-testid":"action-intent-button",disabled:!0,mode:"bleed",tooltipProps:null}),g[10]=e,g[11]=t):t=g[11],g[12]!==S||g[13]!==t?(n=(0,a.jsx)(nK,{context:"create-document-type",reveal:!0,loading:S,children:t}),g[12]=S,g[13]=t,g[14]=n):n=g[14],n}if(1===b.length){var E;let e,t,n,i,l,o;let r=b[0],s=!(null===(E=z[r.id])||void 0===E?void 0:E.granted);g[15]!==r||g[16]!==j||g[17]!==y?(e=nX(y,r,j),g[15]=r,g[16]=j,g[17]=y,g[18]=e):e=g[18];let d=e;if(!d)return null;g[19]!==r||g[20]!==k?(t=k(r),g[19]=r,g[20]=k,g[21]=t):t=g[21];let c=t.title,u=r.icon||m.dtP;return g[22]!==w?(n=w("pane-header.create-new-button.tooltip"),g[22]=w,g[23]=n):n=g[23],g[24]!==n?(i={content:n},g[24]=n,g[25]=i):i=g[25],g[26]!==s||g[27]!==d||g[28]!==i||g[29]!==t.title||g[30]!==u?(l=(0,a.jsx)(nF,{"aria-label":c,icon:u,intent:d,mode:"bleed",disabled:s,"data-testid":"action-intent-button",tooltipProps:i}),g[26]=s,g[27]=d,g[28]=i,g[29]=t.title,g[30]=u,g[31]=l):l=g[31],g[32]!==s||g[33]!==S||g[34]!==l?(o=(0,a.jsx)(nK,{reveal:s,loading:S,context:"create-document-type",children:l}),g[32]=s,g[33]=S,g[34]=l,g[35]=o):o=g[35],o}if(g[36]!==w?(c=w("pane-header.create-new-button.tooltip"),g[36]=w,g[37]=c):c=g[37],g[38]!==c?(p=(0,a.jsx)(r.zx,{icon:m.dtP,mode:"bleed","data-testid":"multi-action-intent-button",tooltipProps:{content:c}}),g[38]=c,g[39]=p):p=g[39],g[40]!==k||g[41]!==S||g[42]!==z||g[43]!==j||g[44]!==w||g[45]!==b||g[46]!==y){let e;g[48]!==k||g[49]!==S||g[50]!==z||g[51]!==j||g[52]!==w||g[53]!==y?(e=(e,t)=>{var n;let i=!(null===(n=z[e.id])||void 0===n?void 0:n.granted),l=nX(y,e,j),o=y.find(t=>t.id===e.templateId);if(!o||!l)return null;let s=(0,u.forwardRef)((e,t)=>i?(0,a.jsx)("button",{type:"button",disabled:!0,...e,ref:t}):(0,a.jsx)(_.nR,{...e,intent:l.type,params:l.params,searchParams:l.searchParams,ref:t}));s.displayName="Link";let{title:d}=k({...e,title:e.title||k(o).title});return(0,a.jsx)(nK,{context:"create-document-type",reveal:i,loading:S,children:(0,a.jsx)(r.sN,{as:s,"data-as":i?"button":"a",text:d,"aria-label":i?w("pane-header.disabled-created-button.aria-label"):d,disabled:i,"data-testid":"action-intent-button-".concat(t)})},e.id)},g[48]=k,g[49]=S,g[50]=z,g[51]=j,g[52]=w,g[53]=y,g[54]=e):e=g[54],f=b.map(e),g[40]=k,g[41]=S,g[42]=z,g[43]=j,g[44]=w,g[45]=b,g[46]=y,g[47]=f}else f=g[47];return g[55]!==f?(v=(0,a.jsx)(d.v2,{children:f}),g[55]=f,g[56]=v):v=g[56],g[57]!==p||g[58]!==v?(x=(0,a.jsx)(r.j2,{button:p,id:"create-menu",menu:v,popover:nW}),g[57]=p,g[58]=v,g[59]=x):x=g[59],x}function nq(e,t){return e[t.id]=t,e}function nY(e){return!e.granted}function nZ(e){return null!=e}let nJ=e=>{let t=e=>"object"==typeof e&&e?Array.isArray(e)?e.map(t):Object.entries(e).sort((e,t)=>{let[n]=e,[i]=t;return n.localeCompare(i,"en")}):e;return JSON.stringify(t(JSON.parse(JSON.stringify(e))))},nQ=(0,u.memo)(function(e){let{initialValueTemplateItems:t=h.LZ8,menuItems:n=h.LZ8,menuItemGroups:i=h.LZ8,actionHandlers:l=h.NuZ}=e,o=(0,h.zEW)(),r=(0,u.useCallback)(e=>{if("string"==typeof e.action&&!(e.action in l))return console.warn("No handler for action:",e.action),!1;let t="function"==typeof e.action?e.action:"string"==typeof e.action?l[e.action]:null;return!!t&&(t(e.params),!0)},[l]),s=(0,u.useMemo)(()=>nG({actionHandler:r,menuItemGroups:i,menuItems:n.filter(e=>{var t;return(null===(t=e.intent)||void 0===t?void 0:t.type)!=="create"})}),[r,i,n]),c=(0,u.useMemo)(()=>s.filter(n$),[s]),p=(0,u.useMemo)(()=>s.filter(nV),[s]),m=(0,u.useMemo)(()=>n.map((e,t)=>{var n;if((null===(n=e.intent)||void 0===n?void 0:n.type)!=="create")return null;let{params:i}=e.intent;if(!i)return null;let l=Array.isArray(i)?i[0]:i,r=Array.isArray(i)?i[1]:void 0,a=l.template||l.type;if(!a)return null;let s=o.find(e=>e.id===a);return s?{item:e,template:s,templateParams:r,menuItemIndex:t,initialDocumentId:l.id}:null}).filter(nZ).map(e=>{let{initialDocumentId:t,item:n,template:i,menuItemIndex:l,templateParams:o}=e;return{id:"menuItem".concat(l),initialDocumentId:t,templateId:i.id,type:"initialValueTemplateItem",title:n.title||i.title,i18n:n.i18n||i.i18n,icon:n.icon,description:i.description,parameters:o,schemaType:i.schemaType}}),[n,o]),f=(0,u.useMemo)(()=>ew([...m,...t],e=>nJ([e.initialDocumentId,e.templateId,e.parameters])),[m,t]);return(0,a.jsxs)(d.kC,{gap:1,children:[(0,a.jsx)(nH,{templateItems:f}),c.map(e=>(0,a.jsx)(nR,{node:e},e.key)),p.length>0&&(0,a.jsx)(n_,{nodes:p})]})});function n0(e){let t,n,i,l,r,d,c;let u=(0,s.c)(16),{t:p}=(0,h.$G7)(o.UA),{layout:m,value:f}=e;return u[0]===Symbol.for("react.memo_cache_sentinel")?(t={Code:"code"},u[0]=t):t=u[0],u[1]!==f._type?(n={documentType:f._type},u[1]=f._type,u[2]=n):n=u[2],u[3]!==p||u[4]!==n?(i=(0,a.jsx)("em",{children:(0,a.jsx)(h.vNl,{t:p,i18nKey:"pane-item.missing-schema-type.title",components:t,values:n})}),u[3]=p,u[4]=n,u[5]=i):i=u[5],u[6]===Symbol.for("react.memo_cache_sentinel")?(l={Code:"code"},u[6]=l):l=u[6],u[7]!==f._id?(r={documentId:f._id},u[7]=f._id,u[8]=r):r=u[8],u[9]!==p||u[10]!==r?(d=(0,a.jsx)(h.vNl,{t:p,i18nKey:"pane-item.missing-schema-type.subtitle",components:l,values:r}),u[9]=p,u[10]=r,u[11]=d):d=u[11],u[12]!==m||u[13]!==i||u[14]!==d?(c=(0,a.jsx)(h.ogX,{title:i,subtitle:d,media:n1,layout:m}),u[12]=m,u[13]=i,u[14]=d,u[15]=c):c=u[15],c}function n1(){return(0,a.jsx)(m.foC,{})}function n2(e,t,n){return!1!==e&&(e||t&&t.icon||n||!1)}function n3(e){let t,n,i,l,o,r,c,p;let v=(0,s.c)(42),{icon:x,id:g,layout:b,pressed:y,schemaType:j,selected:_,title:w,value:k,margin:C,marginBottom:S,marginTop:z}=e,E=void 0===b?"default":b,I=(0,h.I_y)(),P=(0,h.rq_)(),{ChildLink:A}=t0(),T=(0,h.Dqo)(g),R=!!(j&&j.name&&I.get(j.name)),[M,D]=(0,u.useState)(!1);e:{let e,n,i,l;if(k&&(0,f.Si)(k)){let e,n;if(!j||!R){let e;v[0]!==k?(e=(0,a.jsx)(n0,{value:k}),v[0]=k,v[1]=e):e=v[1],t=e;break e}v[2]!==x||v[3]!==j?(e=n2(x,j,m.$lS),v[2]=x,v[3]=j,v[4]=e):e=v[4],v[5]!==T||v[6]!==P||v[7]!==E||v[8]!==j||v[9]!==e||v[10]!==k?(n=(0,a.jsx)(tH,{documentPreviewStore:P,icon:e,layout:E,schemaType:j,value:k,presence:T}),v[5]=T,v[6]=P,v[7]=E,v[8]=j,v[9]=e,v[10]=k,v[11]=n):n=v[11],t=n;break e}v[12]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:.5},v[12]=e):e=v[12],v[13]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(d.xu,{style:e,children:(0,a.jsx)(d.xv,{muted:!0,size:1,children:(0,a.jsx)(m.XCv,{})})}),v[13]=n):n=v[13],v[14]!==x||v[15]!==j?(i=n2(x,j,m.ROc),v[14]=x,v[15]=j,v[16]=i):i=v[16],v[17]!==i||v[18]!==w?(l=(0,a.jsx)(h.ogX,{status:n,icon:i,layout:"compact",title:w}),v[17]=i,v[18]=w,v[19]=l):l=v[19],t=l}let L=t;v[20]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{if(e.metaKey){D(!1);return}D(!0)},v[20]=n):n=v[20];let N=n;v[21]===Symbol.for("react.memo_cache_sentinel")?(i=()=>D(!1),v[21]=i):i=v[21],v[22]!==_?(l=[_],v[22]=_,v[23]=l):l=v[23],(0,u.useEffect)(i,l);let[O,U]=(0,u.useState)(!1),B=(0,u.useRef)(null);v[24]===Symbol.for("react.memo_cache_sentinel")?(o=()=>{B.current=setTimeout(()=>(0,u.startTransition)(()=>U(!0)),400)},v[24]=o):o=v[24];let $=o;v[25]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{B.current&&clearTimeout(B.current),(0,u.startTransition)(()=>U(!1))},v[25]=r):r=v[25];let V=r,G="pane-item-".concat(w),F=_||M;return v[26]!==g||v[27]!==O||v[28]!==j||v[29]!==k?(c=O&&(null==j?void 0:j.name)&&k&&(0,f.Si)(k)&&(0,a.jsx)(n4,{documentId:g,documentType:j.name}),v[26]=g,v[27]=O,v[28]=j,v[29]=k,v[30]=c):c=v[30],v[31]!==g||v[32]!==C||v[33]!==S||v[34]!==z||v[35]!==y||v[36]!==L||v[37]!==c||v[38]!==G||v[39]!==A||v[40]!==F?(p=(0,a.jsxs)(h.oUE,{"data-testid":G,__unstable_focusRing:!0,as:A,childId:g,"data-as":"a",margin:C,marginBottom:S,marginTop:z,onClick:N,onMouseEnter:$,onMouseLeave:V,pressed:y,radius:2,selected:F,sizing:"border",tabIndex:-1,tone:"inherit",children:[L,c]}),v[31]=g,v[32]=C,v[33]=S,v[34]=z,v[35]=y,v[36]=L,v[37]=c,v[38]=G,v[39]=A,v[40]=F,v[41]=p):p=v[41],p}function n4(e){let t;let n=(0,s.c)(2),{documentId:i,documentType:l}=e;return n[0]!==i?(t=(0,h.vsM)(i),n[0]=i,n[1]=t):t=n[1],(0,h.iav)(t,l),null}n4.displayName="PreloadDocumentPane";let n5=(0,u.memo)(e=>{let t,n;let i=(0,s.c)(10),{actions:l,children:o,actionProps:r,onActionComplete:d,group:c}=e;return i[0]!==r.id||i[1]!==r.liveEditSchemaType||i[2]!==o?(t=e=>{let{states:t}=e;return(0,a.jsx)(n7,{states:t,documentId:r.liveEditSchemaType?(0,h.vsM)(r.id):(0,h.qyu)(r.id),children:o})},i[0]=r.id,i[1]=r.liveEditSchemaType,i[2]=o,i[3]=t):t=i[3],i[4]!==r||i[5]!==l||i[6]!==c||i[7]!==d||i[8]!==t?(n=(0,a.jsx)(h.duV,{onReset:d,hooks:l,args:r,group:c,children:t}),i[4]=r,i[5]=l,i[6]=c,i[7]=d,i[8]=t,i[9]=n):n=i[9],n});n5.displayName="Memo(RenderActionCollectionState)";let n6=["delete","duplicate","publish","unpublish","unlinkFromCanvas","editInCanvas","linkToCanvas","schedule"],n7=e=>{let t;let n=(0,s.c)(9),{states:i,children:l,documentId:r}=e,{t:a}=(0,h.$G7)(o.UA),{isLinked:d}=(0,h.Kp1)(r);e:{let e;if(d){let e;if(n[0]!==l||n[1]!==i||n[2]!==a){let t;n[4]!==a?(t=e=>e.action&&n6.includes(e.action)?e:{...e,disabled:!0,title:a("action.disabled-by-canvas.tooltip")},n[4]=a,n[5]=t):t=n[5],e=l({states:i.map(t)}),n[0]=l,n[1]=i,n[2]=a,n[3]=e}else e=n[3];t=e;break e}n[6]!==l||n[7]!==i?(e=l({states:i}),n[6]=l,n[7]=i,n[8]=e):e=n[8],t=e}return t},n8=(0,u.memo)(e=>{let t;let n=(0,s.c)(4),{badges:i,children:l,badgeProps:o}=e;return n[0]!==o||n[1]!==i||n[2]!==l?(t=(0,a.jsx)(h.duV,{hooks:i,args:o,children:l}),n[0]=o,n[1]=i,n[2]=l,n[3]=t):t=n[3],t});n8.displayName="Memo(RenderBadgeCollectionState)";let n9="diffView",ie="previousDocument",it="nextDocument";function ii(){let e,t,n;let i=(0,s.c)(9),{navigate:l,state:o}=(0,_.tv)();i[0]!==l||i[1]!==o?(e=e=>{let{mode:t,previousDocument:n,nextDocument:i}=e,r={...Y(o._searchParams),...t?{[n9]:t}:{},...n?{[ie]:[n.type,n.id].join(",")}:{},...i?{[it]:[i.type,i.id].join(",")}:{}};l({...o,_searchParams:Z(r)})},i[0]=l,i[1]=o,i[2]=e):e=i[2];let r=e;i[3]!==l||i[4]!==o?(t=()=>{var e;l({...o,_searchParams:(null!==(e=o._searchParams)&&void 0!==e?e:[]).filter(il)})},i[3]=l,i[4]=o,i[5]=t):t=i[5];let a=t;return i[6]!==a||i[7]!==r?(n={navigateDiffView:r,exitDiffView:a},i[6]=a,i[7]=r,i[8]=n):n=i[8],n}function il(e){let[t]=e;return![n9,ie,it].includes(t)}let io=["version"];function ir(){let{onParamsError:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:t}=(0,_.tv)(),n=new URLSearchParams(t._searchParams),i=n.get(ie),l=n.get(it),o=n.get(n9),r=[i,l,o].some(e=>null!==e),a=(0,u.useMemo)(()=>(function(e){let{previousDocument:t,nextDocument:n,mode:i}=e,l=[],[o,r]=t.split(",").filter(Boolean),[a,s]=n.split(",").filter(Boolean);return io.includes(i)||l.push(["invalidModeParam",i]),(typeof o>"u"||typeof r>"u")&&l.push(["invalidPreviousDocumentParam",t]),(typeof a>"u"||typeof s>"u")&&l.push(["invalidNextDocumentParam",n]),0!==l.length?{result:"error",errors:l}:{result:"success",params:{mode:i,documents:{previous:{type:o,id:r},next:{type:a,id:s}}}}})({previousDocument:null!=i?i:"",nextDocument:null!=l?l:"",mode:null!=o?o:""}),[o,l,i]);return(0,u.useEffect)(()=>{"error"===a.result&&r&&(null==e||e(a.errors))},[r,e,a]),"error"===a.result?{isActive:!1}:{state:"ready",isActive:!0,...a.params}}function ia(e){return null!==e}let is=x.zo.header(eY()),id=x.zo.div(eZ()),ic=e=>{let{documentId:t,state:n}=e,{t:i}=(0,h.$G7)(o.UA),{data:l}=(0,h.vUZ)({documentId:t}),{exitDiffView:r,navigateDiffView:s}=ii(),{documents:c}=ir(),p=(0,h.F6R)(),f=l.flatMap(e=>{var t;return null!==(t=(0,h.eBk)(e))&&void 0!==t?t:[]}),v=(0,u.useMemo)(()=>p.data.filter(e=>{let t=(0,h.QXs)(e._id);return"u">typeof t&&f.includes(t)}),[p.data,f]),x=(0,u.useCallback)(e=>{"u">typeof(null==c?void 0:c.previous)&&s({previousDocument:{...c.previous,id:e}})},[null==c?void 0:c.previous,s]),g=(0,u.useCallback)(e=>{"u">typeof(null==c?void 0:c.next)&&s({nextDocument:{...c.next,id:e}})},[null==c?void 0:c.next,s]);return(0,a.jsxs)(is,{children:[(0,a.jsxs)(id,{children:[(0,a.jsx)(d.xu,{padding:4,children:(0,a.jsx)(d.xv,{as:"h1",size:1,muted:!0,children:i("compare-versions.title")})}),"u">typeof(null==c?void 0:c.previous)&&(0,a.jsx)(iu,{releases:v,onSelectRelease:x,role:"previous",documentId:t,state:n,document:c.previous})]}),(0,a.jsx)(d.kC,{align:"center",paddingX:3,children:(0,a.jsx)(d.xv,{size:1,children:(0,a.jsx)(m.lAt,{})})}),(0,a.jsxs)(id,{children:["u">typeof(null==c?void 0:c.next)&&(0,a.jsx)(iu,{releases:v,onSelectRelease:g,role:"next",documentId:t,state:n,document:c.next}),(0,a.jsx)(d.xu,{padding:3,style:{justifySelf:"end"},children:(0,a.jsx)(d.zx,{icon:m.Two,mode:"bleed",onClick:r,padding:2})})]})]})},iu=e=>{let{releases:t=[],onSelectRelease:n,role:i,documentId:l,document:s}=e,{published:c,draft:p}=(0,h.iav)((0,h.vsM)(s.id),s.type),f=(0,u.useMemo)(()=>{var e;return e=s.id,(0,h.aEi)(e)?"published":(0,h.Cb2)(e)?"draft":t.find(t=>{let{_id:n}=t;return(0,h.QXs)(n)===(0,h.eBk)(e)})},[s.id,t]),{t:v}=(0,h.$G7)(o.UA),{t:x}=(0,h.$G7)(),{document:{drafts:{enabled:g}}}=(0,h.cFj)();return(0,a.jsx)(r.j2,{id:i,button:(0,a.jsx)(d.zx,{type:"button",mode:"bleed",padding:2,paddingRight:3,radius:"full",selected:!0,...function(e){let{selected:t,tCore:n,tStructure:i}=e;if(typeof t>"u")return{text:n("common.loading"),tone:"neutral",disabled:!0};if((0,h._wt)(t)){let e=t?(0,h.Ydd)(t):"neutral";return{text:(null==t?void 0:t.metadata.title)||n("release.placeholder-untitled-release"),icon:(0,a.jsx)(h.yXi,{padding:1,tone:e}),iconRight:t&&(0,h.$NU)(t)?(0,a.jsx)(m.mBM,{}):void 0,tone:e}}let l="published"===t?"positive":"caution";return{text:i(["compare-versions.status",t].join(".")),icon:(0,a.jsx)(h.yXi,{padding:1,tone:l}),tone:l}}({selected:f,tCore:x,tStructure:v})}),menu:(0,a.jsxs)(d.v2,{children:[c&&(0,a.jsx)(ip,{type:"published",onSelect:n,isSelected:"published"===f,documentId:l}),g&&p&&(0,a.jsx)(ip,{type:"draft",onSelect:n,isSelected:"draft"===f,documentId:l}),t.map(e=>(0,a.jsx)(ip,{release:e,onSelect:n,isSelected:"string"!=typeof f&&(null==f?void 0:f._id)===e._id,documentId:l},e._id))]})})},ip=e=>{let{type:t,release:n,onSelect:i,isSelected:l,documentId:r}=e,{t:s}=(0,h.$G7)(),{t:c}=(0,h.$G7)(o.UA),p=(0,u.useCallback)(()=>{if("draft"===t){i((0,h.qyu)(r));return}if("published"===t){i((0,h.vsM)(r));return}"u">typeof(null==n?void 0:n._id)&&i((0,h.XLS)(r,(0,h.QXs)(n._id)))},[t,i,r,null==n?void 0:n._id]);if(t)return(0,a.jsx)(d.sN,{padding:1,paddingRight:3,onClick:p,pressed:l,children:(0,a.jsxs)(d.kC,{gap:1,children:[(0,a.jsx)(h.yXi,{padding:2,tone:"published"===t?"positive":"caution"}),(0,a.jsx)(d.xu,{paddingY:2,children:(0,a.jsx)(d.xv,{size:1,weight:"medium",children:c(["compare-versions.status",t].join("."))})})]})});let f=n?(0,h.Ydd)(n):"neutral";return(0,a.jsx)(d.sN,{padding:1,paddingRight:3,onClick:p,pressed:l,children:(0,a.jsxs)(d.kC,{gap:1,children:[(0,a.jsx)(h.yXi,{padding:2,tone:f}),(0,a.jsxs)(d.Kq,{flex:1,paddingY:2,paddingRight:2,space:2,children:[(0,a.jsx)(d.xv,{size:1,weight:"medium",children:n.metadata.title||s("release.placeholder-untitled-release")}),["asap","undecided"].includes(n.metadata.releaseType)&&(0,a.jsx)(d.xv,{muted:!0,size:1,children:s("release.type.".concat(n.metadata.releaseType))}),"scheduled"===n.metadata.releaseType&&(0,a.jsx)(d.xv,{muted:!0,size:1,children:(0,h.Bwd)(n)})]}),(0,a.jsx)(d.kC,{flex:"none",children:(0,h.$NU)(n)&&(0,a.jsx)(d.xu,{padding:2,children:(0,a.jsx)(d.xv,{size:1,children:(0,a.jsx)(m.mBM,{})})})})]})})},im=x.zo.div(eJ());function ih(e){var t,n;return null===(n=e.document)||void 0===n?void 0:null===(t=n.components)||void 0===t?void 0:t.unstable_layout}function iv(e){return e.path}function ix(e,t){return ee(e.path,t.path)}let ig=x.zo.div(eQ()),ib=(0,x.zo)(d.Zb)(e0()),iy=(0,x.zo)(d.W2)(e1()),ij=(0,u.forwardRef)(function(e,t){let n,i,l,o,r,m,f,v,x,g,b,y;let j=(0,s.c)(36),{role:_,documentType:w,documentId:k,scrollElement:C,syncChannel:S,compareDocument:z}=e,E=(0,u.useRef)(null),[I,P]=(0,u.useState)(null),[A,T]=(0,u.useState)(null);j[0]!==z||j[1]!==k||j[2]!==w||j[3]!==_||j[4]!==C||j[5]!==S?(n=()=>(0,a.jsx)(i_,{compareDocument:z,documentId:k,documentType:w,role:_,scrollElement:C,syncChannel:S}),j[0]=z,j[1]=k,j[2]=w,j[3]=_,j[4]=C,j[5]=S,j[6]=n):n=j[6];let R=n;j[7]!==R?(i={pick:ih,defaultComponent:R},j[7]=R,j[8]=i):i=j[8];let M=(0,h.uwK)(i);j[9]===Symbol.for("react.memo_cache_sentinel")?(l={isInteractive:!1,onOpenReviewChanges:Q,onSetFocus:Q,isReviewChangesOpen:!1},j[9]=l):l=j[9];let D="".concat(_,"-document");j[10]!==D?(o={"--grid-area":D},j[10]=D,j[11]=o):o=j[11];let L=o,N="next"===_,O="next"!==_&&"none";j[12]!==O?(r={"--scrollbar-width":O},j[12]=O,j[13]=r):r=j[13];let U=r;return j[14]!==M||j[15]!==k||j[16]!==w?(m=(0,a.jsx)(c.Tu,{position:"absolute",children:(0,a.jsx)(iy,{ref:E,padding:4,width:1,children:(0,a.jsx)(M,{documentId:k,documentType:w})})}),j[14]=M,j[15]=k,j[16]=w,j[17]=m):m=j[17],j[18]!==I||j[19]!==m?(f=(0,a.jsx)(d.Xp,{element:I,children:m}),j[18]=I,j[19]=m,j[20]=f):f=j[20],j[21]!==t||j[22]!==U||j[23]!==f?(v=(0,a.jsx)(ig,{ref:t,style:U,children:f}),j[21]=t,j[22]=U,j[23]=f,j[24]=v):v=j[24],j[25]===Symbol.for("react.memo_cache_sentinel")?(x=(0,a.jsx)("div",{"data-testid":"diffView-document-panel-portal",ref:P}),j[25]=x):x=j[25],j[26]!==v||j[27]!==L||j[28]!==N?(g=(0,a.jsxs)(ib,{ref:T,style:L,borderLeft:N,children:[v,x]}),j[26]=v,j[27]=L,j[28]=N,j[29]=g):g=j[29],j[30]!==A||j[31]!==g?(b=(0,a.jsx)(d.NM,{element:A,children:g}),j[30]=A,j[31]=g,j[32]=b):b=j[32],j[33]!==C||j[34]!==b?(y=(0,a.jsx)(p.CV.Provider,{value:l,children:(0,a.jsx)(h.h3c,{children:(0,a.jsx)(h.Ahg,{scrollElement:C,containerElement:E,children:b})})}),j[33]=C,j[34]=b,j[35]=y):y=j[35],y}),i_=e=>{let t,n,i,l,o,r,d,c,m,f,v,x,g,b,y,j,_,w,k,C,S,z,E,I;let R=(0,s.c)(56),{role:M,documentType:D,documentId:L,syncChannel:N,compareDocument:O}=e;R[0]!==O?(t={compareDocument:O},R[0]=O,R[1]=t):t=R[1];let U=function(e){let t,n,i;let l=(0,s.c)(4),{compareDocument:o}=e;l[0]!==o.id?(t=(0,h.vsM)(o.id),l[0]=o.id,l[1]=t):t=l[1];let r=o.type;l[2]!==o.id?(n=(0,h.eBk)(o.id),l[2]=o.id,l[3]=n):n=l[3];let a=(0,h.iav)(t,r,"low",n);e:{var d,c,u;if((0,h.Y_j)(o.id)){i=null!==(d=a.version)&&void 0!==d?d:void 0;break e}if((0,h.Cb2)(o.id)){i=null!==(c=a.draft)&&void 0!==c?c:void 0;break e}if((0,h.aEi)(o.id)){i=null!==(u=a.published)&&void 0!==u?u:void 0;break e}i=void 0}return i}(t),[B]=(0,u.useState)(iw);R[2]!==L?(n=(0,h.vsM)(L),R[2]=L,R[3]=n):n=R[3],R[4]!==L?(i=(0,h.Y_j)(L)?(0,h.eBk)(L):(0,h.aEi)(L)?"published":void 0,R[4]=L,R[5]=i):i=R[5],R[6]!==L?(l=(0,h.eBk)(L),R[6]=L,R[7]=l):l=R[7],R[8]!==U||R[9]!==D||R[10]!==n||R[11]!==i||R[12]!==l?(o={documentId:n,documentType:D,selectedPerspectiveName:i,releaseId:l,comparisonValue:U},R[8]=U,R[9]=D,R[10]=n,R[11]=i,R[12]=l,R[13]=o):o=R[13];let $=(0,h.izb)(o);R[14]!==$?({formState:m,onChange:v,onFocus:x,onBlur:f,onSetActiveFieldGroup:b,onSetCollapsedFieldSet:y,onSetCollapsedPath:j,collapsedFieldSets:r,ready:_,collapsedPaths:d,schemaType:w,value:k,onProgrammaticFocus:g,...c}=$,R[14]=$,R[15]=r,R[16]=d,R[17]=c,R[18]=m,R[19]=f,R[20]=v,R[21]=x,R[22]=g,R[23]=b,R[24]=y,R[25]=j,R[26]=_,R[27]=w,R[28]=k):(r=R[15],d=R[16],c=R[17],m=R[18],f=R[19],v=R[20],x=R[21],g=R[22],b=R[23],y=R[24],j=R[25],_=R[26],w=R[27],k=R[28]);let V=null===m||!_;R[29]!==M||R[30]!==N?(C={id:M,syncChannel:N},R[29]=M,R[30]=N,R[31]=C):C=R[31];let G=function(e){let t,n,i,l;let o=(0,s.c)(11),{syncChannel:r,id:a}=e;o[0]!==a||o[1]!==r?(t=e=>r.next({...e,source:a}),o[0]=a,o[1]=r,o[2]=t):t=o[2];let d=t;if(o[3]!==a||o[4]!==r){let e;o[6]!==a?(e=e=>{let{source:t}=e;return t!==a},o[6]=a,o[7]=e):e=o[7],i=r.pipe((0,P.x)(ix),(0,A.h)(e),(0,T.U)(iv)),o[3]=a,o[4]=r,o[5]=i}else i=o[5];return n=i,o[8]!==n||o[9]!==d?(l={path:n,push:d},o[8]=n,o[9]=d,o[10]=l):l=o[10],l}(C);R[32]!==c||R[33]!==G||R[34]!==M?(S=e=>{c.onPathOpen(e),G.push({source:M,path:e})},R[32]=c,R[33]=G,R[34]=M,R[35]=S):S=R[35];let F=S;return R[36]!==g||R[37]!==G.path?(E=()=>{let e=G.path.subscribe(g);return()=>e.unsubscribe()},z=[g,G.path],R[36]=g,R[37]=G.path,R[38]=z,R[39]=E):(z=R[38],E=R[39]),(0,u.useEffect)(E,z),R[40]!==r||R[41]!==d||R[42]!==m||R[43]!==V||R[44]!==f||R[45]!==v||R[46]!==x||R[47]!==F||R[48]!==b||R[49]!==y||R[50]!==j||R[51]!==B||R[52]!==M||R[53]!==w||R[54]!==k?(I=V?(0,a.jsx)(h.Bwn,{showText:!0}):(0,a.jsx)(p.zW.Provider,{value:{enabled:!1,mode:null},children:(0,a.jsx)(h.quP,{__internal_patchChannel:B,id:"diffView-pane-".concat(M),onChange:v,onPathFocus:x,onPathOpen:F,onPathBlur:f,onFieldGroupSelect:b,onSetFieldSetCollapsed:y,onSetPathCollapsed:j,collapsedPaths:d,collapsedFieldSets:r,focusPath:m.focusPath,changed:m.changed,focused:m.focused,groups:m.groups,validation:m.validation,members:m.members,presence:m.presence,schemaType:w,value:k})}),R[40]=r,R[41]=d,R[42]=m,R[43]=V,R[44]=f,R[45]=v,R[46]=x,R[47]=F,R[48]=b,R[49]=y,R[50]=j,R[51]=B,R[52]=M,R[53]=w,R[54]=k,R[55]=I):I=R[55],I};function iw(){return(0,h.fm0)()}let ik=x.zo.a(e2()),iC=e=>{let t,n;let i=(0,s.c)(6),{children:l,documentId:o,documentType:r}=e;i[0]!==o||i[1]!==r?(t={intent:"edit",params:{id:o,type:r}},i[0]=o,i[1]=r,i[2]=t):t=i[2];let{href:d}=(0,_.PM)(t);return i[3]!==l||i[4]!==d?(n=(0,a.jsx)(ik,{href:d,target:"_blank",rel:"noopener noreferrer",children:l}),i[3]=l,i[4]=d,i[5]=n):n=i[5],n},iS=e=>{let t,n,i,l,o,d,c,m;let h=(0,s.c)(24),{documentId:f}=e,{documents:v,state:x,mode:g}=ir(),{exitDiffView:b}=ii(),y=function(){let e;let t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=new I.x,t[0]=e):e=t[0],e}(),[j,_]=(0,u.useState)(null),[w,k]=(0,u.useState)(null),C=(0,u.useContext)(p.kp);return h[0]!==C?(n={...C,disableNew:!0,EditReferenceLinkComponent:iC},h[0]=C,h[1]=n):n=h[1],t=n,h[2]!==w||h[3]!==j?(i=[j,w],h[2]=w,h[3]=j,h[4]=i):i=h[4],function(e){let t,n;let i=(0,s.c)(3);i[0]!==e?(t=()=>{let t=e.filter(ia);if(0===t.length)return;let n=new J.ZP(t);return()=>n.destroy()},n=[e],i[0]=e,i[1]=t,i[2]=n):(t=i[1],n=i[2]),(0,u.useEffect)(t,n)}(i),h[5]!==f||h[6]!==g||h[7]!==x?(l="version"===g&&(0,a.jsx)(ic,{documentId:f,state:x}),h[5]=f,h[6]=g,h[7]=x,h[8]=l):l=h[8],h[9]!==v||h[10]!==w||h[11]!==j||h[12]!==x||h[13]!==y?(o="ready"===x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ij,{documentType:v.previous.type,documentId:v.previous.id,role:"previous",ref:_,scrollElement:j,syncChannel:y,compareDocument:v.previous}),(0,a.jsx)(ij,{documentType:v.next.type,documentId:v.next.id,role:"next",ref:k,scrollElement:w,syncChannel:y,compareDocument:v.previous})]}),h[9]=v,h[10]=w,h[11]=j,h[12]=x,h[13]=y,h[14]=o):o=h[14],h[15]!==l||h[16]!==o?(d=(0,a.jsxs)(im,{children:[l,o]}),h[15]=l,h[16]=o,h[17]=d):d=h[17],h[18]!==b||h[19]!==d?(c=(0,a.jsx)(r.Vq,{id:"diffView",width:"auto",onClose:b,padding:!1,__unstable_hideCloseButton:!0,children:d}),h[18]=b,h[19]=d,h[20]=c):c=h[20],h[21]!==t||h[22]!==c?(m=(0,a.jsx)(p.kp.Provider,{value:t,children:c}),h[21]=t,h[22]=c,h[23]=m):m=h[23],m},iz=e=>{let t,n,i;let l=(0,s.c)(9),{children:r,documentId:d}=e,u=(0,c.pm)(),{t:p}=(0,h.$G7)(o.UA);l[0]!==p||l[1]!==u?(t={onParamsError:e=>{u.push({id:"diffViewParamsParsingError",status:"error",title:p("compare-version.error.invalidParams.title"),description:(0,a.jsx)("ul",{children:e.map(e=>{let[t,n]=e;return(0,a.jsx)("li",{children:p("compare-version.error.".concat(t),{input:n})},t)})})})}},l[0]=p,l[1]=u,l[2]=t):t=l[2];let{isActive:m}=ir(t);return l[3]!==d||l[4]!==m?(n=m&&(0,a.jsx)(iS,{documentId:d}),l[3]=d,l[4]=m,l[5]=n):n=l[5],l[6]!==r||l[7]!==n?(i=(0,a.jsxs)(a.Fragment,{children:[r,n]}),l[6]=r,l[7]=n,l[8]=i):i=l[8],i};function iE(e){let t,n,i;let l=(0,s.c)(12),{children:o,currentMinWidth:r,flex:c,minWidth:u,paneKey:p,title:m,tone:h}=e,f=void 0===m?"Error":m,v=void 0===h?"critical":h;return l[0]!==f?(t=(0,a.jsx)(nA,{title:f}),l[0]=f,l[1]=t):t=l[1],l[2]!==o?(n=(0,a.jsx)(nm,{overflow:"auto",children:(0,a.jsx)(d.xu,{paddingX:4,paddingY:5,children:o})}),l[2]=o,l[3]=n):n=l[3],l[4]!==r||l[5]!==c||l[6]!==u||l[7]!==p||l[8]!==t||l[9]!==n||l[10]!==v?(i=(0,a.jsxs)(nc,{currentMinWidth:r,flex:c,id:p,minWidth:u,tone:v,children:[t,n]}),l[4]=r,l[5]=c,l[6]=u,l[7]=p,l[8]=t,l[9]=n,l[10]=v,l[11]=i):i=l[11],i}function iI(e){let t=[{ms:300,messageKey:"panes.resolving.default-message"},{ms:5e3,messageKey:"panes.resolving.slow-resolve-message"}];if(h.r8Q){let n=["Check console for errors?","Is your observable/promise resolving?",e.length>0?"Structure path: ".concat(e.join(" ➝ ")):""];t.push({ms:1e4,message:n.join("\n")})}let n=(0,E.of)(null);return(0,R.T)(...t.map(e=>n.pipe((0,ei.h)("messageKey"in e?{messageKey:e.messageKey}:{message:e.message}),(0,el.g)(e.ms))))}let iP=(0,x.zo)(d.kC)(e3()),iA=(0,u.memo)(e=>{let t,n,i,l,r,d,p,m,f,v;let x=(0,s.c)(28),{delay:g,flex:b,message:y,minWidth:j,paneKey:_,path:w,selected:k,title:C,tone:S}=e,z=void 0===g?300:g,E=void 0===y?iI:y,{t:I}=(0,h.$G7)(o.UA);e:{if("function"==typeof E){let e;x[0]!==E||x[1]!==w?(e=E(w?w.split(";"):[]),x[0]=E,x[1]=w,x[2]=e):e=x[2],t=e;break e}t=E}let P=t;x[3]!==P||x[4]!==I?(n=()=>"string"==typeof P?P:I("panes.resolving.default-message"),x[3]=P,x[4]=I,x[5]=n):n=x[5];let[A,T]=(0,u.useState)(n);x[6]!==P||x[7]!==I?(i=()=>{if("object"!=typeof P||"function"!=typeof P.subscribe)return;let e=P.subscribe(e=>{T("messageKey"in e?I(e.messageKey):e.message)});return()=>e.unsubscribe()},l=[P,I],x[6]=P,x[7]=I,x[8]=i,x[9]=l):(i=x[8],l=x[9]),(0,u.useEffect)(i,l);let[R,M]=(0,u.useState)(null),[D,L]=(0,u.useState)(!1);x[10]!==R?(r=()=>{if(R)return(0,c.RE)(()=>L(!0))},d=[R],x[10]=R,x[11]=r,x[12]=d):(r=x[11],d=x[12]),(0,u.useEffect)(r,d);let N=D?"":void 0,O=C||A;x[13]!==O?(p=(0,a.jsx)(h.Bwn,{showText:!0,title:O}),x[13]=O,x[14]=p):p=x[14],x[15]!==p||x[16]!==N?(m=(0,a.jsx)(iP,{align:"center","data-mounted":N,direction:"column",height:"fill",justify:"center",ref:M,children:p}),x[15]=p,x[16]=N,x[17]=m):m=x[17];let U=m;return x[18]!==U||x[19]!==z?(f=(0,a.jsx)(nm,{children:U}),x[18]=U,x[19]=z,x[20]=f):f=x[20],x[21]!==b||x[22]!==j||x[23]!==_||x[24]!==k||x[25]!==f||x[26]!==S?(v=(0,a.jsx)(nc,{flex:b,id:_,minWidth:j,selected:k,tone:S,children:f}),x[21]=b,x[22]=j,x[23]=_,x[24]=k,x[25]=f,x[26]=S,x[27]=v):v=x[27],v});function iT(){let e=(0,u.useContext)(p.cO);if(!e)throw Error("DocumentPane: missing context value");return e}function iR(e){let t,n;let i=(0,s.c)(8),{children:l,documentId:o,documentType:r}=e;return i[0]!==l||i[1]!==o||i[2]!==r?(t=(0,a.jsx)(iM,{documentId:o,documentType:r,children:l}),i[0]=l,i[1]=o,i[2]=r,i[3]=t):t=i[3],i[4]!==o||i[5]!==r||i[6]!==t?(n=(0,a.jsx)(h.EM1,{documentId:o,documentType:r,children:t}),i[4]=o,i[5]=r,i[6]=t,i[7]=n):n=i[7],n}function iM(e){let t,n,i,l,o,r;let d=(0,s.c)(25),{children:c,documentId:p,documentType:m}=e,{enabled:f}=(0,h.g7N)(),{connectionState:v,onPathOpen:x,inspector:g,openInspector:b}=iT(),{selectedReleaseId:y}=(0,h.Wc0)(),{params:j,setParams:_,createPathWithParams:w}=t0(),{studioUrl:k}=(0,h.cx5)(window.location.origin),C=null==j?void 0:j.comment,S=(0,u.useRef)(j);d[0]!==j?(t=()=>{S.current=j},n=[j],d[0]=j,d[1]=t,d[2]=n):(t=d[1],n=d[2]),(0,u.useLayoutEffect)(t,n),d[3]!==w||d[4]!==k?(i=e=>{let t=w({...S.current,comment:e,inspect:h.q$K});return"".concat(k).concat(t)},d[3]=w,d[4]=k,d[5]=i):i=d[5];let z=i;d[6]!==_?(l=()=>{_({...S.current,comment:void 0})},d[6]=_,d[7]=l):l=d[7];let E=l;d[8]!==(null==g?void 0:g.name)||d[9]!==b?(o=()=>{(null==g?void 0:g.name)!==h.q$K&&b(h.q$K)},d[8]=null==g?void 0:g.name,d[9]=b,d[10]=o):o=d[10];let I=o;if(!f){let e;return d[11]!==c?(e=(0,a.jsx)(a.Fragment,{children:c}),d[11]=c,d[12]=e):e=d[12],e}let P=(null==g?void 0:g.name)===h.q$K,A="connecting"===v;return d[13]!==c||d[14]!==p||d[15]!==m||d[16]!==z||d[17]!==E||d[18]!==I||d[19]!==x||d[20]!==C||d[21]!==y||d[22]!==P||d[23]!==A?(r=(0,a.jsx)(h.Cr6,{documentId:p,documentType:m,getCommentLink:z,isCommentsOpen:P,isConnecting:A,onClearSelectedComment:E,onCommentsOpen:I,onPathOpen:x,selectedCommentId:C,sortOrder:"desc",type:"field",releaseId:y,children:c}),d[13]=c,d[14]=p,d[15]=m,d[16]=z,d[17]=E,d[18]=I,d[19]=x,d[20]=C,d[21]=y,d[22]=P,d[23]=A,d[24]=r):r=d[24],r}function iD(e){let{displayed:t,documentId:n}=e,{selectedReleaseId:i}=(0,h.Wc0)(),{data:l}=(0,h.F6R)(),{data:o}=(0,h.vlT)(),{data:r}=(0,h.vUZ)({documentId:n}),a=t&&!t._createdAt,{params:s}=t0();return(0,u.useMemo)(()=>{if(!r)return{notCurrentReleases:[],currentReleases:[],inCreation:null};let e=r.map(e=>(0,h.eBk)(e)),n=l.reduce((n,l)=>{let o=e.includes((0,h.QXs)(l._id)),r=(0,h.QXs)(l._id);return a&&r===(0,h.eBk)(t._id||"")&&r===i?n.inCreation=l:o?n.currentReleases.push(l):n.notCurrentReleases.push(l),n},{notCurrentReleases:[],currentReleases:[],inCreation:null});if(!(null==s?void 0:s.historyVersion))return n;let d=o.find(e=>(0,h.QXs)(e._id)===(null==s?void 0:s.historyVersion));return(null==d?void 0:d.state)==="archived"&&n.currentReleases.push(d),n},[o,a,null==t?void 0:t._id,r,null==s?void 0:s.historyVersion,l,i])}function iL(e){var t,n;let{displayed:i,documentId:l,editState:o}=e,{document:{drafts:{enabled:r}}}=(0,h.cFj)(),a=iD({displayed:i,documentId:l}),s=[null==o?void 0:null===(t=o.published)||void 0===t?void 0:t._id,r?null==o?void 0:null===(n=o.draft)||void 0===n?void 0:n._id:[]].flat(),d=a.currentReleases.map(e=>(null==o?void 0:o.id)&&(0,h.XLS)(o.id,(0,h.QXs)(e._id))),c=s.concat(d).filter(e=>"string"==typeof e),p=(0,u.useMemo)(()=>c.findIndex(e=>e===(null==i?void 0:i._id)),[null==i?void 0:i._id,c]),m=(0,u.useMemo)(()=>{var e;return null!==(e=c[p-1])&&void 0!==e?e:void 0},[p,c]),f=(0,u.useMemo)(()=>{var e;return null!==(e=c[p+1])&&void 0!==e?e:void 0},[p,c]);return{position:p,previousId:m,nextId:f,stack:c}}function iN(){let e=(0,u.useContext)(p.r1);if(!e)throw Error("StructureTool: missing context value");return e}iA.displayName="Memo(LoadingPane)";let iO={},iU="inspect:",iB=[{id:"inspectors"},{id:"links"}],i$="sanity/structure/history";function iV(e){let{documentId:t,documentType:n,inspectors:i,onMenuItems:l}=e,o=i.length,[r,d]=(0,u.useState)(()=>Array.from(Array(o)));(0,u.useEffect)(()=>{if(r.length!==o){let e=Array.from(Array(o));for(let t=0;t<o;t++)e[t]=r[t];d(e)}},[o,r]);let c=(0,u.useCallback)((e,t)=>{d(n=>{let i=[...n];return i[e]=t,i})},[]);(0,u.useEffect)(()=>{l(r.filter(Boolean))},[r,l]);let p=(0,u.useMemo)(()=>i.map((e,i)=>e.useMenuItem?[function(e){let{documentId:t,documentType:n,index:i,setMenuItem:l,useMenuItem:o}=e;return(0,u.memo)(function(){let e,r,a;let d=(0,s.c)(4);d[0]===Symbol.for("react.memo_cache_sentinel")?(e={documentId:t,documentType:n},d[0]=e):e=d[0];let c=o(e),p=(0,h.BoV)(c);return d[1]!==p?(r=()=>{l(i,p)},a=[p],d[1]=p,d[2]=r,d[3]=a):(r=d[2],a=d[3]),(0,u.useEffect)(r,a),null})}({documentId:t,documentType:n,index:i,setMenuItem:c,useMenuItem:e.useMenuItem}),e.name]:[()=>null,""]),[t,n,i,c]);return(0,a.jsx)(a.Fragment,{children:p.map(e=>{let[t,n]=e;return n&&(0,a.jsx)(t,{},n)})})}function iG(){let e,t;let n=(0,s.c)(19),{connectionState:i,schemaType:l,title:r,displayed:a}=iT(),{t:d}=(0,h.$G7)(o.UA),c=!!a;n[0]!==a||n[1]!==l||n[2]!==c?(e={enabled:c,schemaType:l,value:a},n[0]=a,n[1]=l,n[2]=c,n[3]=e):e=n[3];let{error:u,value:p}=(0,h._2T)(e);if("connecting"===i&&!c){let e;return n[4]===Symbol.for("react.memo_cache_sentinel")?(e={error:void 0,title:void 0},n[4]=e):e=n[4],e}if(r){let e;return n[5]!==r?(e={error:void 0,title:r},n[5]=r,n[6]=e):e=n[6],e}if(!a){let e,t;let i=(null==l?void 0:l.title)||(null==l?void 0:l.name);return n[7]!==d||n[8]!==i?(e=d("panes.document-header-title.new.text",{schemaType:i}),n[7]=d,n[8]=i,n[9]=e):e=n[9],n[10]!==e?(t={error:void 0,title:e},n[10]=e,n[11]=t):t=n[11],t}if(u){let e,t;return n[12]!==u.message||n[13]!==d?(e=d("panes.document-list-pane.error.text",{error:u.message}),n[12]=u.message,n[13]=d,n[14]=e):e=n[14],n[15]!==e?(t={error:e,title:void 0},n[15]=e,n[16]=t):t=n[16],t}let m=null==p?void 0:p.title;return n[17]!==m?(t={error:void 0,title:m},n[17]=m,n[18]=t):t=n[18],t}iV.displayName="DocumentInspectorMenuItemsResolver";let iF=["patch","commit"],iK=(0,u.memo)(function(){let e,t,n,i,l;let r=(0,s.c)(12),{push:d}=(0,c.pm)(),{documentId:p,documentType:m,value:f}=iT(),v=iG(),x=v.error,g=(0,h.E6V)(p,m),b=(0,u.useRef)(g),y=t0(),{t:j}=(0,h.$G7)(o.UA);e:{if(!v.title&&!x&&!iF.includes(null==g?void 0:g.op)&&"string"==typeof f.title&&(null==g?void 0:g.type)==="success"){e=f.title;break e}e=v.title}let _=e;r[0]!==j||r[1]!==_?(t=_||j("panes.document-operation-results.operation-undefined-title"),r[0]=j,r[1]=_,r[2]=t):t=r[2];let w=t;r[3]!==w?(n=w.length>25?"".concat(w.slice(0,25),"..."):w,r[3]=w,r[4]=n):n=r[4];let k=n;return r[5]!==k||r[6]!==g||r[7]!==y||r[8]!==d||r[9]!==j?(i=()=>{let e;if(g&&g!==b.current)return"error"===g.type&&d({closable:!0,duration:3e4,status:"error",title:j("panes.document-operation-results.operation-error",{context:g.op}),description:(0,a.jsxs)("details",{children:[(0,a.jsx)("summary",{children:j("panes.document-operation-results.error.summary.title")}),g.error.message]})}),"success"!==g.type||iF.includes(g.op)||d({closable:!0,status:"success",title:(0,a.jsx)(h.vNl,{context:g.op,i18nKey:"panes.document-operation-results.operation-success",t:j,values:{op:g.op,title:k},components:{Strong:"strong"}})}),"success"===g.type&&"delete"===g.op&&(e=setTimeout(()=>y.closeCurrentAndAfter(),0)),b.current=g,()=>clearTimeout(e)},l=[g,y,d,j,k],r[5]=k,r[6]=g,r[7]=y,r[8]=d,r[9]=j,r[10]=i,r[11]=l):(i=r[10],l=r[11]),(0,u.useEffect)(i,l),null}),iW=e=>!0===e.liveEdit,iX=(0,x.zo)(d.Zb)({position:"relative",zIndex:1,lineHeight:0});function iH(e){let t,n,i,l,c,u,p,f,v,x,g,b;let y=(0,s.c)(25);y[0]!==e?({as:i,children:t,closeButtonLabel:n,onClose:l,title:u,...c}=e,y[0]=e,y[1]=t,y[2]=n,y[3]=i,y[4]=l,y[5]=c,y[6]=u):(t=y[1],n=y[2],i=y[3],l=y[4],c=y[5],u=y[6]);let{t:j}=(0,h.$G7)(o.UA);return y[7]!==u?(p=(0,a.jsx)(d.xu,{flex:1,padding:3,children:(0,a.jsx)(d.xv,{as:"h1",size:1,weight:"medium",children:u})}),y[7]=u,y[8]=p):p=y[8],y[9]!==j?(f=j("document-inspector.close-button.tooltip"),y[9]=j,y[10]=f):f=y[10],y[11]!==f?(v={content:f},y[11]=f,y[12]=v):v=y[12],y[13]!==n||y[14]!==l||y[15]!==v?(x=(0,a.jsx)(d.xu,{flex:"none",padding:1,children:(0,a.jsx)(r.zx,{"aria-label":n,icon:m.Two,mode:"bleed",onClick:l,tooltipProps:v})}),y[13]=n,y[14]=l,y[15]=v,y[16]=x):x=y[16],y[17]!==p||y[18]!==x?(g=(0,a.jsxs)(d.kC,{padding:2,children:[p,x]}),y[17]=p,y[18]=x,y[19]=g):g=y[19],y[20]!==t||y[21]!==i||y[22]!==c||y[23]!==g?(b=(0,a.jsxs)(iX,{...c,as:i,children:[g,t]}),y[20]=t,y[21]=i,y[22]=c,y[23]=g,y[24]=b):b=y[24],b}function iq(e){let t,n,i;let l=(0,s.c)(14),{documentId:o,documentType:r,flex:c}=e,{collapsed:u}=np(),{closeInspector:p,inspector:m}=iT(),{features:f}=iN();l[0]!==p||l[1]!==m?(t=()=>{m&&p(m.name)},l[0]=p,l[1]=m,l[2]=t):t=l[2];let v=t;if(u||!m)return null;let x=m.component;l[3]!==x||l[4]!==o||l[5]!==r||l[6]!==v?(n=(0,a.jsx)(x,{onClose:v,documentId:o,documentType:r}),l[3]=x,l[4]=o,l[5]=r,l[6]=v,l[7]=n):n=l[7];let g=n;if(f.resizablePanes){let e;return l[8]!==g||l[9]!==c?(e=(0,a.jsx)(h.ezf,{as:"aside","data-ui":"DocumentInspectorPanel",flex:c,resizerPosition:"left",maxWidth:540,minWidth:320,children:g}),l[8]=g,l[9]=c,l[10]=e):e=l[10],e}return l[11]!==g||l[12]!==c?(i=(0,a.jsx)(d.xu,{as:"aside","data-ui":"DocumentInspectorPanel",flex:c,children:g}),l[11]=g,l[12]=c,l[13]=i):i=l[13],i}function iY(e,t,n){let i,l,o,r,a;let d=(0,s.c)(16),c=(0,h.tJW)();d[0]!==t||d[1]!==e?(i=["studio.structure-tool",e,t].filter(Boolean),d[0]=t,d[1]=e,d[2]=i):i=d[2];let u=i.join(".");if(d[3]!==n||d[4]!==c||d[5]!==u){let e;d[7]!==n?(e=e=>null===e?n:e,d[7]=n,d[8]=e):e=d[8],o=c.getKey(u).pipe((0,T.U)(e)),d[3]=n,d[4]=c,d[5]=u,d[6]=o}else o=d[6];l=o;let p=(0,j.m)(l,n);d[9]!==c||d[10]!==u||d[11]!==p?(r=e=>{e!==p&&c.setKey(u,e)},d[9]=c,d[10]=u,d[11]=p,d[12]=r):r=d[12];let m=r;return d[13]!==m||d[14]!==p?(a=[p,m],d[13]=m,d[14]=p,d[15]=a):a=d[15],a}let iZ={id:"parsed",title:"document-inspector.view-mode.parsed"},iJ={id:"raw",title:"document-inspector.view-mode.raw-json"},iQ=[iZ,iJ],i0=new ep({maxSize:1e3});function i1(e){let{path:t}=e,n=i0.get(t);void 0!==n&&i0.set(t,!n)}function i2(e){let t=window.getSelection();if(t){let n=document.createRange();t.removeAllRanges(),n.selectNodeContents(e),t.addRange(n)}}function i3(e){i2(e.currentTarget)}function i4(e){65===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),i2(e.currentTarget))}let i5=x.zo.div(e=>{let{theme:t}=e,{color:n,fonts:i,space:l}=t.sanity;return(0,x.iv)(e4(),i.code.family,i.code.sizes[1].fontSize,i.code.sizes[1].lineHeight,(0,d.hO)(l[4]),(0,d.hO)(l[3]),(0,d.hO)(l[4]),i.code.sizes[1].fontSize,i.code.sizes[1].lineHeight,i.code.sizes[1].fontSize,i.code.sizes[1].lineHeight,(0,d.hO)(l[4]/2),n.syntax.property,n.syntax.constant,(0,d.hO)(l[3]),n.syntax.string,n.syntax.boolean,n.syntax.number)});function i6(e){let t,n,i;let l=(0,s.c)(8),{onChange:r,query:c}=e;l[0]!==r?(t=e=>r(e.target.value),l[0]=r,l[1]=t):t=l[1];let u=t,{t:p}=(0,h.$G7)(o.UA);l[2]!==p?(n=p("document-inspector.search.placeholder"),l[2]=p,l[3]=n):n=l[3];let f=c||"";return l[4]!==u||l[5]!==n||l[6]!==f?(i=(0,a.jsx)(d.oi,{icon:m.W1M,onChange:u,placeholder:n,radius:2,value:f}),l[4]=u,l[5]=n,l[6]=f,l[7]=i):i=l[7],i}function i7(e){let t,n,i,l,u,p,m,f,v,x,g,b,y,j,_,w;let k=(0,s.c)(49),{value:C}=e,{onInspectClose:S,paneKey:z}=iT(),E="".concat(z,"_inspect_"),[I,P]=iY("inspect-view-mode",null,"parsed");k[0]!==I?(t=iQ.find(e=>e.id===I),k[0]=I,k[1]=t):t=k[1];let A=t;k[2]!==P?(n=()=>{P(iZ.id)},k[2]=P,k[3]=n):n=k[3];let T=n;k[4]!==P?(i=()=>{P(iJ.id)},k[4]=P,k[5]=i):i=k[5];let R=i,{t:M}=(0,h.$G7)(o.UA),D="".concat(E,"dialog");k[6]!==M||k[7]!==C?(l=(0,h.Uy$)(C)&&(0,h.HD0)(C._id)&&(0,h.HD0)(C._type)?(0,a.jsx)(h.vNl,{t:M,i18nKey:"document-inspector.dialog.title",components:{DocumentTitle:()=>(0,a.jsx)("em",{children:(0,a.jsx)(t$,{document:C})})}}):(0,a.jsx)("em",{children:M("document-inspector.dialog.title-no-value")}),k[6]=M,k[7]=C,k[8]=l):l=k[8],k[9]===Symbol.for("react.memo_cache_sentinel")?(u={position:"sticky",bottom:0,zIndex:3},k[9]=u):u=k[9];let L="".concat(E,"tabpanel"),N="".concat(E,"tab-").concat(iZ.id);k[10]!==M?(p=M(iZ.title),k[10]=M,k[11]=p):p=k[11];let O=A===iZ;k[12]!==T||k[13]!==L||k[14]!==N||k[15]!==p||k[16]!==O?(m=(0,a.jsx)(r.OK,{"aria-controls":L,id:N,label:p,onClick:T,selected:O}),k[12]=T,k[13]=L,k[14]=N,k[15]=p,k[16]=O,k[17]=m):m=k[17];let U="".concat(E,"tabpanel"),B="".concat(E,"tab-").concat(iJ.id);k[18]!==M?(f=M(iJ.title),k[18]=M,k[19]=f):f=k[19];let $=A===iJ;k[20]!==R||k[21]!==U||k[22]!==B||k[23]!==f||k[24]!==$?(v=(0,a.jsx)(r.OK,{"aria-controls":U,id:B,label:f,onClick:R,selected:$}),k[20]=R,k[21]=U,k[22]=B,k[23]=f,k[24]=$,k[25]=v):v=k[25],k[26]!==m||k[27]!==v?(x=(0,a.jsx)(d.Zb,{padding:3,paddingTop:0,shadow:1,style:u,children:(0,a.jsxs)(d.td,{space:1,children:[m,v]})}),k[26]=m,k[27]=v,k[28]=x):x=k[28];let V="".concat(E,"tab-").concat(I),G="".concat(E,"tabpanel");return k[29]===Symbol.for("react.memo_cache_sentinel")?(g={outline:"none"},k[29]=g):g=k[29],k[30]!==C||k[31]!==A?(b=A===iZ&&(0,a.jsx)(i5,{children:(0,a.jsx)(eu.P,{data:C,isExpanded:function e(t,n){let i=i0.get(t);return void 0===i?(i0.set(t,Array.isArray(n)||(0,h.Uy$)(n)),e(t,n)):i},onClick:i1,search:i6,filterOptions:{ignoreCase:!0}})}),k[30]=C,k[31]=A,k[32]=b):b=k[32],k[33]!==C||k[34]!==A?(y=A===iJ&&(0,a.jsx)(d.EK,{language:"json",tabIndex:0,onKeyDown:i4,onDoubleClick:i3,onFocus:i3,size:1,children:JSON.stringify(C,null,2)}),k[33]=C,k[34]=A,k[35]=y):y=k[35],k[36]!==V||k[37]!==G||k[38]!==b||k[39]!==y?(j=(0,a.jsxs)(c.x4,{"aria-labelledby":V,flex:1,id:G,overflow:"auto",padding:4,style:g,children:[b,y]}),k[36]=V,k[37]=G,k[38]=b,k[39]=y,k[40]=j):j=k[40],k[41]!==x||k[42]!==j?(_=(0,a.jsxs)(d.kC,{direction:"column",height:"fill",children:[x,j]}),k[41]=x,k[42]=j,k[43]=_):_=k[43],k[44]!==S||k[45]!==_||k[46]!==D||k[47]!==l?(w=(0,a.jsx)(r.Vq,{bodyHeight:"fill",id:D,header:l,onClose:S,onClickOutside:S,padding:!1,width:2,children:_}),k[44]=S,k[45]=_,k[46]=D,k[47]=l,k[48]=w):w=k[48],w}function i8(e){let t,n,i,l,o,c,u,p,m,h,f;let v=(0,s.c)(22);v[0]!==e?({action:n,content:i,icon:t,tone:o,paddingY:c,...l}=e,v[0]=e,v[1]=t,v[2]=n,v[3]=i,v[4]=l,v[5]=o,v[6]=c):(t=v[1],n=v[2],i=v[3],l=v[4],o=v[5],c=v[6]);let x=void 0===o?"transparent":o,g=void 0===c?2:c;return v[7]!==t?(u=t&&(0,a.jsx)(d.xv,{size:0,children:(0,a.jsx)(t,{})}),v[7]=t,v[8]=u):u=v[8],v[9]!==i?(p=(0,a.jsx)(d.kC,{align:"center",flex:1,gap:2,paddingY:2,children:i}),v[9]=i,v[10]=p):p=v[10],v[11]!==n?(m=n&&(0,a.jsx)(r.zx,{...n,mode:n.mode||"ghost",tone:n.tone||"default"}),v[11]=n,v[12]=m):m=v[12],v[13]!==u||v[14]!==p||v[15]!==m?(h=(0,a.jsxs)(d.kC,{align:"center",gap:3,paddingX:2,children:[u,p,m]}),v[13]=u,v[14]=p,v[15]=m,v[16]=h):h=v[16],v[17]!==g||v[18]!==l||v[19]!==h||v[20]!==x?(f=(0,a.jsx)(d.xu,{padding:1,children:(0,a.jsx)(d.Zb,{radius:3,paddingX:2,paddingY:g,tone:x,...l,children:h})}),v[17]=g,v[18]=l,v[19]=h,v[20]=x,v[21]=f):f=v[21],f}function i9(){let e=(0,s.c)(3),{isDeleted:t,isDeleting:n,ready:i}=iT(),{selectedPerspective:l}=(0,h.Wc0)();if(!i)return null;if(!(0,h.Vb0)(l)&&!(0,h.iTL)(l)&&"archived"===l.state){let t;return e[0]!==l?(t=(0,a.jsx)(lt,{release:l}),e[0]=l,e[1]=t):t=e[1],t}if(t&&!n){let t;return e[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(le,{}),e[2]=t):t=e[2],t}}function le(){let e,t,n,i,l,r;let c=(0,s.c)(17),{documentId:u,documentType:p}=iT(),{restore:f}=(0,h.d9t)(u,p),{navigateIntent:v}=(0,_.tv)();c[0]!==u||c[1]!==p||c[2]!==v||c[3]!==f?(e=()=>{f.execute("lastRevision"),v("edit",{id:u,type:p})},c[0]=u,c[1]=p,c[2]=v,c[3]=f,c[4]=e):e=c[4];let x=e,{t:g}=(0,h.$G7)(o.UA);return c[5]!==g?(t=g("banners.deleted-document-banner.restore-button.text"),c[5]=g,c[6]=t):t=c[6],c[7]!==x||c[8]!==t?(n={onClick:x,text:t},c[7]=x,c[8]=t,c[9]=n):n=c[9],c[10]!==g?(i=g("banners.deleted-document-banner.text"),c[10]=g,c[11]=i):i=c[11],c[12]!==i?(l=(0,a.jsx)(d.xv,{size:1,weight:"medium",children:i}),c[12]=i,c[13]=l):l=c[13],c[14]!==n||c[15]!==l?(r=(0,a.jsx)(i8,{action:n,content:l,"data-testid":"deleted-document-banner",icon:m.CPA}),c[14]=n,c[15]=l,c[16]=r):r=c[16],r}let lt=e=>{var t,n,i;let l,o,r;let c=(0,s.c)(8),{release:u}=e,{t:p}=(0,h.$G7)();return c[0]!==(null===(t=u.metadata)||void 0===t?void 0:t.title)||c[1]!==p?(l=(null===(n=u.metadata)||void 0===n?void 0:n.title)||p("release.placeholder-untitled-release"),c[0]=null===(i=u.metadata)||void 0===i?void 0:i.title,c[1]=p,c[2]=l):l=c[2],c[3]!==l?(o={title:l},c[3]=l,c[4]=o):o=c[4],c[5]!==p||c[6]!==o?(r=(0,a.jsx)(i8,{tone:"caution",content:(0,a.jsx)(d.xv,{size:1,weight:"medium",children:(0,a.jsx)(h.vNl,{t:p,i18nKey:"banners.deleted-release-banner.text",values:o})}),"data-testid":"deleted-release-banner",icon:m.yWI}),c[5]=p,c[6]=o,c[7]=r):r=c[7],r};function ln(){let e,t;let n=(0,s.c)(5),{schemaType:i}=iT(),{t:l}=(0,h.$G7)(o.UA);return(0,f.Ax)(i)?(n[0]!==l?(e=(0,a.jsx)(h.vNl,{t:l,i18nKey:"banners.deprecated-document-type-banner.text"}),n[0]=l,n[1]=e):e=n[1],n[2]!==i.deprecated.reason||n[3]!==e?(t=(0,a.jsx)(i8,{content:(0,a.jsxs)(d.xv,{size:1,weight:"medium",children:[e," ",i.deprecated.reason]}),"data-testid":"deprecated-document-type-banner",icon:m.uIy}),n[2]=i.deprecated.reason,n[3]=e,n[4]=t):t=n[4],t):null}let li=(0,eh.dS)({name:"Ask To Edit Dialog Opened",version:1,description:'User clicked the "Ask to edit" button in the document permissions banner'}),ll=(0,eh.dS)({name:"Ask To Edit Request Sent",version:1,description:"User sent a role change request from the dialog"}),lo=(0,x.zo)(d.xu)(e5());function lr(e){let t,n,i,l,p,m,f,v,x,g,b,y,_,w,k;let C=(0,s.c)(56),{onClose:S,onRequestSubmitted:z}=e,{t:I}=(0,h.$G7)(o.UA),P=(0,em.f1)(),A="request-permissions-".concat((0,u.useId)()),R=(0,h.vpR)();C[0]===Symbol.for("react.memo_cache_sentinel")?(t={apiVersion:"2024-09-26"},C[0]=t):t=C[0];let L=(0,h.m85)(t),N=(0,c.pm)(),O=(0,h.Cnp)(),[U,B]=(0,u.useState)(!1),[$,V]=(0,u.useState)(""),[G,F]=(0,u.useState)(),[K,W]=(0,u.useState)(!1),[X,H]=(0,u.useState)(!1);e:{let e;let t="administrator";if(!R||!L){let e;C[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,E.of)(t),C[1]=e):e=C[1],n=e;break e}if(C[2]!==L.observable||C[3]!==R){let n,i;C[5]===Symbol.for("react.memo_cache_sentinel")?(n=e=>e.filter(ls).find(la)?"editor":t,C[5]=n):n=C[5],C[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(0,E.of)(t),C[6]=i):i=C[6],e=L.observable.request({url:"/projects/".concat(R,"/roles")}).pipe((0,T.U)(n),(0,M.O)(t),(0,D.K)(i)),C[2]=L.observable,C[3]=R,C[4]=e}else e=C[4];n=e}let q=(0,j.m)(n);C[7]!==L||C[8]!==$||C[9]!==z||C[10]!==R||C[11]!==q||C[12]!==P||C[13]!==N?(i=()=>{var e;B(!0),L.request({url:"/access/project/".concat(R,"/requests"),method:"post",body:{note:$,requestUrl:null===(e=window)||void 0===e?void 0:e.location.href,requestedRole:q,type:"role"}}).then(e=>{e&&(z&&z(),P.log(ll),N.push({title:"Edit access requested"}))}).catch(e=>{var t,n,i;let l=null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.statusCode,o=null==e?void 0:null===(i=e.response)||void 0===i?void 0:null===(n=i.body)||void 0===n?void 0:n.message;429===l&&(W(!0),F(o)),409===l?(H(!0),F(o)):N.push({title:"There was a problem submitting your request.",status:"error"})}).finally(()=>{B(!1)})},C[7]=L,C[8]=$,C[9]=z,C[10]=R,C[11]=q,C[12]=P,C[13]=N,C[14]=i):i=C[14];let Y=i,Z=O.fullscreen;C[15]!==I?(l=I("request-permission-dialog.header.text"),C[15]=I,C[16]=l):l=C[16],C[17]!==I?(p=I("confirm-dialog.cancel-button.fallback-text"),C[17]=I,C[18]=p):p=C[18],C[19]!==S||C[20]!==p?(m={onClick:S,text:p},C[19]=S,C[20]=p,C[21]=m):m=C[21];let J=K||X;return C[22]!==I?(f=I("request-permission-dialog.confirm-button.text"),C[22]=I,C[23]=f):f=C[23],C[24]!==U||C[25]!==Y||C[26]!==J||C[27]!==f?(v={onClick:Y,loading:U,disabled:J,text:f,tone:"primary",type:"submit"},C[24]=U,C[25]=Y,C[26]=J,C[27]=f,C[28]=v):v=C[28],C[29]!==v||C[30]!==m?(x={cancelButton:m,confirmButton:v},C[29]=v,C[30]=m,C[31]=x):x=C[31],C[32]!==I?(g=I("request-permission-dialog.description.text"),C[32]=I,C[33]=g):g=C[33],C[34]!==g?(b=(0,a.jsx)(d.xv,{children:g}),C[34]=g,C[35]=b):b=C[35],C[36]!==X||C[37]!==K||C[38]!==U||C[39]!==G||C[40]!==$||C[41]!==Y||C[42]!==I?(y=K||X?(0,a.jsx)(d.Zb,{tone:"caution",padding:3,radius:2,shadow:1,children:(0,a.jsxs)(d.xv,{size:1,children:[K&&(0,a.jsx)(a.Fragment,{children:null!=G?G:I("request-permission-dialog.warning.limit-reached.text")}),X&&(0,a.jsx)(a.Fragment,{children:null!=G?G:I("request-permission-dialog.warning.denied.text")})]})}):(0,a.jsxs)(d.Kq,{space:3,paddingBottom:0,children:[(0,a.jsx)(d.oi,{placeholder:I("request-permission-dialog.note-input.placeholder.text"),disabled:U,onKeyDown:e=>{"Enter"===e.key&&Y()},maxLength:150,value:$,onChange:e=>{V(e.currentTarget.value)}}),(0,a.jsx)(d.xv,{align:"right",muted:!0,size:1,children:"".concat($.length,"/").concat(150)})]}),C[36]=X,C[37]=K,C[38]=U,C[39]=G,C[40]=$,C[41]=Y,C[42]=I,C[43]=y):y=C[43],C[44]!==b||C[45]!==y?(_=(0,a.jsx)(lo,{children:(0,a.jsxs)(d.Kq,{space:4,children:[b,y]})}),C[44]=b,C[45]=y,C[46]=_):_=C[46],C[47]!==A||C[48]!==S||C[49]!==x||C[50]!==_||C[51]!==l?(w=(0,a.jsx)(r.Vq,{width:1,id:A,header:l,footer:x,onClose:S,onClickOutside:S,children:_}),C[47]=A,C[48]=S,C[49]=x,C[50]=_,C[51]=l,C[52]=w):w=C[52],C[53]!==w||C[54]!==O.fullscreen?(k=(0,a.jsx)(c.Tu,{position:"fixed",zOffset:Z,children:w}),C[53]=w,C[54]=O.fullscreen,C[55]=k):k=C[55],k}function la(e){return"editor"===e.name}function ls(e){return null==e?void 0:e.appliesToUsers}(0,x.zo)(d.kC).attrs({align:"center",direction:"column",justify:"center"})(e6());let ld={loading:!0,error:!1,status:void 0},lc={loading:!1,error:!1,status:"none"},lu={loading:!1,error:!1,status:"declined"},lp={loading:!1,error:!1,status:"pending"},lm={loading:!1,error:!1,status:"expired"},lh=()=>{let e,t,n;let i=(0,s.c)(9);i[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:"2024-07-01"},i[0]=e):e=i[0];let l=(0,h.m85)(e),o=(0,h.vpR)();e:{let e;if(!l||!o){let e;i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,E.of)(lc),i[1]=e):e=i[1],t=e;break e}i[2]!==l||i[3]!==o?(e=l.observable.request({url:"/access/requests/me",tag:"use-role-requests-status"}).pipe((0,T.U)(e=>{if(!e||0===e.length)return lc;let t=e.filter(e=>e.resourceId===o&&"role"===e.type),n=t.find(e=>"declined"===e.status);return n&&(0,ef.Z)((0,ev.Z)(new Date(n.createdAt),2),new Date)?lu:t.find(e=>"pending"===e.status&&(0,ef.Z)((0,ev.Z)(new Date(e.createdAt),2),new Date))?lp:t.find(e=>"pending"===e.status&&(0,ex.Z)((0,ev.Z)(new Date(e.createdAt),2),new Date))?lm:lc}),(0,D.K)(e=>(console.error("Failed to fetch access requests",e),(0,E.of)({loading:!1,error:!0,status:void 0}))),(0,M.O)(ld)),i[2]=l,i[3]=o,i[4]=e):e=i[4],t=e}let r=t,{loading:a,error:d,status:c}=(0,j.m)(r,ld);return i[5]!==d||i[6]!==a||i[7]!==c?(n={data:c,loading:a,error:d},i[5]=d,i[6]=a,i[7]=c,i[8]=n):n=i[8],n};function lf(e){let t,n,i,l,r,c,p,f,v,x,g,b;let y=(0,s.c)(33),{requiredPermission:j}=e,_=(0,h.xJ)(),{data:w,loading:k,error:C}=lh(),[S,z]=(0,u.useState)(!1);t="pending"===w||"declined"===w||S,y[0]!==(null==_?void 0:_.roles)?(n=(null==_?void 0:_.roles)||[],y[0]=null==_?void 0:_.roles,y[1]=n):n=y[1];let E=n,I=1===E.length&&"viewer"===E[0].name,[P,A]=(0,u.useState)(!1);y[2]===Symbol.for("react.memo_cache_sentinel")?(i={style:"short"},y[2]=i):i=y[2];let T=(0,h.WEl)(i),{t:R}=(0,h.$G7)(o.UA),M=(0,em.f1)();y[3]!==E||y[4]!==T?(l=E.map(lx),r=T.formatToParts(l).map(lv),y[3]=E,y[4]=T,y[5]=l,y[6]=r):(l=y[5],r=y[6]);let D=r;return y[7]!==D?(c={Roles:()=>(0,a.jsx)(a.Fragment,{children:D})},y[7]=D,y[8]=c):c=y[8],y[9]!==l||y[10]!==D.length?(p={count:D.length,roles:l},y[9]=l,y[10]=D.length,y[11]=p):p=y[11],y[12]!==j||y[13]!==R||y[14]!==c||y[15]!==p?(f=(0,a.jsx)(d.xv,{size:1,weight:"medium",children:(0,a.jsx)(h.vNl,{t:R,i18nKey:"banners.permission-check-banner.missing-permission",components:c,values:p,context:j})}),y[12]=j,y[13]=R,y[14]=c,y[15]=p,y[16]=f):f=y[16],y[17]!==I||y[18]!==t||y[19]!==C||y[20]!==k||y[21]!==w||y[22]!==R||y[23]!==M?(v=I&&w&&!C&&!k?{onClick:t?void 0:()=>{A(!0),M.log(li)},text:R(t?"banners.permission-check-banner.request-permission-button.sent":"banners.permission-check-banner.request-permission-button.text"),tone:t?"default":"primary",disabled:t,mode:t?"bleed":void 0}:void 0,y[17]=I,y[18]=t,y[19]=C,y[20]=k,y[21]=w,y[22]=R,y[23]=M,y[24]=v):v=y[24],y[25]!==f||y[26]!==v?(x=(0,a.jsx)(i8,{content:f,action:v,"data-testid":"permission-check-banner",icon:m.CPA}),y[25]=f,y[26]=v,y[27]=x):x=y[27],y[28]!==P?(g=P&&(0,a.jsx)(lr,{onClose:()=>A(!1),onRequestSubmitted:()=>{z(!0),A(!1)}}),y[28]=P,y[29]=g):g=y[29],y[30]!==g||y[31]!==x?(b=(0,a.jsxs)(a.Fragment,{children:[x,g]}),y[30]=g,y[31]=x,y[32]=b):b=y[32],b}function lv(e){return"element"===e.type?(0,a.jsx)("code",{children:e.value},e.value):e.value}function lx(e){return e.title}let lg=(0,u.memo)(()=>{var e,t,n,i,l,r,s,c;let p=(0,h.rq_)(),{selectedReleaseId:f}=(0,h.Wc0)(),{params:v,groupIndex:x,routerPanesState:g,replaceCurrent:b,BackLink:y}=t0(),_=null===(e=g[x])||void 0===e?void 0:e[0].id,w=null===(t=g[x-1])||void 0===t?void 0:t[0],C=null==w?void 0:w.id,S=!!(null==w?void 0:null===(n=w.params)||void 0===n?void 0:n.rev),z=(0,u.useMemo)(()=>(null==v?void 0:v.parentRefPath)&&(0,k.mL)(v.parentRefPath)||null,[null==v?void 0:v.parentRefPath]),{t:I}=(0,h.$G7)(o.UA),P=(0,u.useMemo)(()=>{let e=null==z?void 0:z[0];if(!C||!e||!z)return(0,E.of)({loading:!1});let t=(0,h.vsM)(C),n=(0,k.mL)(e),i=n.findIndex(e=>"object"==typeof e&&"_key"in e);return(0,L.z)((0,E.of)({loading:!0}),p.unstable_observePathsDocumentPair(t,-1===i?n:n.slice(0,i),{version:f}).pipe((0,eo.b)(750),(0,T.U)(e=>{var t;let{draft:n,published:i,version:l}=e;return{loading:!1,result:{availability:{draft:n.availability,published:i.availability,...(null==l?void 0:l.availability)?{version:l.availability}:{}},refValue:null===(t=(0,k.U2)((null==l?void 0:l.snapshot)||n.snapshot||i.snapshot,z))||void 0===t?void 0:t._ref}}})))},[f,p,C,z]),A=(0,j.m)(P,{loading:!0}),R=(0,u.useCallback)(()=>{var e;A.loading||(null===(e=A.result)||void 0===e?void 0:e.refValue)&&b({id:A.result.refValue,params:v})},[A.loading,A.result,b,v]);return C&&z&&!S&&!A.loading&&((null===(i=A.result)||void 0===i?void 0:i.availability.draft.available)||(null===(l=A.result)||void 0===l?void 0:l.availability.published.available))&&(null===(r=A.result)||void 0===r?void 0:r.refValue)!==_?(0,a.jsx)(i8,{action:(null===(s=A.result)||void 0===s?void 0:s.refValue)?{onClick:R,icon:m.bnu,text:I("banners.reference-changed-banner.reason-changed.reload-button.text")}:{as:y,icon:m.Two,text:I("banners.reference-changed-banner.reason-removed.close-button.text")},"data-testid":"reference-changed-banner",content:(0,a.jsx)(d.xv,{size:1,weight:"medium",children:I((null===(c=A.result)||void 0===c?void 0:c.refValue)?"banners.reference-changed-banner.reason-changed.text":"banners.reference-changed-banner.reason-removed.text")}),icon:m.foC,tone:"caution"}):null});function lb(){let{t:e}=(0,h.$G7)(o.UA),{t:t}=(0,h.$G7)(),{data:n}=(0,h.vlT)(),{params:i,setParams:l}=t0(),r=(0,u.useMemo)(()=>n.find(e=>(0,h.QXs)(e._id)===(null==i?void 0:i.historyVersion)),[n,null==i?void 0:i.historyVersion]),s=(null==r?void 0:r.state)==="published"?"banners.published-release.description":"banners.archived-release.description",c=(null==r?void 0:r.metadata.title)||t("release.placeholder-untitled-release");return(0,a.jsx)(i8,{tone:"caution",content:(0,a.jsx)(d.xv,{size:1,children:(0,a.jsx)(h.vNl,{t:e,i18nKey:s,values:{title:c},components:{VersionBadge:(0,h.yku)(r)}})}),action:(null==i?void 0:i.archivedRelease)?void 0:{text:"Go back to published version",onClick:()=>{l({...i,rev:(null==i?void 0:i.historyEvent)||void 0,since:void 0,historyVersion:void 0})}}})}lg.displayName="Memo(ReferenceChangedBanner)";let ly=x.zo.img(e7()),lj=e=>{let t,n,i,l,c,p,f,v,x,g,b,y;let j=(0,s.c)(22),{onClose:_}=e,{t:w}=(0,h.$G7)(o.UA),k=(0,u.useRef)(null);return j[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>[k.current],j[0]=t):t=j[0],(0,d.Of)(_,t),j[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(ly,{src:"https://cdn.sanity.io/images/pyrmmpch/production/b47224e2f3a7d1747e43b9da1ac31739250e628b-632x376.png",alt:"Canvas"}),j[1]=n):n=j[1],j[2]===Symbol.for("react.memo_cache_sentinel")?(i=(0,a.jsx)(d.xv,{size:1,weight:"semibold",children:"Canvas"}),j[2]=i):i=j[2],j[3]===Symbol.for("react.memo_cache_sentinel")?(l=(0,a.jsxs)(d.kC,{paddingY:1,gap:2,children:[i,(0,a.jsx)(d.xv,{size:1,muted:!0,children:(0,a.jsx)(m.tUC,{})})]}),j[3]=l):l=j[3],j[4]!==w?(c=w("canvas.banner.popover-heading"),j[4]=w,j[5]=c):c=j[5],j[6]!==c?(p=(0,a.jsx)(d.xu,{paddingTop:3,children:(0,a.jsx)(d.X6,{size:1,children:c})}),j[6]=c,j[7]=p):p=j[7],j[8]!==w?(f=w("canvas.banner.popover-description"),j[8]=w,j[9]=f):f=j[9],j[10]!==f?(v=(0,a.jsx)(d.xu,{paddingTop:4,children:(0,a.jsx)(d.xv,{size:1,children:f})}),j[10]=f,j[11]=v):v=j[11],j[12]!==p||j[13]!==v?(x=(0,a.jsxs)(d.kC,{paddingX:4,paddingBottom:4,paddingTop:3,direction:"column",children:[l,p,v]}),j[12]=p,j[13]=v,j[14]=x):x=j[14],j[15]!==w?(g=w("canvas.banner.popover-button-text"),j[15]=w,j[16]=g):g=j[16],j[17]!==g?(b=(0,a.jsx)(d.kC,{width:"full",gap:3,justify:"flex-end",paddingX:4,paddingBottom:4,children:(0,a.jsx)(r.zx,{mode:"bleed",text:g,autoFocus:!0,tone:"primary",href:"https://snty.link/canvas-docs",target:"_blank",rel:"noopener noreferrer",as:"a",iconRight:m.buG})}),j[17]=g,j[18]=b):b=j[18],j[19]!==b||j[20]!==x?(y=(0,a.jsx)(d.Zb,{radius:3,overflow:"hidden",width:0,ref:k,children:(0,a.jsxs)(d.W2,{width:0,children:[n,x,b]})}),j[19]=b,j[20]=x,j[21]=y):y=j[21],y},l_=e=>{let t,n,i,l,c,p,f,v;let x=(0,s.c)(17),{documentId:g}=e,{t:b}=(0,h.$G7)(o.UA),[y,j]=(0,u.useState)(!1),_=(0,h.ljK)(g);e:{let e;if("published"===_){let e;x[0]!==b?(e=b("canvas.banner.linked-text.published"),x[0]=b,x[1]=e):e=x[1],t=e;break e}if("draft"===_){let e;x[2]!==b?(e=b("canvas.banner.linked-text.draft"),x[2]=b,x[3]=e):e=x[3],t=e;break e}x[4]!==b?(e=b("canvas.banner.linked-text.version"),x[4]=b,x[5]=e):e=x[5],t=e}let w=t;x[6]===Symbol.for("react.memo_cache_sentinel")?(n=()=>j(lk),x[6]=n):n=x[6];let k=n;x[7]===Symbol.for("react.memo_cache_sentinel")?(i=()=>j(!1),x[7]=i):i=x[7];let C=i;return x[8]!==w?(l=(0,a.jsx)(d.xv,{size:1,weight:"medium",children:w}),x[8]=w,x[9]=l):l=x[9],x[10]===Symbol.for("react.memo_cache_sentinel")?(c=(0,a.jsx)(lj,{onClose:C}),p=(0,a.jsx)(r.zx,{tooltipProps:null,mode:"bleed",tone:"default",icon:m.hQ6,onClick:k}),x[10]=c,x[11]=p):(c=x[10],p=x[11]),x[12]!==y?(f=(0,a.jsx)(r.J2,{open:y,size:0,tone:"default",portal:!0,placement:"bottom-start",content:c,children:p}),x[12]=y,x[13]=f):f=x[13],x[14]!==l||x[15]!==f?(v=(0,a.jsxs)(d.kC,{align:"center",gap:2,children:[l,f]}),x[14]=l,x[15]=f,x[16]=v):v=x[16],v};function lw(){let e,t,n,i;let l=(0,s.c)(10),{documentId:r,displayed:d}=iT(),{t:c}=(0,h.$G7)(o.UA),u=(null==d?void 0:d._id)||r,{companionDoc:p}=(0,h.Kp1)(u),m=(0,h.w1i)(null==p?void 0:p.canvasDocumentId,"banner");return p?(l[0]!==u?(e=(0,a.jsx)(l_,{documentId:u}),l[0]=u,l[1]=e):e=l[1],l[2]!==c?(t=c("canvas.banner.edit-in-canvas-action"),l[2]=c,l[3]=t):t=l[3],l[4]!==m||l[5]!==t?(n={mode:"ghost",text:t,onClick:m},l[4]=m,l[5]=t,l[6]=n):n=l[6],l[7]!==e||l[8]!==n?(i=(0,a.jsx)(i8,{tone:"neutral","data-test-id":"canvas-linked-banner",paddingY:0,content:e,action:n}),l[7]=e,l[8]=n,l[9]=i):i=l[9],i):null}function lk(e){return!e}let lC=e=>{let t,n,i,l,r,c,u,p,f;let v=(0,s.c)(27),{schemaType:x,selectedPerspective:g,reason:b}=e,{t:y}=(0,h.$G7)(o.UA),{document:j}=(0,h.cFj)(),{drafts:_}=j,{enabled:w}=_;v[0]!==w||v[1]!==x?(t=e=>{let{perspective:t}=e;return{disabled:!(0,h.Xje)({selectedPerspective:t,isDraftModelEnabled:w,schemaType:x}).result}},v[0]=w,v[1]=x,v[2]=t):t=v[2];let k=t;return v[3]!==b||v[4]!==y?(n="PUBLISHED_NOT_WRITEABLE"===b&&y("banners.choose-new-document-destination.cannot-create-published-document"),v[3]=b,v[4]=y,v[5]=n):n=v[5],v[6]!==b||v[7]!==y?(i="DRAFTS_NOT_WRITEABLE"===b&&y("banners.choose-new-document-destination.cannot-create-draft-document"),v[6]=b,v[7]=y,v[8]=i):i=v[8],v[9]!==b||v[10]!==g||v[11]!==y?(l="RELEASE_NOT_ACTIVE"===b&&(0,h._wt)(g)&&(0,a.jsx)(h.vNl,{t:y,i18nKey:"banners.choose-new-document-destination.release-inactive",values:{title:g.metadata.title},components:{VersionBadge:(0,h.yku)(g)}}),v[9]=b,v[10]=g,v[11]=y,v[12]=l):l=v[12],v[13]!==y?(r=y("banners.choose-new-document-destination.choose-destination"),v[13]=y,v[14]=r):r=v[14],v[15]!==r?(c=(0,a.jsxs)(a.Fragment,{children:[" ",r]}),v[15]=r,v[16]=c):c=v[16],v[17]!==n||v[18]!==i||v[19]!==l||v[20]!==c?(u=(0,a.jsxs)(d.xv,{size:1,children:[n,i,l,c]}),v[17]=n,v[18]=i,v[19]=l,v[20]=c,v[21]=u):u=v[21],v[22]!==k?(p=(0,a.jsx)(h.caY,{menuItemProps:k}),v[22]=k,v[23]=p):p=v[23],v[24]!==p||v[25]!==u?(f=(0,a.jsx)(i8,{tone:"caution",icon:m.foC,content:(0,a.jsxs)(d.kC,{align:"center",gap:2,children:[u,p]})}),v[24]=p,v[25]=u,v[26]=f):f=v[26],f};function lS(){var e;let t,n;let i=(0,s.c)(5),{value:l}=iT(),{documentLinkedBannerContent:o}=null!==(e=(0,h.opE)().components)&&void 0!==e?e:{};i[0]!==l?(t=(0,h.xaJ)(l),i[0]=l,i[1]=t):t=i[1];let r=t;return o&&r?(i[2]!==o||i[3]!==r?(n=(0,a.jsx)(i8,{tone:"transparent","data-test-id":"sanity-create-read-only-banner",content:(0,a.jsx)(o,{metadata:r})}),i[2]=o,i[3]=r,i[4]=n):n=i[4],n):null}function lz(e){var t;let{documentId:n,currentRelease:i,value:l,isScheduledRelease:r}=e,p=(0,h.Ydd)(null!=i?i:h.y7d),{t:m}=(0,h.$G7)(o.UA),{t:f}=(0,h.$G7)(),{createVersion:v}=(0,h.BQ9)(),[x,g]=(0,u.useState)(),b=(0,c.pm)(),y=(0,u.useCallback)(async()=>{if(i._id){g({status:"creating",lastUpdate:new Date});try{await v((0,h.QXs)(i._id),n,l),g({status:"created",lastUpdate:new Date})}catch(e){b.push({status:"error",closable:!0,title:m("banners.release.error.title"),description:m("banners.release.error.description",{message:e.message})}),g(void 0)}}},[v,i._id,n,m,b,l]),j=function(e){let t,n,i;let l=(0,s.c)(4);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=new Date,l[0]=t):t=l[0];let[o,r]=(0,u.useState)(t);return l[1]!==e?(n=()=>{let t=setInterval(()=>{r(new Date)},e);return()=>clearInterval(t)},i=[e],l[1]=e,l[2]=n,l[3]=i):(n=l[2],i=l[3]),(0,u.useEffect)(n,i),o}(200);return(0,h.yt7)({status:"info",id:"add-document-to-release",enabled:(null==x?void 0:x.status)==="created"&&j.getTime()-x.lastUpdate.getTime()>1e3,closable:!0,title:m("banners.release.waiting.title"),description:m("banners.release.waiting.description")}),(0,a.jsx)(i8,{tone:p,content:(0,a.jsx)(d.xv,{size:1,children:(0,a.jsx)(h.vNl,{i18nKey:"banners.release.not-in-release",t:m,values:{title:(null==i?void 0:null===(t=i.metadata)||void 0===t?void 0:t.title)||f("release.placeholder-untitled-release")},components:{VersionBadge:(0,h.yku)(i)}})}),action:r?void 0:{text:m("banners.release.action.add-to-release"),tone:p,disabled:!!x,onClick:y,mode:"default"}})}let lE=(0,eh.dS)({name:"LiveEdit Draft Resolved",version:1,description:"User resolved a draft of a live edit document to continue editing"}),lI=e=>{let t,n,i,l,c,p,f,v,x,g,b,y,j,_,w;let k=(0,s.c)(47),{displayed:C,documentId:S,schemaType:z,i18nKey:E,isEditBlocking:I}=e,{t:P}=(0,h.$G7)(o.UA),[A,T]=(0,u.useState)(!1),[R,M]=(0,u.useState)(!1),D=(0,em.f1)(),{publish:L,discardChanges:N}=(0,h.d9t)(S,(null==C?void 0:C._type)||"");k[0]!==L||k[1]!==D?(t=()=>{L.execute(),T(!0),D.log(lE,{liveEditResolveType:"publish"})},k[0]=L,k[1]=D,k[2]=t):t=k[2];let O=t;k[3]!==N||k[4]!==D?(n=()=>{N.execute(),M(!0),D.log(lE,{liveEditResolveType:"discard"})},k[3]=N,k[4]=D,k[5]=n):n=k[5];let U=n;k[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>()=>{T(!1),M(!1)},k[6]=i):i=k[6],(0,u.useEffect)(i);let B=ii();k[7]!==B||k[8]!==(null==C?void 0:C._id)||k[9]!==z.name?(l=()=>{typeof(null==C?void 0:C._id)>"u"||B.navigateDiffView({mode:"version",previousDocument:{type:z.name,id:(0,h.vsM)(null==C?void 0:C._id)},nextDocument:{type:z.name,id:(0,h.qyu)(null==C?void 0:C._id)}})},k[7]=B,k[8]=null==C?void 0:C._id,k[9]=z.name,k[10]=l):l=k[10];let $=l;return k[11]!==z.title?(c={schemaType:z.title},k[11]=z.title,k[12]=c):c=k[12],k[13]!==E||k[14]!==P||k[15]!==c?(p=(0,a.jsx)(d.xv,{size:1,weight:"medium",children:(0,a.jsx)(h.vNl,{t:P,i18nKey:E,values:c})}),k[13]=E,k[14]=P,k[15]=c,k[16]=p):p=k[16],k[17]!==P?(f=P("banners.obsolete-draft.actions.compare-draft.text"),k[17]=P,k[18]=f):f=k[18],k[19]!==$||k[20]!==f?(v=(0,a.jsx)(r.zx,{text:f,mode:"ghost",onClick:$}),k[19]=$,k[20]=f,k[21]=v):v=k[21],k[22]!==P?(x=P("banners.obsolete-draft.actions.publish-draft.text"),k[22]=P,k[23]=x):x=k[23],k[24]!==I||k[25]!==P?(g=I?{content:P("banners.live-edit-draft-banner.publish.tooltip")}:{},k[24]=I,k[25]=P,k[26]=g):g=k[26],k[27]!==O||k[28]!==A||k[29]!==g||k[30]!==x?(b=(0,a.jsx)(r.zx,{onClick:O,text:x,tooltipProps:g,loading:A,tone:"positive"}),k[27]=O,k[28]=A,k[29]=g,k[30]=x,k[31]=b):b=k[31],k[32]!==P?(y=P("banners.obsolete-draft.actions.discard-draft.text"),k[32]=P,k[33]=y):y=k[33],k[34]!==I||k[35]!==P?(j=I?{content:P("banners.live-edit-draft-banner.discard.tooltip")}:{},k[34]=I,k[35]=P,k[36]=j):j=k[36],k[37]!==U||k[38]!==R||k[39]!==y||k[40]!==j?(_=(0,a.jsx)(r.zx,{onClick:U,text:y,tooltipProps:j,loading:R,tone:"caution"}),k[37]=U,k[38]=R,k[39]=y,k[40]=j,k[41]=_):_=k[41],k[42]!==b||k[43]!==_||k[44]!==p||k[45]!==v?(w=(0,a.jsx)(i8,{content:(0,a.jsxs)(d.kC,{align:"center",justify:"space-between",gap:2,children:[p,v,b,_]}),"data-testid":"live-edit-type-banner",icon:m.uIy}),k[42]=b,k[43]=_,k[44]=p,k[45]=v,k[46]=w):w=k[46],w};function lP(e){let t,n;let i=(0,s.c)(4),{documentId:l,isPinnedDraftOrPublished:o}=e;i[0]!==l?(t={documentId:l},i[0]=l,i[1]=t):t=i[1];let r=(0,h.oiJ)(t);return(0,h.Y_j)(l)&&r&&o?(i[2]!==l?(n=(0,a.jsx)(lA,{documentId:l}),i[2]=l,i[3]=n):n=i[3],n):null}function lA(e){var t;let{documentId:n}=e,{data:i}=(0,h.F6R)(),l=(0,h.RQ8)(),s=null!==(t=(0,h.eBk)(n))&&void 0!==t?t:"",c=(0,u.useMemo)(()=>i.find(e=>e._id.includes(s)),[i,s]),{t:p}=(0,h.$G7)(),{data:m}=(0,h.vUZ)({documentId:n}),f=(0,u.useMemo)(()=>i.filter(e=>m.find(t=>{var n;let i=null!==(n=(0,h.eBk)(t))&&void 0!==n?n:"";return(0,h.QXs)(e._id)===i})).map(e=>e.metadata.title||p("release.placeholder-untitled-release")),[i,m,p]),v=c&&(0,h.Ydd)(c),{t:x}=(0,h.$G7)(o.UA),g=(0,u.useCallback)(async()=>{l(s)},[s,l]);return(0,a.jsx)(i8,{tone:v,paddingY:0,"data-testid":"open-release-to-edit-banner",content:(0,a.jsxs)(d.kC,{direction:"row",align:"center",justify:"space-between",flex:1,children:[(0,a.jsx)(d.xv,{size:1,children:(0,a.jsx)(d.kC,{direction:"row",gap:1,children:f.length>1?(0,a.jsx)(h.vNl,{t:x,i18nKey:"banners.release.navigate-to-edit-description-multiple",components:{VersionBadge:()=>(0,a.jsxs)(h.Q3e,{children:[" ",f[0]]})},values:{count:f.length-1}}):(0,a.jsx)(h.vNl,{t:x,i18nKey:"banners.release.navigate-to-edit-description-single",components:{VersionBadge:()=>(0,a.jsxs)(h.Q3e,{children:[" ",f[0]]})}})})}),(0,a.jsx)(r.zx,{text:x("banners.release.action.open-to-edit"),tone:v,onClick:g})]})})}function lT(){let e,t;let n=(0,s.c)(4),{revisionNotFound:i}=iT(),{t:l}=(0,h.$G7)(o.UA);return i?(n[0]!==l?(e=l("banners.revision-not-found.description"),n[0]=l,n[1]=e):e=n[1],n[2]!==e?(t=(0,a.jsx)(i8,{tone:"caution","data-test-id":"revision-not-found-banner",icon:m.foC,content:(0,a.jsx)(d.xv,{size:1,children:e})}),n[2]=e,n[3]=t):t=n[3],t):null}function lR(e){let t,n,i,l,o;let r=(0,s.c)(12),{currentRelease:c}=e,u=null!=c?c:h.y7d;r[0]!==u?(t=(0,h.Ydd)(u),r[0]=u,r[1]=t):t=r[1];let p=t,{t:f}=(0,h.$G7)();return r[2]!==c?(n=(0,h.Bwd)(c),r[2]=c,r[3]=n):n=r[3],r[4]!==n?(i={date:n},r[4]=n,r[5]=i):i=r[5],r[6]!==i||r[7]!==f?(l=(0,a.jsx)(d.xv,{size:1,children:(0,a.jsx)(h.vNl,{t:f,i18nKey:"release.banner.scheduled-for-publishing-on",values:i})}),r[6]=i,r[7]=f,r[8]=l):l=r[8],r[9]!==l||r[10]!==p?(o=(0,a.jsx)(i8,{tone:p,icon:m.mBM,content:l}),r[9]=l,r[10]=p,r[11]=o):o=r[11],o}function lM(){let e=(0,s.c)(13),{value:t}=iT(),{selectedPerspective:n}=(0,h.Wc0)(),i=(0,h.nOg)(t),{t:l}=(0,h.$G7)(o.UA),{t:r}=(0,h.$G7)();if((0,h._wt)(n)&&i){var c,u,p;let t,i,o,s,f;e[0]!==(null===(c=n.metadata)||void 0===c?void 0:c.title)||e[1]!==r?(t=(null===(u=n.metadata)||void 0===u?void 0:u.title)||r("release.placeholder-untitled-release"),e[0]=null===(p=n.metadata)||void 0===p?void 0:p.title,e[1]=r,e[2]=t):t=e[2];let v=t;return e[3]!==v?(i={title:v},e[3]=v,e[4]=i):i=e[4],e[5]!==n?(o=(0,h.yku)(n),e[5]=n,e[6]=o):o=e[6],e[7]!==o?(s={VersionBadge:o},e[7]=o,e[8]=s):s=e[8],e[9]!==l||e[10]!==i||e[11]!==s?(f=(0,a.jsx)(i8,{tone:"critical",content:(0,a.jsx)(d.xv,{size:1,children:(0,a.jsx)(h.vNl,{t:l,i18nKey:"banners.unpublished-release-banner.text",values:i,components:s})}),icon:m.xEY}),e[9]=l,e[10]=i,e[11]=s,e[12]=f):f=e[12],f}return null}let lD=(0,x.zo)(d.Kq)(e9(),e=>{let{theme:t}=e;return(0,x.iv)(e8(),t.sanity.fonts.heading.sizes[4].fontSize,t.sanity.fonts.heading.sizes[4].lineHeight,t.sanity.fonts.heading.sizes[3].fontSize,t.sanity.fonts.heading.sizes[3].lineHeight,t.sanity.fonts.heading.sizes[2].fontSize,t.sanity.fonts.heading.sizes[2].lineHeight)}),lL=e=>{var t;let n,i,l,c;let u=(0,s.c)(14),{documentId:p,schemaType:f,title:v}=e,x=p===f.name,g=f.description,{t:b}=(0,h.$G7)(o.UA);if(!1===f.__experimental_formPreviewTitle)return null;u[0]!==g||u[1]!==x||u[2]!==f.name||u[3]!==f.title?(n=!x&&(0,a.jsxs)(d.gF,{space:1,children:[(0,a.jsx)(d.xv,{muted:!0,size:1,children:null!==(t=f.title)&&void 0!==t?t:f.name}),g&&(0,a.jsx)(r.u,{content:g,placement:"right",children:(0,a.jsx)(m.hQ6,{"data-testid":"schema-description-icon"})})]}),u[0]=g,u[1]=x,u[2]=f.name,u[3]=f.title,u[4]=n):n=u[4];let y=!v;return u[5]!==b||u[6]!==v?(i=null!=v?v:b("document-view.form-view.form-title-fallback"),u[5]=b,u[6]=v,u[7]=i):i=u[7],u[8]!==y||u[9]!==i?(l=(0,a.jsx)(d.X6,{as:"h2","data-heading":!0,muted:y,"data-testid":"document-panel-document-title",children:i}),u[8]=y,u[9]=i,u[10]=l):l=u[10],u[11]!==n||u[12]!==l?(c=(0,a.jsxs)(lD,{marginBottom:6,space:4,children:[n,l]}),u[11]=n,u[12]=l,u[13]=c):c=u[13],c},lN=e=>e.preventDefault(),lO=(0,u.forwardRef)(function(e,t){var n;let i,l,r,p,m,f,v,x,g,b,y,j,_,w,k,C;let S=(0,s.c)(74),{hidden:z,margins:E}=e,{collapsedFieldSets:I,collapsedPaths:P,displayed:A,editState:T,documentId:R,documentType:M,fieldActions:D,onChange:L,validation:N,ready:O,formState:U,onFocus:B,connectionState:$,onBlur:V,onSetCollapsedPath:G,onPathOpen:F,onSetCollapsedFieldSet:K,onSetActiveFieldGroup:W,openPath:X}=iT(),{selectedReleaseId:q}=(0,h.Wc0)(),Y=(0,h.H__)(),Z=(0,h.Dqo)(R),{title:J}=iG(),[Q]=(0,u.useState)(lU),ee=null==T?void 0:null===(n=T.transactionSyncLock)||void 0===n?void 0:n.enabled,{t:et}=(0,h.$G7)(o.UA);S[0]!==et?(l=et("document-view.form-view.sync-lock-toast.title"),S[0]=et,S[1]=l):l=S[1],S[2]!==et?(r=et("document-view.form-view.sync-lock-toast.description"),S[2]=et,S[3]=r):r=S[3],S[4]!==ee||S[5]!==l||S[6]!==r?(p={id:"sync-lock",status:"warning",enabled:ee,title:l,description:r,closable:!0},S[4]=ee,S[5]=l,S[6]=r,S[7]=p):p=S[7],i=p,(0,h.yt7)(i),S[8]!==R||S[9]!==Y.pair||S[10]!==M||S[11]!==Q||S[12]!==q?(m=()=>{let e=Y.pair.documentEvents(R,M,q).pipe((0,H.b)(e=>{"mutation"===e.type&&Q.publish(function(e){let t=e.mutations.map(e=>e.patch).filter(Boolean);return{type:"mutation",snapshot:e.document,patches:(0,h.Sis)(e.origin,t)}}(e)),"rebase"===e.type&&Q.publish(function(e){let t=e.remoteMutations.map(e=>e.patch).filter(Boolean),n=e.localMutations.map(e=>e.patch).filter(Boolean);return{type:"rebase",snapshot:e.document,patches:(0,h.Sis)("remote",t).concat((0,h.Sis)("local",n))}}(e))})).subscribe();return()=>{e.unsubscribe()}},S[8]=R,S[9]=Y.pair,S[10]=M,S[11]=Q,S[12]=q,S[13]=m):m=S[13],S[14]!==R||S[15]!==Y||S[16]!==M||S[17]!==Q||S[18]!==q?(f=[R,Y,M,Q,q],S[14]=R,S[15]=Y,S[16]=M,S[17]=Q,S[18]=q,S[19]=f):f=S[19],(0,u.useEffect)(m,f);let en=!!(null==A?void 0:A._rev);S[20]!==Q||S[21]!==A?(v=()=>{Q.publish({type:"mutation",patches:[],snapshot:A})},S[20]=Q,S[21]=A,S[22]=v):v=S[22];let ei=(0,eb.i)(v);S[23]!==ei||S[24]!==en?(x=()=>{en&&ei()},S[23]=ei,S[24]=en,S[25]=x):x=S[25],S[26]!==en?(g=[en],S[26]=en,S[27]=g):g=S[27],(0,u.useEffect)(x,g);let[el,eo]=(0,u.useState)(null),[er,ea]=(0,u.useState)(!1);S[28]!==er||S[29]!==el||S[30]!==(null==U?void 0:U.focusPath.length)||S[31]!==O?(b=()=>{er||!O||(null==U?void 0:U.focusPath.length)||!el||(ea(!0),(0,c.fo)(el))},S[28]=er,S[29]=el,S[30]=null==U?void 0:U.focusPath.length,S[31]=O,S[32]=b):b=S[32];let es=null==U?void 0:U.focusPath.length;S[33]!==er||S[34]!==el||S[35]!==O||S[36]!==es?(y=[er,el,es,O],S[33]=er,S[34]=el,S[35]=O,S[36]=es,S[37]=y):y=S[37],(0,u.useEffect)(b,y),S[38]!==t?(j=e=>{eo(e),"function"==typeof t?t(e):t&&(t.current=e)},S[38]=t,S[39]=j):j=S[39];let ed=j,ec="reconnecting"===$||(null==U?void 0:U.readOnly)||!(null==T?void 0:T.ready),eu=ec?"true":void 0;return S[40]!==I||S[41]!==P||S[42]!==$||S[43]!==R||S[44]!==(null==T?void 0:T.draft)||S[45]!==(null==T?void 0:T.published)||S[46]!==D||S[47]!==U||S[48]!==z||S[49]!==ec||S[50]!==V||S[51]!==L||S[52]!==B||S[53]!==F||S[54]!==W||S[55]!==K||S[56]!==G||S[57]!==X||S[58]!==Q||S[59]!==Z||S[60]!==et||S[61]!==J||S[62]!==N?(_="connecting"!==$||(null==T?void 0:T.draft)||(null==T?void 0:T.published)?null===U||z?(0,a.jsx)(d.xu,{padding:2,children:(0,a.jsx)(d.xv,{children:et("document-view.form-view.form-hidden")})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(lL,{documentId:R,schemaType:U.schemaType,title:J}),(0,a.jsx)(h.quP,{__internal_fieldActions:D,__internal_patchChannel:Q,changed:U.changed,collapsedFieldSets:I,collapsedPaths:P,focused:U.focused,focusPath:U.focusPath,groups:U.groups,id:"root",members:U.members,onChange:L,onFieldGroupSelect:W,onPathBlur:V,onPathFocus:B,onPathOpen:F,onSetFieldSetCollapsed:K,onSetPathCollapsed:G,openPath:X,presence:Z,readOnly:ec,schemaType:U.schemaType,validation:N,value:U.value})]}):(0,a.jsx)(nr,{ms:300,children:(0,a.jsxs)(d.kC,{align:"center",direction:"column",height:"fill",justify:"center",children:[(0,a.jsx)(d.$j,{muted:!0}),(0,a.jsx)(d.xu,{marginTop:3,children:(0,a.jsx)(d.xv,{align:"center",muted:!0,size:1,children:et("document-view.form-view.loading")})})]})}),S[40]=I,S[41]=P,S[42]=$,S[43]=R,S[44]=null==T?void 0:T.draft,S[45]=null==T?void 0:T.published,S[46]=D,S[47]=U,S[48]=z,S[49]=ec,S[50]=V,S[51]=L,S[52]=B,S[53]=F,S[54]=W,S[55]=K,S[56]=G,S[57]=X,S[58]=Q,S[59]=Z,S[60]=et,S[61]=J,S[62]=N,S[63]=_):_=S[63],S[64]!==ed||S[65]!==eu||S[66]!==_?(w=(0,a.jsx)(d.xu,{as:"form",onSubmit:lN,ref:ed,"data-testid":"form-view","data-read-only":eu,children:_}),S[64]=ed,S[65]=eu,S[66]=_,S[67]=w):w=S[67],S[68]!==E||S[69]!==w?(k=(0,a.jsx)(h.$rW,{margins:E,children:w}),S[68]=E,S[69]=w,S[70]=k):k=S[70],S[71]!==z||S[72]!==k?(C=(0,a.jsx)(d.W2,{hidden:z,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:k}),S[71]=z,S[72]=k,S[73]=C):C=S[73],C});function lU(){return(0,h.fm0)()}function lB(){let e,t;let n=(0,s.c)(11),{activeViewId:i,paneKey:l,views:o}=iT(),r="".concat(l,"tabpanel");if(n[0]!==i||n[1]!==l||n[2]!==r||n[3]!==o){let t;n[5]!==i||n[6]!==l||n[7]!==r?(t=(e,t)=>{var n;return(0,a.jsx)(l$,{icon:e.icon,id:"".concat(l,"tab-").concat(e.id),isActive:i===e.id,label:e.title,tabPanelId:r,viewId:0===t?null:null!==(n=e.id)&&void 0!==n?n:null},e.id)},n[5]=i,n[6]=l,n[7]=r,n[8]=t):t=n[8],e=o.map(t),n[0]=i,n[1]=l,n[2]=r,n[3]=o,n[4]=e}else e=n[4];return n[9]!==e?(t=(0,a.jsx)(d.td,{space:1,children:e}),n[9]=e,n[10]=t):t=n[10],t}function l$(e){let t,n,i,l,o,d,c,u,p;let m=(0,s.c)(20);m[0]!==e?({icon:t,id:n,isActive:i,label:l,tabPanelId:d,viewId:c,...o}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=i,m[4]=l,m[5]=o,m[6]=d,m[7]=c):(t=m[1],n=m[2],i=m[3],l=m[4],o=m[5],d=m[6],c=m[7]);let{ready:h,editState:f}=iT(),{setView:v}=t0();m[8]!==v||m[9]!==c?(u=()=>v(c),m[8]=v,m[9]=c,m[10]=u):u=m[10];let x=u,g=!h&&!(null==f?void 0:f.draft)&&!(null==f?void 0:f.published);return m[11]!==x||m[12]!==t||m[13]!==n||m[14]!==i||m[15]!==l||m[16]!==o||m[17]!==g||m[18]!==d?(p=(0,a.jsx)(r.OK,{...o,"aria-controls":d,disabled:g,icon:t,id:n,label:l,onClick:x,selected:i}),m[11]=x,m[12]=t,m[13]=n,m[14]=i,m[15]=l,m[16]=o,m[17]=g,m[18]=d,m[19]=p):p=m[19],p}function lV(){let e,t,n;let i=(0,s.c)(22),{connectionState:l,schemaType:r,title:d,value:c}=iT(),u=!!c;i[0]!==c||i[1]!==r||i[2]!==u?(e={enabled:u,schemaType:r,value:c},i[0]=c,i[1]=r,i[2]=u,i[3]=e):e=i[3];let{error:p,value:m}=(0,h._2T)(e),{t:f}=(0,h.$G7)(o.UA);if("connecting"===l&&!u){let e;return i[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(a.Fragment,{}),i[4]=e):e=i[4],e}if(d){let e;return i[5]!==d?(e=(0,a.jsx)(a.Fragment,{children:d}),i[5]=d,i[6]=e):e=i[6],e}if(!c){let e,t;let n=(null==r?void 0:r.title)||(null==r?void 0:r.name);return i[7]!==f||i[8]!==n?(e=f("panes.document-header-title.new.text",{schemaType:n}),i[7]=f,i[8]=n,i[9]=e):e=i[9],i[10]!==e?(t=(0,a.jsx)(a.Fragment,{children:e}),i[10]=e,i[11]=t):t=i[11],t}if(p){let e,t;return i[12]!==p.message||i[13]!==f?(e=f("panes.document-header-title.error.text",{error:p.message}),i[12]=p.message,i[13]=f,i[14]=e):e=i[14],i[15]!==e?(t=(0,a.jsx)(a.Fragment,{children:e}),i[15]=e,i[16]=t):t=i[16],t}return i[17]!==f||i[18]!==(null==m?void 0:m.title)?(t=(null==m?void 0:m.title)||(0,a.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:f("panes.document-header-title.untitled.text")}),i[17]=f,i[18]=null==m?void 0:m.title,i[19]=t):t=i[19],i[20]!==t?(n=(0,a.jsx)(a.Fragment,{children:t}),i[20]=t,i[21]=n):n=i[21],n}let lG=e=>{let t,n,i,l,c,u;let p=(0,s.c)(16);p[0]!==e?({documentExists:t,...n}=e,p[0]=e,p[1]=t,p[2]=n):(t=p[1],n=p[2]);let{isFavorited:f,isReady:v,favorite:x,unfavorite:g}=(0,h.KXt)(n),{t:b}=(0,h.$G7)(o.UA),y=f?"document.favorites.remove-from-favorites":"document.favorites.add-to-favorites";p[3]!==b||p[4]!==y?(i=b(y),p[3]=b,p[4]=y,p[5]=i):i=p[5];let j=i,_=f?g:x,w=!v||!t;return p[6]!==j?(l={content:(0,a.jsx)(d.xv,{size:1,children:j}),placement:"right"},p[6]=j,p[7]=l):l=p[7],p[8]!==f?(c=(0,a.jsx)(d.xv,{size:1,children:f?(0,a.jsx)(m.e0l,{}):(0,a.jsx)(m.r7p,{})}),p[8]=f,p[9]=c):c=p[9],p[10]!==j||p[11]!==_||p[12]!==w||p[13]!==l||p[14]!==c?(u=(0,a.jsx)(r.zx,{mode:"bleed",onClick:_,disabled:w,"aria-label":j,"aria-live":"assertive",tooltipProps:l,children:c}),p[10]=j,p[11]=_,p[12]=w,p[13]=l,p[14]=c,p[15]=u):u=p[15],u},lF=(0,u.memo)(function(){var e,t,n,i;let l,d,c,u,p,f,v,x,g,b;let y=(0,s.c)(26),{editState:j,connectionState:_,views:w,documentId:k,displayed:C}=iT(),{features:S}=iN(),{index:z,BackLink:E}=t0(),{activeWorkspace:I}=(0,h.AJ_)();y[0]!==k?(l=(0,h.vsM)(k),y[0]=k,y[1]=l):l=y[1];let P=l,A=w.length>1,{collapsed:T,isLast:R}=np(),M=R&&!T?-1:0,D=S.backButton&&z>0,{t:L}=(0,h.$G7)(o.UA);y[2]===Symbol.for("react.memo_cache_sentinel")?(c=(0,a.jsx)(lV,{}),y[2]=c):c=y[2],d=c,y[3]!==A?(p=A&&(0,a.jsx)(lB,{}),y[3]=A,y[4]=p):p=y[4],u=p,y[5]!==E||y[6]!==D||y[7]!==L?(v=D&&(0,a.jsx)(r.zx,{as:E,"data-as":"a",icon:m.Y4O,mode:"bleed",tooltipProps:{content:L("pane-header.back-button.text")}}),y[5]=E,y[6]=D,y[7]=L,y[8]=v):v=y[8],f=v;let N=null!==(e=null==C?void 0:C._type)&&void 0!==e?e:"";y[9]!==I.dataset||y[10]!==I.projectId?(x=[I.projectId,I.dataset],y[9]=I.dataset,y[10]=I.projectId,y[11]=x):x=y[11];let O=x.join("."),U=null!==(i=(null==j?void 0:j.ready)&&(null!==(n=null!==(t=j.version)&&void 0!==t?t:j.draft)&&void 0!==n?n:j.published)!==null)&&void 0!==i&&i;y[12]!==I.dataset||y[13]!==I.name||y[14]!==I.projectId||y[15]!==P||y[16]!==U||y[17]!==N||y[18]!==O?(g=(0,a.jsx)(h._qF,{capability:"comlink",condition:"available",children:(0,a.jsx)(lG,{resourceType:"studio",documentId:P,documentType:N,resourceId:O,schemaName:I.name,projectId:I.projectId,dataset:I.dataset,documentExists:U})}),y[12]=I.dataset,y[13]=I.name,y[14]=I.projectId,y[15]=P,y[16]=U,y[17]=N,y[18]=O,y[19]=g):g=y[19];let B=g,$="connecting"===_&&!(null==j?void 0:j.draft)&&!(null==j?void 0:j.published);return y[20]!==f||y[21]!==B||y[22]!==$||y[23]!==M||y[24]!==u?(b=(0,a.jsx)(nA,{loading:$,title:d,tabs:u,tabIndex:M,backButton:f,appendTitle:B}),y[20]=f,y[21]=B,y[22]=$,y[23]=M,y[24]=u,y[25]=b):b=y[25],b}),lK=(0,x.zo)(d.xu)({position:"relative"}),lW=(0,x.zo)(h.l$t)(e=>{let{$disabled:t}=e;return t?{height:"100%"}:(0,x.iv)(te())}),lX=function(e){let t,n,i,l,o,r,c,p,m,f,v,x,g,b,y,j;let _=(0,s.c)(102),{footerHeight:w,headerHeight:k,isInspectOpen:C,rootElement:S,setDocumentPanelPortalElement:z,footer:E}=e,{activeViewId:I,displayed:P,documentId:A,editState:T,inspector:R,value:M,views:D,ready:L,schemaType:N,permissions:O,isPermissionsLoading:U}=iT();if(_[0]!==M){let e=(0,h.xaJ)(M);t=(0,h.EM_)(e),_[0]=M,_[1]=t}else t=_[1];let B=t,{params:$}=t0(),{collapsed:V}=tY(),{collapsed:G}=np(),F=(0,d.vI)(),{features:K}=iN(),[W,X]=(0,u.useState)(null),[H,q]=(0,u.useState)(null),Y=(0,u.useRef)(null),Z=(0,h.cFj)(),J=M._createdAt?"update":"create";_[2]!==I||_[3]!==D?(i=D.find(e=>e.id===I)||D[0]||{type:"form"},_[2]=I,_[3]=D,_[4]=i):i=_[4],n=i;let Q=K.splitPanes&&W||F.element;e:{let e;if(V){let e;let t=k||0,n=w?w+2:2;_[5]!==t||_[6]!==n?(e=[t,0,n,0],_[5]=t,_[6]=n,_[7]=e):e=_[7],l=e;break e}_[8]===Symbol.for("react.memo_cache_sentinel")?(e=[0,0,2,0],_[8]=e):e=_[8],l=e}let ee=l,et="form"!==n.type;_[9]!==n.component||_[10]!==n.options||_[11]!==n.type||_[12]!==P||_[13]!==A||_[14]!==(null==T?void 0:T.draft)||_[15]!==(null==T?void 0:T.published)||_[16]!==N||_[17]!==M?(o=()=>{if("component"===n.type&&n.component){let e=n.component;return(0,a.jsx)(e,{document:{draft:(null==T?void 0:T.draft)||null,displayed:P||M,historical:P,published:(null==T?void 0:T.published)||null},documentId:A,options:n.options,schemaType:N})}return!1},_[9]=n.component,_[10]=n.options,_[11]=n.type,_[12]=P,_[13]=A,_[14]=null==T?void 0:T.draft,_[15]=null==T?void 0:T.published,_[16]=N,_[17]=M,_[18]=o):o=_[18],_[19]!==o?(r=o(),_[19]=o,_[20]=r):r=_[20];let en=r;_[21]!==H?(c=()=>{(null==H?void 0:H.scrollTo)&&H.scrollTo(0,0)},_[21]=H,_[22]=c):c=_[22],_[23]!==A||_[24]!==H?(p=[A,H],_[23]=A,_[24]=H,_[25]=p):p=_[25],(0,u.useEffect)(c,p),_[26]!==Q||_[27]!==z?(m=()=>{Q&&z(Q)},f=[Q,z],_[26]=Q,_[27]=z,_[28]=m,_[29]=f):(m=_[28],f=_[29]),(0,u.useEffect)(m,f),_[30]!==P||_[31]!==C||_[32]!==M?(x=C?(0,a.jsx)(i7,{value:P||M}):null,_[30]=P,_[31]=C,_[32]=M,_[33]=x):x=_[33],v=x;let ei=!!(!G&&R),{selectedPerspective:el,selectedReleaseId:eo}=(0,h.Wc0)();t:{var er;let e,t,i,l,o,r,s,d,c,u,p,m,f,v;if(null==$?void 0:$.historyVersion){let e;_[34]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(lb,{}),_[34]=e):e=_[34],g=e;break t}_[35]!==el?(e=(0,h._wt)(el)&&(0,h.$NU)(el),_[35]=el,_[36]=e):e=_[36];let x=e,b=!!(x&&(null==P?void 0:P._id)&&(0,h.eBk)(null==P?void 0:P._id)===eo);if(_[37]!==T||_[38]!==N||_[39]!==el||_[40]!==Z.document.drafts.enabled?(i=function(e){let{isSelectedPerspectiveWriteable:t,editState:n}=e;return(0,h.CXx)(n)&&!t.result}({isSelectedPerspectiveWriteable:t=(0,h.Xje)({selectedPerspective:el,isDraftModelEnabled:Z.document.drafts.enabled,schemaType:N}),editState:T}),_[37]=T,_[38]=N,_[39]=el,_[40]=Z.document.drafts.enabled,_[41]=t,_[42]=i):(t=_[41],i=_[42]),i){let e;_[43]!==t.reason||_[44]!==t.result||_[45]!==N||_[46]!==el?(e=!t.result&&(0,a.jsx)(lC,{schemaType:N,selectedPerspective:el,reason:t.reason}),_[43]=t.reason,_[44]=t.result,_[45]=N,_[46]=el,_[47]=e):e=_[47],g=e;break t}if(b){let e;_[48]!==el?(e=(0,a.jsx)(lR,{currentRelease:el}),_[48]=el,_[49]=e):e=_[49],g=e;break t}_[50]!==el?(l=(0,h.reX)(el),_[50]=el,_[51]=l):l=_[51];let y=l;if((null==P?void 0:P._id)&&(0,h.eBk)(P._id)!==eo&&L&&!y&&!1===(0,h.CXx)(T)){let e;let t=P||void 0;_[52]!==x||_[53]!==el||_[54]!==t||_[55]!==M._id?(e=(0,a.jsx)(lz,{documentId:M._id,currentRelease:el,value:t,isScheduledRelease:x}),_[52]=x,_[53]=el,_[54]=t,_[55]=M._id,_[56]=e):e=_[56],g=e;break t}let j=function(e){let{editState:t,workspace:n,schemaType:i}=e;if(!(null==t?void 0:t.ready))return{result:void 0};let l=null!==t.draft,{document:{drafts:{enabled:o}}}=n;return!1===l?{result:!1}:o?iW(i)?{result:!0,reason:"LIVE_EDIT_ACTIVE"}:{result:!1}:{result:!0,reason:"DRAFT_MODEL_INACTIVE"}}({editState:T,workspace:Z,schemaType:N});if("form"===n.type&&!eo&&j.result){if("DRAFT_MODEL_INACTIVE"===j.reason){let e;_[57]!==P||_[58]!==A||_[59]!==N?(e=(0,a.jsx)(lI,{displayed:P,documentId:A,schemaType:N,i18nKey:"banners.obsolete-draft.draft-model-inactive.text"}),_[57]=P,_[58]=A,_[59]=N,_[60]=e):e=_[60],g=e;break t}if("LIVE_EDIT_ACTIVE"===j.reason){let e;_[61]!==P||_[62]!==A||_[63]!==N?(e=(0,a.jsx)(lI,{displayed:P,documentId:A,schemaType:N,i18nKey:"banners.live-edit-draft-banner.text",isEditBlocking:!0}),_[61]=P,_[62]=A,_[63]=N,_[64]=e):e=_[64],g=e;break t}}if("form"!==n.type||U){g=null;break t}_[65]!==B?(o=B&&(0,a.jsx)(lS,{}),_[65]=B,_[66]=o):o=_[66],_[67]!==(null==O?void 0:O.granted)||_[68]!==J?(r=!(null==O?void 0:O.granted)&&(0,a.jsx)(lf,{requiredPermission:J}),_[67]=null==O?void 0:O.granted,_[68]=J,_[69]=r):r=_[69],_[70]===Symbol.for("react.memo_cache_sentinel")?(s=(0,a.jsx)(lT,{}),d=(0,a.jsx)(lg,{}),c=(0,a.jsx)(ln,{}),u=(0,a.jsx)(lw,{}),p=(0,a.jsx)(i9,{}),m=(0,a.jsx)(lM,{}),_[70]=s,_[71]=d,_[72]=c,_[73]=u,_[74]=p,_[75]=m):(s=_[70],d=_[71],c=_[72],u=_[73],p=_[74],m=_[75]);let w=null!==(er=null==P?void 0:P._id)&&void 0!==er?er:A;_[76]!==y||_[77]!==w?(f=(0,a.jsx)(lP,{documentId:w,isPinnedDraftOrPublished:y}),_[76]=y,_[77]=w,_[78]=f):f=_[78],_[79]!==o||_[80]!==r||_[81]!==f?(v=(0,a.jsxs)(a.Fragment,{children:[o,r,s,d,c,u,p,m,f]}),_[79]=o,_[80]=r,_[81]=f,_[82]=v):v=_[82],g=v}let ea=g,es=K.resizablePanes||!ei;return _[83]!==en||_[84]!==ea||_[85]!==H||_[86]!==E||_[87]!==et||_[88]!==v||_[89]!==V||_[90]!==ee||_[91]!==Q||_[92]!==es?(b=es&&(0,a.jsxs)(d.kC,{height:"fill",direction:"column",width:"fill",flex:2,children:[(0,a.jsxs)(h.jr5,{zOffset:"paneHeader",children:[ea,(0,a.jsx)(lF,{})]}),(0,a.jsx)(lK,{flex:2,overflow:"hidden",children:(0,a.jsx)(d.Xp,{element:Q,__unstable_elements:{documentScrollElement:H},children:(0,a.jsx)(d.NM,{element:H,children:(0,a.jsxs)(h.Ahg,{scrollElement:H,containerElement:Y,children:[(0,a.jsxs)(lW,{$disabled:V||!1,"data-testid":"document-panel-scroller",ref:q,children:[(0,a.jsx)(lO,{hidden:et,margins:ee,ref:Y}),en]}),v,(0,a.jsx)("div",{"data-testid":"document-panel-portal",ref:X})]})})})}),E]}),_[83]=en,_[84]=ea,_[85]=H,_[86]=E,_[87]=et,_[88]=v,_[89]=V,_[90]=ee,_[91]=Q,_[92]=es,_[93]=b):b=_[93],_[94]!==A||_[95]!==S||_[96]!==N||_[97]!==ei?(y=ei&&(0,a.jsx)(d.NM,{element:S,children:(0,a.jsx)(iq,{documentId:A,documentType:N.name,flex:1})}),_[94]=A,_[95]=S,_[96]=N,_[97]=ei,_[98]=y):y=_[98],_[99]!==b||_[100]!==y?(j=(0,a.jsx)(nm,{children:(0,a.jsxs)(d.kC,{height:"fill",children:[b,y]})}),_[99]=b,_[100]=y,_[101]=j):j=_[101],j};lX.displayName="DocumentPanel";let lH=!1,lq=Object.freeze({}),lY=Symbol("LOADING_PANE"),lZ="documentPanelPortalElement",lJ=["left","bottom"],lQ={small:0,medium:1,large:2,full:"auto"};function l0(e){let t,n;let i=(0,s.c)(5),{dialog:l,referenceElement:o}=e;return i[0]!==l?(t=(0,a.jsx)(l1,{dialog:l}),i[0]=l,i[1]=t):t=i[1],i[2]!==o||i[3]!==t?(n=(0,a.jsx)(d.J2,{content:t,fallbackPlacements:lJ,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:o}),i[2]=o,i[3]=t,i[4]=n):n=i[4],n}function l1(e){let t,n,i,l,r,c,p,m,f,v,x;let g=(0,s.c)(29),{dialog:b}=e,{cancelButtonIcon:y,cancelButtonText:j,confirmButtonIcon:_,confirmButtonText:w,message:k,onCancel:C,onConfirm:S,tone:z}=b,{t:E}=(0,h.$G7)(o.UA),{isTopLayer:I}=(0,d.sJ)(),P=(0,u.useRef)(null);return g[0]!==I||g[1]!==C?(t=e=>{"Escape"===e.key&&I&&C()},g[0]=I,g[1]=C,g[2]=t):t=g[2],(0,d.qh)(t),g[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>[P.current],g[3]=n):n=g[3],(0,d.Of)(I&&C,n),g[4]===Symbol.for("react.memo_cache_sentinel")?(i={minWidth:304,maxWidth:400},g[4]=i):i=g[4],g[5]!==k?(l=(0,a.jsx)(d.xu,{flex:1,overflow:"auto",padding:4,children:(0,a.jsx)(d.xv,{children:k})}),g[5]=k,g[6]=l):l=g[6],g[7]===Symbol.for("react.memo_cache_sentinel")?(r={borderTop:"1px solid var(--card-border-color)"},g[7]=r):r=g[7],g[8]!==j||g[9]!==E?(c=j||E("confirm-dialog.cancel-button.fallback-text"),g[8]=j,g[9]=E,g[10]=c):c=g[10],g[11]!==y||g[12]!==C||g[13]!==c?(p=(0,a.jsx)(d.zx,{"data-testid":"confirm-dialog-cancel-button",icon:y,onClick:C,mode:"ghost",text:c}),g[11]=y,g[12]=C,g[13]=c,g[14]=p):p=g[14],g[15]!==w||g[16]!==E?(m=w||E("confirm-dialog.confirm-button.fallback-text"),g[15]=w,g[16]=E,g[17]=m):m=g[17],g[18]!==_||g[19]!==S||g[20]!==m||g[21]!==z?(f=(0,a.jsx)(d.zx,{"data-testid":"confirm-dialog-confirm-button",icon:_,onClick:S,text:m,tone:z}),g[18]=_,g[19]=S,g[20]=m,g[21]=z,g[22]=f):f=g[22],g[23]!==p||g[24]!==f?(v=(0,a.jsx)(d.xu,{paddingX:4,paddingY:3,style:r,children:(0,a.jsxs)(d.rj,{columns:2,gap:2,children:[p,f]})}),g[23]=p,g[24]=f,g[25]=v):v=g[25],g[26]!==l||g[27]!==v?(x=(0,a.jsxs)(d.kC,{direction:"column",ref:P,style:i,children:[l,v]}),g[26]=l,g[27]=v,g[28]=x):x=g[28],x}function l2(e){let t,n,i;let l=(0,s.c)(12),{dialog:o}=e,r=(0,u.useId)();l[0]!==o.footer?(t=o.footer&&(0,a.jsx)(d.xu,{paddingX:4,paddingY:3,children:o.footer}),l[0]=o.footer,l[1]=t):t=l[1];let p=t,m=!1===o.showCloseButton,f=void 0===o.width?1:lQ[o.width];return l[2]!==o.content?(n=(0,a.jsx)(d.xu,{padding:4,children:o.content}),l[2]=o.content,l[3]=n):n=l[3],l[4]!==o.header||l[5]!==o.onClose||l[6]!==r||l[7]!==p||l[8]!==m||l[9]!==f||l[10]!==n?(i=(0,a.jsx)(h.jr5,{zOffset:"fullscreen",children:(0,a.jsx)(c.Vq,{animate:!0,__unstable_hideCloseButton:m,footer:p,header:o.header,id:r,onClose:o.onClose,onClickOutside:o.onClose,width:f,children:n})}),l[4]=o.header,l[5]=o.onClose,l[6]=r,l[7]=p,l[8]=m,l[9]=f,l[10]=n,l[11]=i):i=l[11],i}function l3(e){let t,n;let i=(0,s.c)(5),{dialog:l,referenceElement:o}=e;return i[0]!==l?(t=(0,a.jsx)(l4,{dialog:l}),i[0]=l,i[1]=t):t=i[1],i[2]!==o||i[3]!==t?(n=(0,a.jsx)(d.J2,{content:t,fallbackPlacements:lJ,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:o}),i[2]=o,i[3]=t,i[4]=n):n=i[4],n}function l4(e){let t,n,i;let l=(0,s.c)(6),{dialog:o}=e,{content:r,onClose:c}=o,{isTopLayer:p}=(0,d.sJ)(),m=(0,u.useRef)(null);return l[0]!==p||l[1]!==c?(t=e=>{"Escape"===e.key&&p&&c()},l[0]=p,l[1]=c,l[2]=t):t=l[2],(0,d.qh)(t),l[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>[m.current],l[3]=n):n=l[3],(0,d.Of)(p&&c,n),l[4]!==r?(i=(0,a.jsx)("div",{ref:m,children:r}),l[4]=r,l[5]=i):i=l[5],i}function l5(e){let t;let n=(0,s.c)(3),{children:i}=e,{element:l,elements:o}=(0,d.vI)(),r=(null==o?void 0:o[lZ])||l;return n[0]!==i||n[1]!==r?(t=(0,a.jsx)(d.Xp,{element:r,children:i}),n[0]=i,n[1]=r,n[2]=t):t=n[2],t}function l6(e){let t,n;let i=(0,s.c)(17),{dialog:l,referenceElement:o}=e,c=void 0===o?null:o,p=(0,u.useId)();if("confirm"===l.type){let e;return i[0]!==l||i[1]!==c?(e=(0,a.jsx)(l0,{dialog:l,referenceElement:c}),i[0]=l,i[1]=c,i[2]=e):e=i[2],e}if("popover"===l.type){let e;return i[3]!==l||i[4]!==c?(e=(0,a.jsx)(l3,{dialog:l,referenceElement:c}),i[3]=l,i[4]=c,i[5]=e):e=i[5],e}if("dialog"===l.type||!l.type){let e;return i[6]!==l?(e=(0,a.jsx)(l5,{children:(0,a.jsx)(l2,{dialog:l})}),i[6]=l,i[7]=e):e=i[7],e}if("custom"===l.type){let e;let t=null==l?void 0:l.component;return i[8]!==t?(e=(0,a.jsx)(l5,{children:t}),i[8]=t,i[9]=e):e=i[9],e}return console.warn("Unsupported modal type ".concat(l.type)),i[10]!==l.content||i[11]!==l.type?(t=l.content||(0,a.jsxs)(d.xv,{size:1,children:["Unexpected modal type (",(0,a.jsx)("code",{children:l.type}),")"]}),i[10]=l.content,i[11]=l.type,i[12]=t):t=i[12],i[13]!==p||i[14]!==t||i[15]!==l.onClose?(n=(0,a.jsx)(r.Vq,{id:p,onClose:l.onClose,onClickOutside:l.onClose,width:1,children:t}),i[13]=p,i[14]=t,i[15]=l.onClose,i[16]=n):n=i[16],n}let l7=(0,u.memo)(function(e){let t,n,i,l,o,r;let d=(0,s.c)(9),{actionStates:c,children:p,referenceElement:m}=e,[f,v]=(0,u.useState)(-1);t=c[f],d[0]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{v(e)},d[0]=n):n=d[0];let x=n;return d[1]!==p?(l=p({handleAction:x}),d[1]=p,d[2]=l):l=d[2],i=l,d[3]!==t||d[4]!==m?(o=t&&t.dialog&&(0,a.jsx)(h.jr5,{zOffset:"paneFooter",children:(0,a.jsx)(l6,{dialog:t.dialog,referenceElement:m})}),d[3]=t,d[4]=m,d[5]=o):o=d[5],d[6]!==i||d[7]!==o?(r=(0,a.jsxs)(a.Fragment,{children:[o,i]}),d[6]=i,d[7]=o,d[8]=r):r=d[8],r});function l8(e){let t,n,i,l;let c=(0,s.c)(10),{actionStates:p,disabled:m}=e,f=(0,u.useId)(),[v,x]=(0,u.useState)(null);c[0]===Symbol.for("react.memo_cache_sentinel")?(n={placement:"top-end",portal:!0,preventOverflow:!0},c[0]=n):n=c[0],t=n;let{t:g}=(0,h.$G7)(o.UA);c[1]!==p||c[2]!==m||c[3]!==f||c[4]!==g?(i=e=>{let{handleAction:n}=e;return(0,a.jsx)(r.j2,{id:"".concat(f,"-action-menu"),button:(0,a.jsx)(h.lXN,{"aria-label":g("buttons.action-menu-button.aria-label"),disabled:m,"data-testid":"action-menu-button",tooltipProps:{content:g("buttons.action-menu-button.tooltip")}}),menu:(0,a.jsx)(d.v2,{padding:1,children:p.map((e,t)=>(0,a.jsx)(l9,{actionState:e,disabled:m,index:t,onAction:n},t))}),popover:t,ref:x})},c[1]=p,c[2]=m,c[3]=f,c[4]=g,c[5]=i):i=c[5];let b=i;return c[6]!==p||c[7]!==v||c[8]!==b?(l=(0,a.jsx)(l7,{actionStates:p,referenceElement:v,children:b}),c[6]=p,c[7]=v,c[8]=b,c[9]=l):l=c[9],l}function l9(e){let t,n,i,l,o;let d=(0,s.c)(18),{actionState:c,disabled:u,index:p,onAction:m}=e,{onHandle:h}=c;d[0]!==p||d[1]!==m||d[2]!==h?(t=()=>{m(p),h&&h()},d[0]=p,d[1]=m,d[2]=h,d[3]=t):t=d[3];let f=t;d[4]!==c.shortcut?(i=c.shortcut?String(c.shortcut).split("+").map(oe):void 0,d[4]=c.shortcut,d[5]=i):i=d[5],n=i;let v="action-".concat(c.label.replace(" ","")),x=u||!!c.disabled;return d[6]!==c.disabled||d[7]!==c.title?(l=c.disabled&&{tooltipProps:{content:c.title}},d[6]=c.disabled,d[7]=c.title,d[8]=l):l=d[8],d[9]!==c.icon||d[10]!==c.label||d[11]!==c.tone||d[12]!==f||d[13]!==n||d[14]!==v||d[15]!==x||d[16]!==l?(o=(0,a.jsx)(r.sN,{"data-testid":v,disabled:x,hotkeys:n,icon:c.icon,onClick:f,text:c.label,tone:c.tone,...l}),d[9]=c.icon,d[10]=c.label,d[11]=c.tone,d[12]=f,d[13]=n,d[14]=v,d[15]=x,d[16]=l,d[17]=o):o=d[17],o}function oe(e){return e.slice(0,1).toUpperCase()+e.slice(1)}let ot={NOTHING_TO_DELETE:"action.delete.disabled.nothing-to-delete",NOT_READY:"action.delete.disabled.not-ready"},on=e=>{let t,n,i,l,r;let d=(0,s.c)(36),{id:c,type:p,draft:f,onComplete:v,release:x}=e,{setIsDeleting:g}=iT(),{delete:b}=(0,h.d9t)(c,p,x),[y,j]=(0,u.useState)(!1),[_,w]=(0,u.useState)(!1),{t:k}=(0,h.$G7)(o.UA);d[0]!==v?(t=()=>{w(!1),v()},d[0]=v,d[1]=t):t=d[1];let C=t;d[2]!==b||d[3]!==v||d[4]!==g?(n=()=>{j(!0),w(!1),g(!0),b.execute(),v()},d[2]=b,d[3]=v,d[4]=g,d[5]=n):n=d[5];let S=n;d[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>{w(!0)},d[6]=i):i=d[6];let z=i;d[7]!==c||d[8]!==x||d[9]!==p?(l={id:c,type:p,version:x,permission:"delete"},d[7]=c,d[8]=x,d[9]=p,d[10]=l):l=d[10];let[E,I]=(0,h.hHf)(l),P=(0,h.xJ)();e:{let e,t,n,i;if(!I&&!(null==E?void 0:E.granted)){let e,t,n;d[11]!==k?(e=k("action.delete.label"),d[11]=k,d[12]=e):e=d[12],d[13]!==P?(t=(0,a.jsx)(h.FMn,{context:"delete-document",currentUser:P}),d[13]=P,d[14]=t):t=d[14],d[15]!==e||d[16]!==t?(n={tone:"critical",icon:m.XHJ,disabled:!0,label:e,title:t},d[15]=e,d[16]=t,d[17]=n):n=d[17],r=n;break e}let l=y||!!b.disabled||I;d[18]!==b.disabled||d[19]!==k?(e=b.disabled&&k(ot[b.disabled])||"",d[18]=b.disabled,d[19]=k,d[20]=e):e=d[20],d[21]!==y||d[22]!==k?(t=k(y?"action.delete.running.label":"action.delete.label"),d[21]=y,d[22]=k,d[23]=t):t=d[23],d[24]!==(null==f?void 0:f._id)||d[25]!==C||d[26]!==S||d[27]!==c||d[28]!==_||d[29]!==p?(n=_&&{type:"custom",component:(0,a.jsx)(no,{action:"delete",id:(null==f?void 0:f._id)||c,type:p,onCancel:C,onConfirm:S})},d[24]=null==f?void 0:f._id,d[25]=C,d[26]=S,d[27]=c,d[28]=_,d[29]=p,d[30]=n):n=d[30],d[31]!==l||d[32]!==e||d[33]!==t||d[34]!==n?(i={tone:"critical",icon:m.XHJ,disabled:l,title:e,label:t,shortcut:"Ctrl+Alt+D",onHandle:z,dialog:n},d[31]=l,d[32]=e,d[33]=t,d[34]=n,d[35]=i):i=d[35],r=i}return r};on.action="delete",on.displayName="DeleteAction";let oi={NO_CHANGES:"action.discard-changes.disabled.no-change",NOT_PUBLISHED:"action.discard-changes.disabled.not-published",NOT_READY:"action.discard-changes.disabled.not-ready"},ol=e=>{let{id:t,type:n,published:i,liveEdit:l,onComplete:r,release:s}=e,{discardChanges:d}=(0,h.d9t)(t,n,s),[c,p]=(0,u.useState)(!1),[f,v]=(0,h.hHf)({id:t,type:n,version:s,permission:"discardDraft"}),x=(0,h.xJ)(),{displayed:g}=iT(),{t:b}=(0,h.$G7)(o.UA),y=(null==g?void 0:g._id)&&(0,h.aEi)(null==g?void 0:g._id),j=(0,u.useCallback)(()=>{d.execute(),r()},[d,r]),_=(0,u.useCallback)(()=>{p(!0)},[]),w=(0,u.useMemo)(()=>c&&{type:"confirm",tone:"critical",onCancel:r,onConfirm:j,message:b("action.discard-changes.confirm-dialog.confirm-discard-changes")},[j,c,r,b]);return(0,u.useMemo)(()=>!i||l||y?null:v||(null==f?void 0:f.granted)?{tone:"critical",icon:m.X5P,disabled:!!d.disabled||v,title:b(d.disabled&&oi[d.disabled]||""),label:b("action.discard-changes.label"),onHandle:_,dialog:w}:{tone:"critical",icon:m.X5P,disabled:!0,label:b("action.discard-changes.label"),title:(0,a.jsx)(h.FMn,{context:"discard-changes",currentUser:x})},[x,w,d.disabled,_,v,y,l,null==f?void 0:f.granted,i,b])};ol.action="discardChanges",ol.displayName="DiscardChangesAction";let oo={NOTHING_TO_DUPLICATE:"action.duplicate.disabled.nothing-to-duplicate",NOT_READY:"action.duplicate.disabled.not-ready"},or=e=>{let{id:t,type:n,onComplete:i,release:l,mapDocument:r}=e,s=(0,h.H__)(),{duplicate:d}=(0,h.d9t)(t,n,l),{navigateIntent:c}=(0,_.tv)(),[p,f]=(0,u.useState)(!1),[x,g]=(0,h.hHf)({id:t,type:n,version:l,permission:"duplicate"}),{t:b}=(0,h.$G7)(o.UA),y=(0,h.xJ)(),j=(0,u.useCallback)(async()=>{let e=(0,v.Z)();f(!0);let l=(0,N.z)(s.pair.operationEvents(t,n).pipe((0,A.h)(e=>"duplicate"===e.op&&"success"===e.type)));d.execute(e,{mapDocument:r}),await l,c("edit",{id:e,type:n}),i()},[s.pair,d,t,r,c,i,n]);return(0,u.useMemo)(()=>g||(null==x?void 0:x.granted)?{icon:m.TIy,disabled:p||!!d.disabled||g,label:b(p?"action.duplicate.running.label":"action.duplicate.label"),title:d.disabled?b(oo[d.disabled]):"",onHandle:j}:{icon:m.TIy,disabled:!0,label:b("action.duplicate.label"),title:(0,a.jsx)(h.FMn,{context:"duplicate-document",currentUser:y})},[y,d.disabled,j,p,g,null==x?void 0:x.granted,b])};or.action="duplicate",or.displayName="DuplicateAction";let oa=e=>{let t,n,i,l,r,a;let d=(0,s.c)(27),{id:c,type:p,revision:f,onComplete:v,release:x}=e,{restore:g}=(0,h.d9t)(c,p,x),{revisionNotFound:b}=iT(),y=(0,h.E6V)(c,p),{navigateIntent:j}=(0,_.tv)(),w=(0,u.useRef)(y),[k,C]=(0,u.useState)(!1),{t:S}=(0,h.$G7)(o.UA);d[0]!==v||d[1]!==g||d[2]!==f?(t=()=>{g.execute(f),v()},d[0]=v,d[1]=g,d[2]=f,d[3]=t):t=d[3];let z=t;d[4]!==y||d[5]!==c||d[6]!==j||d[7]!==p?(n=()=>{y&&y!==w.current&&("success"===y.type&&"restore"===y.op&&j("edit",{id:c,type:p}),w.current=y)},i=[y,c,j,p],d[4]=y,d[5]=c,d[6]=j,d[7]=p,d[8]=n,d[9]=i):(n=d[8],i=d[9]),(0,u.useEffect)(n,i),d[10]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{C(!0)},d[10]=l):l=d[10];let E=l;e:{if(k){let e,t;d[11]!==S?(e=S("action.restore.confirm.message"),d[11]=S,d[12]=e):e=d[12],d[13]!==z||d[14]!==v||d[15]!==e?(t={type:"confirm",tone:"critical",onCancel:v,onConfirm:z,message:e},d[13]=z,d[14]=v,d[15]=e,d[16]=t):t=d[16],r=t;break e}r=null}let I=r,P="@initial"===f,A=void 0===f;t:{let e,t,n;if(A||b){a=null;break t}d[17]!==S?(e=S("action.restore.label"),d[17]=S,d[18]=e):e=d[18];let i=P?"action.restore.disabled.cannot-restore-initial":"action.restore.tooltip";d[19]!==S||d[20]!==i?(t=S(i),d[19]=S,d[20]=i,d[21]=t):t=d[21],d[22]!==I||d[23]!==P||d[24]!==e||d[25]!==t?(n={label:e,tone:"caution",onHandle:E,title:t,icon:m.V13,dialog:I,disabled:P},d[22]=I,d[23]=P,d[24]=e,d[25]=t,d[26]=n):n=d[26],a=n}return a};oa.action="restore",oa.displayName="HistoryRestoreAction";let os=(0,eh.dS)({name:"Document Published",version:1,description:'User clicked the "Publish" button in the document pane'}),od={LIVE_EDIT_ENABLED:"action.publish.live-edit.publish-disabled",ALREADY_PUBLISHED:"action.publish.already-published.no-time-ago.tooltip",NO_CHANGES:"action.publish.no-changes.tooltip",NOT_READY:"action.publish.disabled.not-ready"};function oc(e,t,n){return"ALREADY_PUBLISHED"===e&&t?(0,a.jsx)(ou,{publishedAt:t}):n(od[e])}function ou(e){let t,n,i;let l=(0,s.c)(6),{publishedAt:r}=e,{t:d}=(0,h.$G7)(o.UA);l[0]===Symbol.for("react.memo_cache_sentinel")?(t={useTemporalPhrase:!0},l[0]=t):t=l[0];let c=(0,h.ofl)(r,t);return l[1]!==d||l[2]!==c?(n=d("action.publish.already-published.tooltip",{timeSincePublished:c}),l[1]=d,l[2]=c,l[3]=n):n=l[3],l[4]!==n?(i=(0,a.jsx)("span",{children:n}),l[4]=n,l[5]=i):i=l[5],i}let op=e=>{let t,n,i,l,r,d,c,p,v,x,g;let b=(0,s.c)(78),{id:y,type:j,liveEdit:_,draft:w,published:k,release:C}=e,[S,z]=(0,u.useState)(null),{publish:E}=(0,h.d9t)(y,j),I=(0,h.a3k)(y,j),P=(0,h.nuD)(y,j),{changesOpen:A,documentId:T,documentType:R,value:M}=iT(),D=(0,h.iav)(T,R),{t:L}=(0,h.$G7)(o.UA);b[0]!==(null==D?void 0:D.draft)||b[1]!==(null==D?void 0:D.published)?(t=(null==D?void 0:D.draft)||(null==D?void 0:D.published)||{},b[0]=null==D?void 0:D.draft,b[1]=null==D?void 0:D.published,b[2]=t):t=b[2];let N=t._rev;b[3]!==I.validation?(n=I.validation.some(f.YN),b[3]=I.validation,b[4]=n):n=b[4];let O=n,[U,B]=(0,u.useState)(!1),$=P.isSyncing,V=I.isValidating;b[5]!==y||b[6]!==j?(i={id:y,type:j,permission:"publish"},b[5]=y,b[6]=j,b[7]=i):i=b[7];let[G,F]=(0,h.hHf)(i),K=(0,h.xJ)();b[8]!==O||b[9]!==E.disabled||b[10]!==k||b[11]!==L?(l=E.disabled?oc(E.disabled,(k||{})._updatedAt,L)||"":O?L("action.publish.validation-issues.tooltip"):"",b[8]=O,b[9]=E.disabled,b[10]=k,b[11]=L,b[12]=l):l=b[12];let W=l,X=!!w;b[13]!==E?(r=()=>{E.execute(),z("publishing")},b[13]=E,b[14]=r):r=b[14];let H=r;b[15]!==H||b[16]!==O||b[17]!==$||b[18]!==U||b[19]!==N||b[20]!==I.isValidating||b[21]!==I.revision?(d=()=>{let e=!1===I.isValidating&&I.revision!==N;U&&!$&&e&&(O||H(),B(!1))},b[15]=H,b[16]=O,b[17]=$,b[18]=U,b[19]=N,b[20]=I.isValidating,b[21]=I.revision,b[22]=d):d=b[22],b[23]!==H||b[24]!==O||b[25]!==$||b[26]!==V||b[27]!==U||b[28]!==N||b[29]!==I.isValidating||b[30]!==I.revision?(c=[$,H,O,U,I.revision,N,V,I.isValidating],b[23]=H,b[24]=O,b[25]=$,b[26]=V,b[27]=U,b[28]=N,b[29]=I.isValidating,b[30]=I.revision,b[31]=c):c=b[31],(0,u.useEffect)(d,c),b[32]!==X||b[33]!==S?(p=()=>{let e="publishing"===S&&!X,t=e?"published":null,n=setTimeout(()=>{z(t)},e?200:4e3);return()=>clearTimeout(n)},b[32]=X,b[33]=S,b[34]=p):p=b[34],b[35]!==A||b[36]!==X||b[37]!==S?(v=[A,S,X],b[35]=A,b[36]=X,b[37]=S,b[38]=v):v=b[38],(0,u.useEffect)(p,v);let q=(0,em.f1)();b[39]!==H||b[40]!==(null==w?void 0:w._createdAt)||b[41]!==k||b[42]!==N||b[43]!==P.isSyncing||b[44]!==q||b[45]!==I.isValidating||b[46]!==I.revision?(x=()=>{q.log(os,{publishedImmediately:!(null==w?void 0:w._createdAt),previouslyPublished:!!k}),P.isSyncing||I.isValidating||I.revision!==N?B(!0):H()},b[39]=H,b[40]=null==w?void 0:w._createdAt,b[41]=k,b[42]=N,b[43]=P.isSyncing,b[44]=q,b[45]=I.isValidating,b[46]=I.revision,b[47]=x):x=b[47];let Y=x;e:{var Z;let e,t,n;if(C||_){g=null;break e}if((0,h.aEi)(M._id)&&null!==w){let e,t,n;b[48]!==L?(e=L("action.publish.label"),b[48]=L,b[49]=e):e=b[49];let i=null==k?void 0:k._updatedAt;b[50]!==L||b[51]!==i?(t=oc("ALREADY_PUBLISHED",i,L),b[50]=L,b[51]=i,b[52]=t):t=b[52],b[53]!==e||b[54]!==t?(n={tone:"default",icon:m.EI4,label:e,title:t,disabled:!0},b[53]=e,b[54]=t,b[55]=n):n=b[55],g=n;break e}if(!F&&!(null==G?void 0:G.granted)){let e,t,n;b[56]!==L?(e=L("action.publish.label"),b[56]=L,b[57]=e):e=b[57],b[58]!==K?(t=(0,a.jsx)(h.FMn,{context:"publish-document",currentUser:K}),b[58]=K,b[59]=t):t=b[59],b[60]!==e||b[61]!==t?(n={tone:"default",icon:m.EI4,label:e,title:t,disabled:!0},b[60]=e,b[61]=t,b[62]=n):n=b[62],g=n;break e}let i=!!(U||(null==D?void 0:null===(Z=D.transactionSyncLock)||void 0===Z?void 0:Z.enabled)||"publishing"===S||"published"===S||O||E.disabled),l=i||F;b[63]!==U||b[64]!==S||b[65]!==L?(e=L("published"===S?"action.publish.published.label":U||"publishing"===S?"action.publish.running.label":"action.publish.draft.label"),b[63]=U,b[64]=S,b[65]=L,b[66]=e):e=b[66],b[67]!==U||b[68]!==S||b[69]!==L||b[70]!==W?(t=U?L("action.publish.waiting"):"published"===S||"publishing"===S?null:W,b[67]=U,b[68]=S,b[69]=L,b[70]=W,b[71]=t):t=b[71];let o=i||U?null:"Ctrl+Alt+P";b[72]!==Y||b[73]!==l||b[74]!==e||b[75]!==t||b[76]!==o?(n={disabled:l,tone:"default",label:e,icon:m.EI4,title:t,shortcut:o,onHandle:Y},b[72]=Y,b[73]=l,b[74]=e,b[75]=t,b[76]=o,b[77]=n):n=b[77],g=n}return g};op.action="publish",op.displayName="PublishAction";let om={NOT_PUBLISHED:"action.unpublish.disabled.not-published",NOT_READY:"action.unpublish.disabled.not-ready",LIVE_EDIT_ENABLED:"action.unpublish.disabled.live-edit-enabled"},oh=e=>{let{id:t,type:n,draft:i,onComplete:l,liveEdit:r,release:s}=e,{unpublish:d}=(0,h.d9t)(t,n),[c,p]=(0,u.useState)(!1),[f,v]=(0,h.hHf)({id:t,type:n,permission:"unpublish"}),x=(0,h.xJ)(),{displayed:g}=iT(),{t:b}=(0,h.$G7)(o.UA),y=(null==g?void 0:g._id)&&(0,h.Cb2)(null==g?void 0:g._id),j=(0,u.useCallback)(()=>{p(!1),l()},[l]),_=(0,u.useCallback)(()=>{p(!1),d.execute(),l()},[l,d]),w=(0,u.useMemo)(()=>c?{type:"dialog",onClose:l,content:(0,a.jsx)(no,{id:(null==i?void 0:i._id)||t,type:n,action:"unpublish",onCancel:j,onConfirm:_})}:null,[i,t,j,_,c,l,n]);return(0,u.useMemo)(()=>s||y||r?null:v||(null==f?void 0:f.granted)?{tone:"critical",icon:m.xEY,disabled:!!d.disabled||v,label:b("action.unpublish.label"),title:d.disabled?b(om[d.disabled]):"",onHandle:()=>p(!0),dialog:w}:{tone:"critical",icon:m.xEY,label:"Unpublish",title:(0,a.jsx)(h.FMn,{context:"unpublish-document",currentUser:x}),disabled:!0},[s,y,r,v,null==f?void 0:f.granted,d.disabled,b,w,x])};oh.action="unpublish",oh.displayName="UnpublishAction";let of=(0,u.memo)(function(e){let t,n,i,l,o,c,p,m,f;let v=(0,s.c)(33),{disabled:x,showMenu:g,states:b}=e,{__internal_tasks:y}=(0,h.Lky)(),{editState:j}=iT(),{selectedReleaseId:_}=(0,h.Wc0)();v[0]!==b?([t,...n]=b,v[0]=b,v[1]=t,v[2]=n):(t=v[1],n=v[2]);let[w,k]=(0,u.useState)(null);e:{let e,n,l,o;if(!t||!t.title&&!t.shortcut){i=null;break e}v[3]===Symbol.for("react.memo_cache_sentinel")?(e={maxWidth:300},v[3]=e):e=v[3],v[4]!==t.title?(n=t.title&&(0,a.jsx)(d.xv,{size:1,children:t.title}),v[4]=t.title,v[5]=n):n=v[5],v[6]!==t.shortcut?(l=t.shortcut&&(0,a.jsx)(r.p8,{"data-testid":"document-status-bar-hotkeys",fontSize:1,style:{marginTop:-4,marginBottom:-4},keys:String(t.shortcut).split("+").map(ob)}),v[6]=t.shortcut,v[7]=l):l=v[7],v[8]!==n||v[9]!==l?(o=(0,a.jsxs)(d.kC,{style:e,align:"center",gap:3,children:[n,l]}),v[8]=n,v[9]=l,v[10]=o):o=v[10],i=o}let C=i,S=_?t&&!(0,h.QTO)(t):t&&!(null==j?void 0:j.liveEdit);v[11]!==t||v[12]!==n||v[13]!==S?(o=S?n:[t,...n],v[11]=t,v[12]=n,v[13]=S,v[14]=o):o=v[14],l=o;let z=y&&y.footerAction;return v[15]!==x||v[16]!==t||v[17]!==S||v[18]!==C?(c=S&&(0,a.jsx)(d.li,{zOffset:200,children:(0,a.jsx)(r.u,{disabled:!C,content:C,placement:"top",children:(0,a.jsx)(d.Kq,{children:(0,a.jsx)(r.zx,{"data-testid":"action-".concat(nh(t.label)),disabled:x||!!t.disabled,icon:t.icon,onClick:t.onHandle,ref:k,text:t.label,tone:t.tone||"primary"})})})}),v[15]=x,v[16]=t,v[17]=S,v[18]=C,v[19]=c):c=v[19],v[20]!==x||v[21]!==n||v[22]!==g||v[23]!==l?(p=g&&n.length>0&&(0,a.jsx)(l8,{actionStates:l,disabled:x}),v[20]=x,v[21]=n,v[22]=g,v[23]=l,v[24]=p):p=v[24],v[25]!==w||v[26]!==t?(m=t&&t.dialog&&(0,a.jsx)(l6,{dialog:t.dialog,referenceElement:w}),v[25]=w,v[26]=t,v[27]=m):m=v[27],v[28]!==z||v[29]!==c||v[30]!==p||v[31]!==m?(f=(0,a.jsxs)(d.kC,{align:"center",gap:1,children:[z,c,p,m]}),v[28]=z,v[29]=c,v[30]=p,v[31]=m,v[32]=f):f=v[32],f}),ov=(0,u.memo)(function(){let e,t,n,i,l,o,r;let d=(0,s.c)(15),{actions:c,connectionState:u,documentId:p,editState:m,isInitialValueLoading:h}=iT();d[0]!==c?(t=null!=c?c:[],d[0]=c,d[1]=t):t=d[1],d[2]!==t?(n=t.filter(oy),d[2]=t,d[3]=n):n=d[3],e=n,d[4]!==m||d[5]!==h?(l=m?{...m,initialValueResolved:!h}:null,d[4]=m,d[5]=h,d[6]=l):l=d[6],i=l,d[7]!==e.length||d[8]!==u||d[9]!==p?(o=t=>{let{states:n}=t;return(0,a.jsx)(of,{disabled:"connected"!==u,showMenu:e.length>1,states:n},p)},d[7]=e.length,d[8]=u,d[9]=p,d[10]=o):o=d[10];let f=o;return 0!==e.length&&i?(d[11]!==i||d[12]!==e||d[13]!==f?(r=(0,a.jsx)(n5,{actions:e,actionProps:i,group:"default",children:f}),d[11]=i,d[12]=e,d[13]=f,d[14]=r):r=d[14],r):null}),ox=(0,u.memo)(function(){let e,t,n,i,l,o,r;let d=(0,s.c)(15),{actions:c,connectionState:u,editState:p,revisionId:m,isInitialValueLoading:h}=iT(),f=((null==p?void 0:p.draft)||(null==p?void 0:p.published)||{})._rev===m;d[0]!==p||d[1]!==h||d[2]!==m?(t=p?{...p,revision:m||void 0,initialValueResolved:!h}:null,d[0]=p,d[1]=h,d[2]=m,d[3]=t):t=d[3],e=t,d[4]!==c?(i=null!=c?c:[],d[4]=c,d[5]=i):i=d[5],d[6]!==i?(l=i.filter(og).slice(-1),d[6]=i,d[7]=l):l=d[7],n=l,d[8]!==u||d[9]!==f?(o=e=>{let{states:t}=e;return(0,a.jsx)(of,{disabled:"connected"!==u||!!f,showMenu:!1,states:t})},d[8]=u,d[9]=f,d[10]=o):o=d[10];let v=o;return e?(d[11]!==e||d[12]!==n||d[13]!==v?(r=(0,a.jsx)(n5,{actions:n,actionProps:e,group:"default",children:v}),d[11]=e,d[12]=n,d[13]=v,d[14]=r):r=d[14],r):null});function og(e){return e.action===oa.action}function ob(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}function oy(e){return!og(e)}let oj=e=>{let t=(0,s.c)(16),{release:n}=e,{t:i}=(0,h.$G7)();if("archived"===n.state){let e,n;return t[0]!==i?(e=i("release.chip.tooltip.archived"),t[0]=i,t[1]=e):e=t[1],t[2]!==e?(n=(0,a.jsx)(d.xv,{size:1,children:e}),t[2]=e,t[3]=n):n=t[3],n}if("asap"===n.metadata.releaseType){let e,n;return t[4]!==i?(e=i("release.type.asap"),t[4]=i,t[5]=e):e=t[5],t[6]!==e?(n=(0,a.jsx)(d.xv,{size:1,children:e}),t[6]=e,t[7]=n):n=t[7],n}if("scheduled"===n.metadata.releaseType){let e;let l="active"===n.state;return t[8]!==l||t[9]!==n||t[10]!==i?(e=n.metadata.intendedPublishAt&&(0,a.jsx)(d.xv,{size:1,children:l?(0,a.jsx)(h.vNl,{t:i,i18nKey:"release.chip.tooltip.intended-for-date",values:{date:(0,h.Bwd)(n)}}):(0,a.jsx)(h.vNl,{t:i,i18nKey:"release.chip.tooltip.scheduled-for-date",values:{date:(0,h.Bwd)(n)}})}),t[8]=l,t[9]=n,t[10]=i,t[11]=e):e=t[11],e}if("undecided"===n.metadata.releaseType){let e,n;return t[12]!==i?(e=i("release.type.undecided"),t[12]=i,t[13]=e):e=t[13],t[14]!==e?(n=(0,a.jsx)(d.xv,{size:1,children:e}),t[14]=e,t[15]=n):n=t[15],n}return null},o_={dateStyle:"medium",timeStyle:"short"},ow=(0,u.memo)(function(){var e,t,n,i,l,o,r,s,c,p;let{selectedReleaseId:m,selectedPerspectiveName:f}=(0,h.Wc0)(),{t:v}=(0,h.$G7)(),x=(0,h.RQ8)(),{params:g,setParams:b}=t0(),y=(0,h.P9l)(o_),{loading:j}=(0,h.F6R)(),_=(0,h.I_y)(),{editState:w,displayed:k,documentType:C,documentId:S}=iT(),z=k&&!k._createdAt,E=iD({displayed:k,documentId:S}),I=(0,h.oiJ)({documentId:S}),P=(0,h.cFj)(),A=(0,u.useCallback)(e=>()=>{"published"===e&&(null==g?void 0:g.historyVersion)&&b({...g,rev:(null==g?void 0:g.historyEvent)||void 0,since:void 0,historyVersion:void 0}),x(e)},[x,b,g]),T=_.get(C),R=!!T&&iW(T),M=(0,u.useMemo)(()=>(!R||!!m)&&!(null==w?void 0:w.published),[R,m,null==w?void 0:w.published]),D=(0,u.useCallback)(e=>{if(!(null==g?void 0:g.historyVersion))return{selected:(0,h.QXs)(e._id)===(0,h.eBk)((null==k?void 0:k._id)||"")};let t=(0,h.QXs)(e._id)===g.historyVersion;return{selected:t,disabled:t}},[null==k?void 0:k._id,null==g?void 0:g.historyVersion]),L=(0,u.useMemo)(()=>{var e;return!!(R&&!(null==w?void 0:null===(e=w.draft)||void 0===e?void 0:e._id)&&!m||(0,h.aEi)((null==k?void 0:k._id)||"")&&(0,h.Vb0)(f||""))},[null==k?void 0:k._id,null==w?void 0:null===(e=w.draft)||void 0===e?void 0:e._id,R,f,m]),N=(0,u.useMemo)(()=>{let e=(null==k?void 0:k._id)||"";return!(L||(null==g?void 0:g.historyVersion)||f||(0,h.Y_j)(e))&&(!!(0,h.Cb2)(e)||!((0,h.aEi)(e)&&(null==w?void 0:w.published)&&(0,h.Vb0)(f||"")))},[null==k?void 0:k._id,null==w?void 0:w.published,L,null==g?void 0:g.historyVersion,f]),O=(0,u.useMemo)(()=>!!I||!!z&&!!m||(null!=w&&!!w.draft||!!R)&&!!(z&&m||R),[null==w?void 0:w.draft,z,R,I,m]),U=null===(t=P.document.drafts)||void 0===t?void 0:t.enabled;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.tyD,{tooltipContent:(0,a.jsx)(d.xv,{size:1,children:(null==w?void 0:w.published)&&(null==w?void 0:null===(n=w.published)||void 0===n?void 0:n._updatedAt)?(0,a.jsx)(h.vNl,{t:v,i18nKey:"release.chip.tooltip.published-date",values:{date:y.format(new Date(null==w?void 0:w.published._updatedAt))}}):(0,a.jsx)(a.Fragment,{children:v("release.chip.tooltip.not-published")})}),disabled:M,onClick:A("published"),selected:L,text:v("release.chip.published"),tone:"positive",contextValues:{documentId:(null==w?void 0:null===(i=w.published)||void 0===i?void 0:i._id)||(null==w?void 0:w.id)||"",menuReleaseId:(null==w?void 0:null===(l=w.published)||void 0===l?void 0:l._id)||(null==w?void 0:w.id)||"",releases:E.notCurrentReleases,releasesLoading:j,documentType:C,fromRelease:"published",isVersion:!1,disabled:!(null==w?void 0:w.published)}}),U&&(0,a.jsx)(h.tyD,{tooltipContent:(0,a.jsx)(d.xv,{size:1,children:(null==w?void 0:w.draft)?(0,a.jsx)(a.Fragment,{children:(null==w?void 0:w.draft._updatedAt)?(0,a.jsx)(h.vNl,{t:v,i18nKey:"release.chip.tooltip.edited-date",values:{date:y.format(new Date(null==w?void 0:w.draft._updatedAt))}}):(0,a.jsx)(h.vNl,{t:v,i18nKey:"release.chip.tooltip.created-date",values:{date:y.format(new Date(null==w?void 0:w.draft._createdAt))}})}):(0,a.jsx)(a.Fragment,{children:v(R?"release.chip.tooltip.draft-disabled.live-edit":"release.chip.tooltip.no-edits")})}),selected:N,disabled:O,text:v("release.chip.draft"),tone:(null==w?void 0:w.draft)?"caution":"neutral",onClick:A("drafts"),contextValues:{documentId:(null==w?void 0:null===(o=w.draft)||void 0===o?void 0:o._id)||(null==w?void 0:null===(r=w.published)||void 0===r?void 0:r._id)||(null==w?void 0:w.id)||"",menuReleaseId:(null==w?void 0:null===(s=w.draft)||void 0===s?void 0:s._id)||(null==w?void 0:null===(c=w.published)||void 0===c?void 0:c._id)||(null==w?void 0:w.id)||"",releases:E.notCurrentReleases,releasesLoading:j,documentType:C,fromRelease:"draft",isVersion:!1,disabled:!(null==w?void 0:w.draft)}}),E.inCreation&&(0,a.jsx)(h.tyD,{tooltipContent:(0,a.jsx)(oj,{release:E.inCreation}),selected:!0,onClick:()=>{},locked:!1,tone:(0,h.Ydd)(E.inCreation),text:E.inCreation.metadata.title||v("release.placeholder-untitled-release"),contextValues:{disabled:!0,documentId:(null==k?void 0:k._id)||"",menuReleaseId:E.inCreation._id,releases:E.notCurrentReleases,releasesLoading:j,documentType:C,fromRelease:(0,h.QXs)(E.inCreation._id),releaseState:E.inCreation.state,isVersion:!0}}),k&&(null===(p=E.currentReleases)||void 0===p?void 0:p.map(e=>(0,a.jsx)(h.tyD,{tooltipContent:(0,a.jsx)(oj,{release:e}),...D(e),onClick:A((0,h.QXs)(e._id)),text:e.metadata.title||v("release.placeholder-untitled-release"),tone:(0,h.Ydd)(e),locked:(0,h.$NU)(e),contextValues:{documentId:(null==k?void 0:k._id)||"",menuReleaseId:e._id,releases:E.notCurrentReleases,releasesLoading:j,documentType:C,fromRelease:(0,h.QXs)(e._id),releaseState:e.state,isVersion:!0}},e._id)))]})}),ok=(0,x.zo)(d.Zb)(e=>{let t=(0,ey.aQ)(e.theme);return(0,x.iv)(tn(),e.$showGradient&&(0,x.iv)(tt(),(0,ey.m4)(t.color.bg,0)))}),oC=(0,u.memo)((0,u.forwardRef)(function(e,t){let{menuItems:n}=e,{actions:i,editState:l,onMenuAction:c,isInitialValueLoading:p,onPaneClose:f,onPaneSplit:v,menuItemGroups:x,schemaType:g,connectionState:b,views:y,unstable_languageFilter:j}=iT(),{features:_}=iN(),{index:w,BackLink:k,hasGroupSiblings:C}=t0(),{actions:S}=(0,h.qGk)(),[z,E]=(0,u.useState)(null),I=(0,u.useRef)(null),P=function(e){let t,n;let i=(0,s.c)(4),[l,o]=(0,u.useState)(!1);return i[0]!==e.current?(t=()=>{let t=()=>{let t=e.current;if(!t)return;let{scrollWidth:n,clientWidth:i}=t;if(!(n>i)){o(!1);return}let{scrollLeft:l}=t;o(!(l+i>=n))},{intersectionObserver:n,mutationObserver:i}=function(){t();let n=e.current;if(!n)return{intersectionObserver:null,mutationObserver:null};let i=new IntersectionObserver(e=>{let t=e[0];t&&o(!t.isIntersecting)}),l=()=>{i.disconnect();let e=n.children[n.children.length-1];i.observe(e)};l();let r=new MutationObserver(()=>{l(),t()});return r.observe(n,{childList:!0,subtree:!1}),{intersectionObserver:i,mutationObserver:r}}();return()=>{null==n||n.disconnect(),null==i||i.disconnect()}},i[0]=e.current,i[1]=t):t=i[1],i[2]!==e?(n=[e],i[2]=e,i[3]=n):n=i[3],(0,u.useEffect)(t,n),l}(I),A=(0,u.useMemo)(()=>(null!=i?i:[]).filter(e=>!og(e)),[i]),T=(0,u.useMemo)(()=>nG({actionHandler:c,fieldActions:S,menuItems:n,menuItemGroups:x}),[c,S,x,n]),R=(0,u.useMemo)(()=>T.filter(n$),[T]),M=(0,u.useMemo)(()=>T.filter(nV),[T]),{collapsed:D,isLast:L}=np(),N=_.splitViews&&v&&y.length>1,O=N&&C,U=_.backButton&&w>0,B=!O&&!U&&!!k,{t:$}=(0,h.$G7)(o.UA),V=(0,u.useCallback)(e=>{let{states:t}=e;return(0,a.jsx)(oS,{contextMenuNodes:M,setReferenceElement:E,referenceElement:z,states:t})},[M,z]),G=(0,u.useMemo)(()=>(0,a.jsx)(lV,{}),[]),F=(0,u.useMemo)(()=>U&&(0,a.jsx)(r.zx,{as:k,"data-as":"a",icon:m.Y4O,mode:"bleed",tooltipProps:{content:$("pane-header.back-button.text")}}),[k,U,$]),K=(0,u.useMemo)(()=>(0,a.jsxs)(d.kC,{align:"center",gap:1,children:[j.length>0&&(0,a.jsx)(a.Fragment,{children:j.map((e,t)=>(0,a.jsx)(e,{schemaType:g},"language-filter-".concat(t)))}),R.map(e=>(0,a.jsx)(nR,{node:e},e.key)),l&&(0,a.jsx)(n5,{actions:A,actionProps:{...l,initialValueResolved:!p},group:"paneActions",children:V}),N&&(0,a.jsx)(r.zx,{"aria-label":$("buttons.split-pane-button.aria-label"),icon:m.iro,mode:"bleed",onClick:v,tooltipProps:{content:$("buttons.split-pane-button.tooltip")}},"split-pane-button"),O&&(0,a.jsx)(r.zx,{icon:m.Two,mode:"bleed",onClick:f,tooltipProps:{content:$("buttons.split-pane-close-button.title")}},"close-view-button"),B&&(0,a.jsx)(r.zx,{icon:m.Two,mode:"bleed",tooltipProps:{content:$("buttons.split-pane-close-group-button.title")},as:k},"close-view-button")]}),[k,A,l,p,R,f,v,V,g,B,N,O,$,j]);return(0,a.jsx)(r.uE,{children:D?(0,a.jsx)(nA,{border:!0,ref:t,loading:"connecting"===b&&!(null==l?void 0:l.draft)&&!(null==l?void 0:l.published),title:G,tabIndex:L&&!D?-1:0,backButton:F}):(0,a.jsx)(d.Zb,{hidden:D,style:{lineHeight:0},borderBottom:!0,children:(0,a.jsxs)(d.kC,{gap:3,paddingY:3,children:[(0,a.jsx)(ok,{$showGradient:P,children:(0,a.jsx)(d.kC,{flex:1,gap:1,overflow:"auto",paddingX:3,"data-testid":"document-perspective-list",ref:I,children:(0,a.jsx)(ow,{})})}),(0,a.jsx)(d.xu,{flex:"none",paddingRight:3,children:K})]})})})})),oS=(0,u.memo)(function(e){let t;let n=(0,s.c)(5),{setReferenceElement:i,referenceElement:l,contextMenuNodes:o}=e,r=(0,u.useDeferredValue)(e.states);return n[0]!==o||n[1]!==l||n[2]!==i||n[3]!==r?(t=(0,a.jsx)(oz,{setReferenceElement:i,referenceElement:l,contextMenuNodes:o,states:r}),n[0]=o,n[1]=l,n[2]=i,n[3]=r,n[4]=t):t=n[4],t}),oz=(0,u.memo)(function(e){let t,n;let i=(0,s.c)(8),{states:l,setReferenceElement:o,contextMenuNodes:r,referenceElement:d}=e;i[0]!==r||i[1]!==o||i[2]!==l?(t=e=>{let{handleAction:t}=e;return(0,a.jsx)("div",{ref:o,children:(0,a.jsx)(n_,{nodes:r,actionsNodes:l.length>0?l.map((e,n)=>(0,a.jsx)(l9,{actionState:e,disabled:!!e.disabled,index:n,onAction:t},e.label)):void 0},"context-menu")})},i[0]=r,i[1]=o,i[2]=l,i[3]=t):t=i[3];let c=t;return i[4]!==d||i[5]!==c||i[6]!==l?(n=(0,a.jsx)(l7,{actionStates:l,referenceElement:d,children:c}),i[4]=d,i[5]=c,i[6]=l,i[7]=n):n=i[7],n});function oE(e){let t,n;let i=(0,s.c)(3),{size:l}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={pointerEvents:"none",visibility:"hidden",width:0},i[0]=t):t=i[0],i[1]!==l?(n=(0,a.jsx)(r.zx,{"aria-hidden":!0,disabled:!0,size:l,style:t,text:"-"}),i[1]=l,i[2]=n):n=i[2],n}let oI={primary:"primary",success:"positive",warning:"caution",danger:"critical"},oP=(0,u.memo)(function(e){let t,n;let i=(0,s.c)(4),{states:l}=e;return 0===l.length?null:(i[0]!==l?(t=l.map(oM),i[0]=l,i[1]=t):t=i[1],i[2]!==t?(n=(0,a.jsx)(d.gF,{space:1,children:t}),i[2]=t,i[3]=n):n=i[3],n)}),oA=(0,u.memo)(function(e){let t;let n=(0,s.c)(2),i=(0,u.useDeferredValue)(e.states);return n[0]!==i?(t=(0,a.jsx)(oP,{states:i}),n[0]=i,n[1]=t):t=n[1],t});function oT(){let e;let t=(0,s.c)(3),{badges:n,editState:i}=iT();return i&&n?(t[0]!==n||t[1]!==i?(e=(0,a.jsx)(n8,{badges:n,badgeProps:i,children:oR}),t[0]=n,t[1]=i,t[2]=e):e=t[2],e):null}function oR(e){let{states:t}=e;return(0,a.jsx)(oA,{states:t})}function oM(e,t){return(0,a.jsx)(r.u,{content:e.title,disabled:!e.title,placement:"top",portal:!0,children:(0,a.jsx)(d.Ct,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:e.color?oI[e.color]:void 0,style:{whiteSpace:"nowrap"},children:e.label})},"".concat(e.label,"-").concat(t))}let oD={create:m.dtP,delete:m.XHJ,discardDraft:m.Two,initial:m.dtP,editDraft:m.dY8,editLive:m.dY8,publish:m.EI4,unpublish:m.xEY},oL=(0,x.zo)(m.wyc)(ti());function oN(e){let t,n,i,l,d;let c=(0,s.c)(14),{isExpanded:u,onExpand:p}=e,{t:m}=(0,h.$G7)(o.UA);c[0]!==u||c[1]!==p?(t=e=>{e.stopPropagation(),function(e){if(e)return;let t=document.getElementById(oQ);if(t){let e=t.children[0];if(!(e.scrollHeight>e.clientHeight)){let t=getComputedStyle(e).overflowY;e.style.overflowY="hidden",setTimeout(()=>{e.style.overflowY=t},0)}}}(u),p()},c[0]=u,c[1]=p,c[2]=t):t=c[2];let f=t;return c[3]!==u?(n=(0,a.jsx)(oL,{"data-expanded":u}),c[3]=u,c[4]=n):n=c[4],c[5]!==u||c[6]!==m?(i=m(u?"timeline-item.menu.action-collapse":"timeline-item.menu.action-expand"),c[5]=u,c[6]=m,c[7]=i):i=c[7],c[8]!==i?(l={content:i},c[8]=i,c[9]=l):l=c[9],c[10]!==f||c[11]!==n||c[12]!==l?(d=(0,a.jsx)(r.zx,{mode:"bleed",icon:n,tooltipProps:l,onClick:f}),c[10]=f,c[11]=n,c[12]=l,c[13]=d):d=c[13],d}let oO=(0,x.zo)(d.Kq)(tl()),oU=(0,x.zo)(d.kC)(to(),e=>e.$maxHeight),oB=(0,x.zo)(d.xu)(e=>{let{$visible:t}=e;return(0,x.iv)(ta(),t&&(0,x.iv)(tr()))}),o$={initial:"timeline.operation.created-initial",create:"timeline.operation.created",publish:"timeline.operation.published",editLive:"timeline.operation.edited-live",editDraft:"timeline.operation.edited-draft",unpublish:"timeline.operation.unpublished",discardDraft:"timeline.operation.draft-discarded",delete:"timeline.operation.deleted"};function oV(e){let t,n;let i=(0,s.c)(9),{maxLength:l,userIds:o,size:r,withTooltip:c}=e,u=void 0===c||c;if(i[0]!==o||i[1]!==u){let e;i[3]!==u?(e=e=>(0,a.jsx)(h.YtX,{user:e,withTooltip:u},e),i[3]=u,i[4]=e):e=i[4],t=o.map(e),i[0]=o,i[1]=u,i[2]=t}else t=i[2];return i[5]!==l||i[6]!==r||i[7]!==t?(n=(0,a.jsx)(d.Jh,{maxLength:l,size:r,children:t}),i[5]=l,i[6]=r,i[7]=t,i[8]=n):n=i[8],n}let oG=(0,x.zo)(d.kC)(e=>{let t=(0,ey.aQ)(e.theme),n=e.$color;return(0,x.iv)(ts(),t.color.avatar[n].fg,t.color.avatar[n].bg,t.avatar.sizes[0].size,t.avatar.sizes[0].size)}),oF={initial:"blue",create:"blue",publish:"green",editLive:"green",editDraft:"yellow",unpublish:"orange",discardDraft:"orange",delete:"red",withinSelection:"magenta"},oK={minimal:!0,useTemporalPhrase:!0},oW=(0,x.zo)(c.Od)(e=>{let t=(0,ey.aQ)(e.theme);return(0,x.iv)(td(),t.font.text.sizes[0].lineHeight)}),oX=e=>{let t,n,i;let l=(0,s.c)(10),{userId:o}=e,[r,c]=(0,h.aFb)(o);return l[0]!==c||l[1]!==r?(t=(0,a.jsx)(d.xu,{children:c||!r?(0,a.jsx)(h.ZGG,{animated:!0}):(0,a.jsx)(h.YtX,{user:r})}),l[0]=c,l[1]=r,l[2]=t):t=l[2],l[3]!==c||l[4]!==r?(n=(0,a.jsx)(d.xu,{children:!c&&(null==r?void 0:r.displayName)?(0,a.jsx)(d.xv,{muted:!0,size:1,children:r.displayName}):(0,a.jsx)(d.xv,{size:1,children:(0,a.jsx)(oW,{animated:!0})})}),l[3]=c,l[4]=r,l[5]=n):n=l[5],l[6]!==t||l[7]!==n||l[8]!==o?(i=(0,a.jsxs)(d.kC,{align:"center",gap:2,padding:1,children:[t,n]},o),l[6]=t,l[7]=n,l[8]=o,l[9]=i):i=l[9],i},oH=e=>{let t,n,i,l;let o=(0,s.c)(9),{collaborators:r}=e,{t:c}=(0,h.$G7)("studio");return o[0]!==c?(t=c("timeline.changes.title"),o[0]=c,o[1]=t):t=o[1],o[2]!==t?(n=(0,a.jsx)(d.xu,{padding:1,paddingBottom:2,children:(0,a.jsx)(d.xv,{size:1,weight:"medium",children:t})}),o[2]=t,o[3]=n):n=o[3],o[4]!==r?(i=r.map(oY),o[4]=r,o[5]=i):i=o[5],o[6]!==n||o[7]!==i?(l=(0,a.jsxs)(d.Kq,{paddingBottom:1,children:[n,i]}),o[6]=n,o[7]=i,o[8]=l):l=o[8],l};function oq(e){let t,n,i,l,o,c,u,p,m,f,v,x,g,b,y,j,_,w,k,C,S,z;let E=(0,s.c)(55),{chunk:I,isSelected:P,onSelect:A,collaborators:T,optionsMenu:R}=e,{t:M}=(0,h.$G7)("studio"),{type:D,endTimestamp:L}=I;E[0]!==D?(t=oD[D],E[0]=D,E[1]=t):t=E[1];let N=t;E[2]!==I.authors?(n=Array.from(I.authors),E[2]=I.authors,E[3]=n):n=E[3];let O=n;E[4]!==T?(i=T?Array.from(T):[],E[4]=T,E[5]=i):i=E[5];let U=i,B="delete"!==D;E[6]===Symbol.for("react.memo_cache_sentinel")?(l={dateStyle:"medium",timeStyle:"short"},E[6]=l):l=E[6];let $=(0,h.P9l)(l);E[7]!==L?(o=new Date(L),E[7]=L,E[8]=o):o=E[8];let V=(0,h.ofl)(o||"",oK);if(E[9]!==$||E[10]!==L){let e=new Date(L);u=$.format(e),E[9]=$,E[10]=L,E[11]=u}else u=E[11];c=u,E[12]!==I||E[13]!==B||E[14]!==A?(p=e=>{e.preventDefault(),e.stopPropagation(),B&&A(I)},E[12]=I,E[13]=B,E[14]=A,E[15]=p):p=E[15];let G=p;E[16]===Symbol.for("react.memo_cache_sentinel")?(m={position:"relative"},E[16]=m):m=E[16],E[17]!==O?(f=(0,a.jsx)(oV,{maxLength:3,userIds:O,size:2}),E[17]=O,E[18]=f):f=E[18];let F=oF[D];return E[19]!==N?(v=N&&(0,a.jsx)(N,{}),E[19]=N,E[20]=v):v=E[20],E[21]!==v?(x=(0,a.jsx)(d.xv,{size:0,children:v}),E[21]=v,E[22]=x):x=E[22],E[23]!==F||E[24]!==x?(g=(0,a.jsx)(oG,{align:"center",justify:"center",$color:F,children:x}),E[23]=F,E[24]=x,E[25]=g):g=E[25],E[26]!==f||E[27]!==g?(b=(0,a.jsxs)("div",{style:m,children:[f,g]}),E[26]=f,E[27]=g,E[28]=b):b=E[28],E[29]!==M||E[30]!==D?(y=M(o$[D])||(0,a.jsx)("code",{children:D}),E[29]=M,E[30]=D,E[31]=y):y=E[31],E[32]!==y?(j=(0,a.jsx)(d.xv,{size:1,weight:"medium",children:y}),E[32]=y,E[33]=j):j=E[33],E[34]!==c||E[35]!==L||E[36]!==V?(_=(0,a.jsx)(d.xv,{as:"time",size:1,muted:!0,dateTime:L,title:c,children:V}),E[34]=c,E[35]=L,E[36]=V,E[37]=_):_=E[37],E[38]!==j||E[39]!==_?(w=(0,a.jsxs)(d.Kq,{space:2,children:[j,_]}),E[38]=j,E[39]=_,E[40]=w):w=E[40],E[41]!==U?(k=U.length>0&&(0,a.jsx)(d.kC,{flex:1,justify:"flex-end",align:"center",children:(0,a.jsx)(r.u,{placement:"top",content:(0,a.jsx)(oH,{collaborators:U}),portal:!0,children:(0,a.jsx)(d.xu,{paddingLeft:2,paddingY:2,children:(0,a.jsx)(oV,{maxLength:3,userIds:U,size:0,withTooltip:!1})})})}),E[41]=U,E[42]=k):k=E[42],E[43]!==b||E[44]!==w||E[45]!==k?(C=(0,a.jsxs)(d.kC,{align:"center",gap:3,children:[b,w,k]}),E[43]=b,E[44]=w,E[45]=k,E[46]=C):C=E[46],E[47]!==I.id||E[48]!==G||E[49]!==P||E[50]!==C?(S=(0,a.jsx)(d.Zb,{as:"button",onClick:G,padding:2,pressed:P,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-id":I.id,children:C}),E[47]=I.id,E[48]=G,E[49]=P,E[50]=C,E[51]=S):S=E[51],E[52]!==R||E[53]!==S?(z=(0,a.jsxs)(d.kC,{align:"center",gap:1,children:[S,R]}),E[52]=R,E[53]=S,E[54]=z):z=E[54],z}function oY(e){return(0,a.jsx)(oX,{userId:e},e)}let oZ=e=>"publish"!==e.type,oJ=e=>"publish"===e.type,oQ="timeline-list-wrapper",o0=e=>{let{chunks:t,hasMoreChunks:n,lastChunk:i,onLoadMore:l,onSelect:o,listMaxHeight:r="calc(100vh - 280px)"}=e,[s,c]=(0,u.useState)(!1),{t:p}=(0,h.$G7)("studio"),m=null==i?void 0:i.id,f=(0,u.useMemo)(()=>(function(e){let t=[];for(let n of e){if(oJ(n)){t.push({...n,type:"publish",children:[],collaborators:new Set});continue}if(oZ(n)){let e=function(e){let t=null;for(let n=e.length-1;n>=0;n--){let i=e[n];if(oJ(i)){t=i;break}if("editDraft"!==i.type)break}return t}(t);if("editDraft"===n.type&&(null==e?void 0:e.type)==="publish"){Array.from(n.authors).forEach(t=>{e.collaborators.add(t)}),e.children.push(n.id),t.push({...n,parentId:e.id});continue}}oZ(n)&&t.push(n)}return t})(t),[t]),[v,x]=(0,u.useState)(()=>{if(m){let e=f.find(e=>e.id===m);if(e&&oZ(e)&&e.parentId)return new Set([e.parentId])}return new Set});(0,u.useEffect)(()=>{if(m){let e=f.find(e=>e.id===m);if(e&&oZ(e)&&e.parentId){let t=e.parentId;x(e=>{if(e.has(t))return e;let n=new Set(e);return n.add(t),n})}}},[f,m]);let g=(0,u.useMemo)(()=>f.filter(e=>!!oJ(e)||!e.parentId||v.has(e.parentId)),[f,v]);(0,u.useEffect)(()=>{g.length<16&&n&&l()},[g,n,l]);let b=(0,u.useCallback)(e=>()=>x(t=>{let n=new Set(t);return t.has(e)?n.delete(e):n.add(e),n}),[]),y=(0,u.useMemo)(()=>m?g.findIndex(e=>e.id===m):-1,[m,g]),j=(0,u.useCallback)(e=>{let n=t.find(t=>t.id===e.id);n?o(n):(console.error("TimelineItem: chunk not found"),o(e))},[t,o]),_=(0,u.useCallback)((e,t)=>{let{activeIndex:i}=t;return(0,a.jsxs)(d.xu,{paddingBottom:1,paddingTop:0===i?1:0,paddingRight:1,paddingLeft:oZ(e)&&e.parentId?4:1,children:[(0,a.jsx)(oq,{chunk:e,isSelected:m===e.id,onSelect:j,collaborators:oJ(e)?e.collaborators:void 0,optionsMenu:oJ(e)&&e.children.length>0?(0,a.jsx)(oN,{isExpanded:v.has(e.id),onExpand:b(e.id)}):null}),i===g.length-1&&n&&(0,a.jsx)(h.Bwn,{})]})},[v,g.length,b,j,n,m]);return(0,u.useEffect)(()=>c(!0),[]),(0,a.jsxs)(oB,{$visible:!y||s,"data-ui":"timeline",children:[0===g.length&&(0,a.jsxs)(oO,{padding:3,space:3,children:[(0,a.jsx)(d.xv,{size:1,weight:"medium",children:p("timeline.error.no-document-history-title")}),(0,a.jsx)(d.xv,{muted:!0,size:1,children:p("timeline.error.no-document-history-description")})]}),g.length>0&&(0,a.jsx)(oU,{direction:"column",$maxHeight:r,id:oQ,children:(0,a.jsx)(h.e8h,{activeItemDataAttr:"data-hovered",ariaLabel:p("timeline.list.aria-label"),autoFocus:"list",initialIndex:y,initialScrollAlign:"center",itemHeight:57,items:g,onEndReached:l,onEndReachedIndexOffset:20,overscan:5,renderItem:_,wrapAround:!1})})]})};function o1(e){let t,n,i,l,o,r;let c=(0,s.c)(14),{versionError:u}=e,{t:p}=(0,h.$G7)("studio");return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(h.LPT,{tone:"critical",children:(0,a.jsx)(m.uIy,{})}),c[0]=t):t=c[0],c[1]!==p||c[2]!==u?(n=p(u?"timeline.error.load-document-changes-version-title":"timeline.error.load-document-changes-title"),c[1]=p,c[2]=u,c[3]=n):n=c[3],c[4]!==n?(i=(0,a.jsx)(h.LPT,{size:1,tone:"critical",weight:"medium",children:n}),c[4]=n,c[5]=i):i=c[5],c[6]!==p||c[7]!==u?(l=p(u?"timeline.error.load-document-changes-version-description":"timeline.error.load-document-changes-description"),c[6]=p,c[7]=u,c[8]=l):l=c[8],c[9]!==l?(o=(0,a.jsx)(h.LPT,{size:1,tone:"critical",children:l}),c[9]=l,c[10]=o):o=c[10],c[11]!==i||c[12]!==o?(r=(0,a.jsxs)(d.kC,{align:"flex-start",gap:3,padding:4,children:[t,(0,a.jsxs)(d.Kq,{space:4,children:[i,o]})]}),c[11]=i,c[12]=o,c[13]=r):r=c[13],r}o0.displayName="Timeline";let o2=(0,x.zo)(r.J2)(tc()),o3="timeline-menu";function o4(e){let{chunk:t,mode:n,placement:i}=e,{setTimelineRange:l,timelineError:o,ready:s,timelineStore:p}=iT(),[f,v]=(0,u.useState)(!1),[x,g]=(0,u.useState)(null),[b,y]=(0,u.useState)(null),j=(0,c.pm)(),_=(0,h.P08)(p,e=>e.chunks),w=(0,h.P08)(p,e=>e.isLoading),k=(0,h.P08)(p,e=>e.hasMoreChunks),C=(0,h.P08)(p,e=>e.realRevChunk),S=(0,h.P08)(p,e=>e.sinceTime),{t:z}=(0,h.$G7)("studio"),E=(0,u.useCallback)(()=>{v(!0)},[]),I=(0,u.useCallback)(()=>{v(!1)},[]),P=(0,u.useCallback)(e=>{f&&("Escape"===e.key||"Tab"===e.key)&&(I(),null==x||x.focus())},[x,I,f]);(0,d.qh)(P),(0,d.Of)(f&&I,()=>[x,b]);let A=(0,u.useCallback)(e=>{try{let[t,n]=(null==p?void 0:p.findRangeForRev(e))||[null,null];l(t,n)}catch(e){j.push({closable:!0,description:e.message,status:"error",title:z("timeline.error.unable-to-load-revision")})}},[l,z,p,j]),T=(0,u.useCallback)(e=>{try{let[t,n]=(null==p?void 0:p.findRangeForSince(e))||[null,null];l(t,n)}catch(e){j.push({closable:!0,description:e.message,status:"error",title:z("timeline.error.unable-to-load-revision")})}},[l,z,p,j]),R=(0,u.useCallback)(()=>{w||null==p||p.loadMore()},[w,p]),M=(0,u.useMemo)(()=>{if(o)return(0,a.jsx)(o1,{});if("rev"===n)return(0,a.jsx)(o0,{chunks:_,hasMoreChunks:k,lastChunk:C,onLoadMore:R,onSelect:A});let e=C?_.filter(e=>e.index<C.index):_;return(0,a.jsx)(o0,{chunks:e,hasMoreChunks:k,lastChunk:S,onLoadMore:R,onSelect:T})},[_,R,k,n,C,A,T,S,o]),D={timestamp:{dateStyle:"medium",timeStyle:"short"}},L=t?z(o$[t.type],{context:"timestamp",timestamp:new Date(null==t?void 0:t.endTimestamp),formatParams:D}):z("timeline.latest-revision"),N=t?z("timeline.since",{timestamp:new Date(null==t?void 0:t.endTimestamp),formatParams:D}):z("timeline.since-version-missing"),O="rev"===n?L:N;return(0,a.jsx)(d.Xp,{__unstable_elements:{[o3]:b},children:(0,a.jsx)(o2,{"data-testid":"timeline-menu",constrainSize:!0,content:f&&M,"data-ui":"versionMenu",open:f,placement:i,matchReferenceWidth:!0,portal:!0,ref:y,children:(0,a.jsx)(d.kC,{width:"fill",children:(0,a.jsx)(r.zx,{"data-testid":f?"timeline-menu-close-button":"timeline-menu-open-button",disabled:!s,mode:"ghost",onClick:f?I:E,ref:g,selected:f,width:"fill",tooltipProps:null,justify:"space-between",style:{maxWidth:"100%"},iconRight:m.v4q,text:s?O:z("timeline.loading-history")})})})})}let o5=(0,x.zo)(b.E.path)(tu()),o6=e=>{let t;let n=(0,s.c)(2);return n[0]!==e?(t=(0,a.jsx)(b.E.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...e}),n[0]=e,n[1]=t):t=n[1],t},o7=e=>{let t;let n=(0,s.c)(2);return n[0]!==e?(t=(0,a.jsx)(o5,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...e}),n[0]=e,n[1]=t):t=n[1],t},o8=e=>{let t;let n=(0,s.c)(2);return n[0]!==e?(t=(0,a.jsx)(b.E.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...e}),n[0]=e,n[1]=t):t=n[1],t},o9=(0,x.F4)(tp()),re=x.zo.g(tm(),o9),rt={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},rn={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},ri={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},rl={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}};function ro(e){let t,n,i,l,o;let r=(0,s.c)(13),{status:d}=e;if(!d)return null;let c="changes"===d?void 0:"";return r[0]!==d?(t=(0,a.jsx)(o7,{variants:ri,initial:d,animate:d}),n=(0,a.jsx)(o6,{variants:rn,initial:d,animate:d}),r[0]=d,r[1]=t,r[2]=n):(t=r[1],n=r[2]),r[3]!==c||r[4]!==t||r[5]!==n?(i=(0,a.jsxs)(re,{"data-rotate":c,children:[t,n]}),r[3]=c,r[4]=t,r[5]=n,r[6]=i):i=r[6],r[7]!==d?(l=(0,a.jsx)(o8,{variants:rl,initial:d,animate:d}),r[7]=d,r[8]=l):l=r[8],r[9]!==d||r[10]!==i||r[11]!==l?(o=(0,a.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"animated-status-icon",children:(0,a.jsxs)(b.E.g,{variants:rt,initial:d,animate:d,children:[i,l]})}),r[9]=d,r[10]=i,r[11]=l,r[12]=o):o=r[12],o}let rr={saved:{i18nKey:"status-bar.document-status-pulse.status.saved.text",tone:"positive"},syncing:{i18nKey:"status-bar.document-status-pulse.status.syncing.text",tone:"default"}},ra=e=>{let t,n,i,l,r;let c=(0,s.c)(13),{status:u}=e,{t:p}=(0,h.$G7)(o.UA);if("saved"!==u&&"syncing"!==u)return null;let m=rr[u];return c[0]!==u?(t=(0,a.jsx)(ro,{status:u}),c[0]=u,c[1]=t):t=c[1],c[2]!==m.tone||c[3]!==t?(n=(0,a.jsx)(h.LPT,{size:1,tone:m.tone,children:t}),c[2]=m.tone,c[3]=t,c[4]=n):n=c[4],c[5]!==m.i18nKey||c[6]!==p?(i=p(m.i18nKey),c[5]=m.i18nKey,c[6]=p,c[7]=i):i=c[7],c[8]!==i?(l=(0,a.jsx)(d.xv,{muted:!0,size:1,children:i}),c[8]=i,c[9]=l):l=c[9],c[10]!==n||c[11]!==l?(r=(0,a.jsxs)(d.kC,{align:"center",gap:2,"data-testid":"pane-footer-document-status-pulse",children:[n,l]}),c[10]=n,c[11]=l,c[12]=r):r=c[12],r},rs={minimal:!0,useTemporalPhrase:!0},rd=b.E.create(d.zx),rc=b.E.create(d.xu),ru=()=>{let e,t;let n=(0,s.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{style:{margin:-5},children:(0,a.jsx)(h.ZGG,{$size:0,animated:!0})}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsxs)(d.kC,{align:"center",gap:3,paddingLeft:1,paddingRight:2,paddingY:2,children:[e,(0,a.jsx)(c.Od,{animated:!0,style:{width:"80px",height:"15px"},radius:2})]}),n[1]=t):t=n[1],t},rp=e=>{let t,n,i,l,o,r,c,u;let p=(0,s.c)(17),{author:m,translationKey:f,timestamp:v}=e,{onHistoryOpen:x,inspector:g,onHistoryClose:b}=iT(),{t:y}=(0,h.$G7)(),j=(0,h.ofl)(void 0===v?"":v,rs);p[0]===Symbol.for("react.memo_cache_sentinel")?(t={opacity:1},n={opacity:0},i={opacity:0},p[0]=t,p[1]=n,p[2]=i):(t=p[0],n=p[1],i=p[2]);let _=(null==g?void 0:g.name)===i$?b:x;return p[3]!==m?(l=m&&(0,a.jsx)("div",{style:{margin:-5},children:(0,a.jsx)(h.YtX,{user:m,size:0})}),p[3]=m,p[4]=l):l=p[4],p[5]!==y||p[6]!==f?(o=y(f),p[5]=y,p[6]=f,p[7]=o):o=p[7],p[8]!==j||p[9]!==o?(r=(0,a.jsxs)(d.xv,{muted:!0,size:1,children:[o," ",j]}),p[8]=j,p[9]=o,p[10]=r):r=p[10],p[11]!==l||p[12]!==r?(c=(0,a.jsxs)(d.kC,{align:"center",flex:"none",gap:3,children:[l,r]}),p[11]=l,p[12]=r,p[13]=c):c=p[13],p[14]!==_||p[15]!==c?(u=(0,a.jsx)(rd,{"data-testid":"pane-footer-document-status",animate:t,initial:n,exit:i,mode:"bleed",onClick:_,padding:2,muted:!0,children:c}),p[14]=_,p[15]=c,p[16]=u):u=p[16],u},rm=()=>{var e,t,n,i,l;let{editState:o}=iT(),{selectedPerspective:r}=(0,h.Wc0)(),s=(0,u.useMemo)(()=>{var e,t,n,i,l,a,s;return(0,h.Vb0)(r)&&(null==o?void 0:null===(e=o.published)||void 0===e?void 0:e._updatedAt)?{translationKey:h.e9p.published.createDocumentVersion,timestamp:o.published._updatedAt}:(null==o?void 0:null===(t=o.version)||void 0===t?void 0:t._updatedAt)?{translationKey:(null==o?void 0:null===(n=o.version)||void 0===n?void 0:n._updatedAt)===(null==o?void 0:null===(i=o.version)||void 0===i?void 0:i._createdAt)?h.e9p.version.createDocumentVersion:h.e9p.version.editDocumentVersion,timestamp:o.version._updatedAt}:(null==o?void 0:null===(l=o.draft)||void 0===l?void 0:l._updatedAt)?{translationKey:(null==o?void 0:null===(a=o.draft)||void 0===a?void 0:a._updatedAt)===(null==o?void 0:null===(s=o.draft)||void 0===s?void 0:s._createdAt)?h.e9p.draft.createDocumentVersion:h.e9p.draft.editDocumentVersion,timestamp:o.draft._updatedAt}:null},[r,null==o?void 0:null===(e=o.published)||void 0===e?void 0:e._updatedAt,null==o?void 0:null===(t=o.version)||void 0===t?void 0:t._updatedAt,null==o?void 0:null===(n=o.version)||void 0===n?void 0:n._createdAt,null==o?void 0:null===(i=o.draft)||void 0===i?void 0:i._updatedAt,null==o?void 0:null===(l=o.draft)||void 0===l?void 0:l._createdAt]);return s?(0,a.jsx)(rp,{author:"",translationKey:s.translationKey,timestamp:s.timestamp}):null},rh=()=>{let e;let t=(0,s.c)(6),{events:n,loading:i}=(0,h.hIH)(),l=null==n?void 0:n[0];if(!l&&i){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(ru,{}),t[0]=e):e=t[0],e}if(!l){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(rm,{}),t[1]=e):e=t[1],e}let o=h.e9p[l.documentVariantType][l.type];return t[2]!==l.author||t[3]!==l.timestamp||t[4]!==o?(e=(0,a.jsx)(rp,{author:l.author,translationKey:o,timestamp:l.timestamp}),t[2]=l.author,t[3]=l.timestamp,t[4]=o,t[5]=e):e=t[5],e},rf=()=>{let e,t;let n=(0,s.c)(8),{timelineStore:i}=iT(),l=(0,h.P08)(i,rx),o=(0,h.P08)(i,rg),r=null==l?void 0:l[0];if(!r&&o){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(ru,{}),n[0]=e):e=n[0],e}if(!r){let e;return n[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(rm,{}),n[1]=e):e=n[1],e}n[2]!==r.authors?(e=Array.from(r.authors),n[2]=r.authors,n[3]=e):e=n[3];let d=e[0],c=o$[r.type];return n[4]!==d||n[5]!==r.endTimestamp||n[6]!==c?(t=(0,a.jsx)(rp,{author:d,translationKey:c,timestamp:r.endTimestamp}),n[4]=d,n[5]=r.endTimestamp,n[6]=c,n[7]=t):t=n[7],t};function rv(){var e,t;let n,i,l,o,r,d,c;let p=(0,s.c)(18),{documentId:m,documentType:f,editState:v,value:x}=iT(),[g,b]=(0,u.useState)(null),j=null===(t=(0,h.Lky)().beta)||void 0===t?void 0:null===(e=t.eventsAPI)||void 0===e?void 0:e.documents,_=(0,h.nuD)(m,f,null==v?void 0:v.release),w=null==x?void 0:x._updatedAt;return p[0]!==g||p[1]!==_.isSyncing?(n=()=>{if("syncing"===g&&!_.isSyncing){let e=setTimeout(()=>b("saved"),1e3);return()=>clearTimeout(e)}if("saved"===g){let e=setTimeout(()=>b(null),3e3);return()=>clearTimeout(e)}},p[0]=g,p[1]=_.isSyncing,p[2]=n):n=p[2],p[3]!==w||p[4]!==g||p[5]!==_.isSyncing?(i=[g,w,_.isSyncing],p[3]=w,p[4]=g,p[5]=_.isSyncing,p[6]=i):i=p[6],(0,u.useEffect)(n,i),p[7]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{b(null)},p[7]=l):l=p[7],p[8]!==m?(o=[m],p[8]=m,p[9]=o):o=p[9],(0,u.useLayoutEffect)(l,o),p[10]!==_.isSyncing?(r=()=>{_.isSyncing&&b("syncing")},p[10]=_.isSyncing,p[11]=r):r=p[11],p[12]!==w||p[13]!==_.isSyncing?(d=[_.isSyncing,w],p[12]=w,p[13]=_.isSyncing,p[14]=d):d=p[14],(0,u.useLayoutEffect)(r,d),p[15]!==j||p[16]!==g?(c=(0,a.jsx)(y.M,{children:g?(0,a.jsx)(rc,{paddingLeft:2,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},children:(0,a.jsx)(ra,{status:g||void 0})}):(0,a.jsx)(a.Fragment,{children:j?(0,a.jsx)(rh,{}):(0,a.jsx)(rf,{})})}),p[15]=j,p[16]=g,p[17]=c):c=p[17],c}function rx(e){return e.chunks}function rg(e){return e.isLoading}let rb=(0,x.zo)(d.xv)(th());function ry(){let e,t,n,i,l;let o=(0,s.c)(12),{displayed:r,revisionNotFound:c}=iT(),{t:u}=(0,h.$G7)(),p=(null==r?void 0:r._updatedAt)||(null==r?void 0:r._createdAt);o[0]!==p||o[1]!==u?(e=p?(0,a.jsx)(h.vNl,{t:u,i18nKey:"document-status.revision-from",values:{date:(0,eg.Z)(new Date(p),"MMM d, yyyy '@' pp")}}):null,o[0]=p,o[1]=u,o[2]=e):e=o[2],o[3]!==e?(t={name:"revision",text:e,tone:"caution"},o[3]=e,o[4]=t):t=o[4];let f=t;return o[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,a.jsx)(d.xu,{flex:"none",children:(0,a.jsx)(d.xv,{size:1,children:(0,a.jsx)(m.vaD,{})})}),o[5]=n):n=o[5],o[6]!==f||o[7]!==c||o[8]!==u?(i=c?(0,a.jsx)(h.vNl,{t:u,i18nKey:"document-status.revision-not-found"}):f.text,o[6]=f,o[7]=c,o[8]=u,o[9]=i):i=o[9],o[10]!==i?(l=(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(d.kC,{flex:1,gap:3,padding:2,children:[n,(0,a.jsx)(d.xu,{flex:1,children:(0,a.jsx)(rb,{size:1,textOverflow:"ellipsis",children:i})})]})}),o[10]=i,o[11]=l):l=o[11],l}let rj=b.E.create(d.Zb);function r_(e){var t;let n,i,l,o,r,c,p,m;let f=(0,s.c)(22),{actionsBoxRef:v,createLinkMetadata:x}=e,{editState:g,onChange:b,revisionNotFound:y}=iT(),{params:j}=t0(),_=void 0===j?iO:j,{selectedPerspective:w}=(0,h.Wc0)(),{title:k}=iG(),C=null===(t=(0,h.opE)().components)||void 0===t?void 0:t.documentLinkedActions,S=!!_.rev,[z,E]=(0,u.useState)(null),[I,P]=(0,u.useState)(null);f[0]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{E(e.contentRect.width<480)},f[0]=n):n=f[0];let A=n;f[1]!==I?(i={element:I,onResize:A},f[1]=I,f[2]=i):i=f[2],function(e){let t,n;let i=(0,s.c)(4),{element:l,onResize:o}=e;i[0]!==l||i[1]!==o?(t=()=>(l&&h.x$w.observe(l,o),()=>{l&&h.x$w.unobserve(l)}),n=[l,o],i[0]=l,i[1]=o,i[2]=t,i[3]=n):(t=i[2],n=i[3]),(0,u.useLayoutEffect)(t,n)}(i);e:{let e=!!((null==g?void 0:g.ready)&&"boolean"==typeof z);if(w){if((0,h.Vb0)(w)){l=e&&!!(null==g?void 0:g.published);break e}if((0,h._wt)(w)){l=e&&!!(null==g?void 0:g.version);break e}}l=e}let T=l;if(x&&(0,h.EM_)(x)&&C){let e;f[3]!==C||f[4]!==x||f[5]!==b||f[6]!==k?(e=(0,a.jsx)(C,{metadata:x,panelPortalElementId:lZ,onDocumentChange:b,documentTitle:k}),f[3]=C,f[4]=x,f[5]=b,f[6]=k,f[7]=e):e=f[7],o=e}else if(S){let e;f[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(ox,{}),f[8]=e):e=f[8],o=e}else{let e;f[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(ov,{}),f[9]=e):e=f[9],o=e}if(S&&y)return null;let R=S?"revision":"published";f[10]===Symbol.for("react.memo_cache_sentinel")?(r={opacity:.2},f[10]=r):r=f[10],f[11]===Symbol.for("react.memo_cache_sentinel")?(c={opacity:1,transition:{duration:.3}},f[11]=c):c=f[11];let M=S?"caution":void 0;return f[12]!==o||f[13]!==v||f[14]!==z||f[15]!==T||f[16]!==S?(p=T&&(0,a.jsxs)(d.kC,{align:"stretch",gap:1,justify:"space-between",paddingLeft:S?0:1,paddingRight:S?0:1,children:[(0,a.jsxs)(d.kC,{align:"center",flex:1,gap:z?2:3,wrap:"wrap",paddingRight:3,children:[(0,a.jsxs)(d.kC,{align:"center",children:[S?(0,a.jsx)(ry,{}):(0,a.jsx)(rv,{}),(0,a.jsx)(oE,{})]}),(0,a.jsx)(oT,{})]}),(0,a.jsxs)(d.kC,{align:"flex-start",justify:"flex-end",ref:v,style:{flexShrink:0,marginLeft:"auto"},children:[(0,a.jsx)(oE,{}),o]})]}),f[12]=o,f[13]=v,f[14]=z,f[15]=T,f[16]=S,f[17]=p):p=f[17],f[18]!==R||f[19]!==M||f[20]!==p?(m=(0,a.jsx)(rj,{initial:r,animate:c,tone:M,radius:3,ref:P,sizing:"border",padding:2,children:p},R),f[18]=R,f[19]=M,f[20]=p,f[21]=m):m=f[21],m}let rw=(0,u.memo)(function(e){let t,n,i,l,o,r,d,c,u,p,m,f,v;let x=(0,s.c)(26);x[0]!==e?({actionsBoxElement:t,activeIndex:n,as:p,children:i,id:l,onActionStart:o,onKeyDown:r,rootRef:c,states:u,...d}=e,x[0]=e,x[1]=t,x[2]=n,x[3]=i,x[4]=l,x[5]=o,x[6]=r,x[7]=d,x[8]=c,x[9]=u,x[10]=p):(t=x[1],n=x[2],i=x[3],l=x[4],o=x[5],r=x[6],d=x[7],c=x[8],u=x[9],p=x[10]);let g=void 0===p?"div":p,b=u[n];x[11]!==o||x[12]!==r||x[13]!==u?(m=e=>{let t=u.filter(t=>t.shortcut&&(0,ec.P6)(t.shortcut,e)),n=t[0];if(t.length>1&&console.warn('Keyboard shortcut conflict: More than one document action matches the shortcut "'.concat(n.shortcut,'"')),n&&!n.disabled&&n.onHandle){e.preventDefault(),n.onHandle(),o(u.indexOf(n));return}r&&r(e)},x[11]=o,x[12]=r,x[13]=u,x[14]=m):m=x[14];let y=m;return x[15]!==t||x[16]!==b?(f=b&&b.dialog&&(0,a.jsx)(h.jr5,{zOffset:"paneFooter",children:(0,a.jsx)(l6,{dialog:b.dialog,referenceElement:t})}),x[15]=t,x[16]=b,x[17]=f):f=x[17],x[18]!==g||x[19]!==i||x[20]!==y||x[21]!==l||x[22]!==d||x[23]!==c||x[24]!==f?(v=(0,a.jsxs)(g,{id:l,onKeyDown:y,tabIndex:-1,...d,ref:c,children:[i,f]}),x[18]=g,x[19]=i,x[20]=y,x[21]=l,x[22]=d,x[23]=c,x[24]=f,x[25]=v):v=x[25],v}),rk=(0,u.memo)(e=>{let t,n,i,l,o,r,d,c,p;let m=(0,s.c)(20);m[0]!==e?({actionsBoxElement:t,as:l,children:n,...i}=e,m[0]=e,m[1]=t,m[2]=n,m[3]=i,m[4]=l):(t=m[1],n=m[2],i=m[3],l=m[4]);let h=void 0===l?"div":l,{actions:f,editState:v,isInitialValueLoading:x,revisionId:g}=iT(),[b,y]=(0,u.useState)(-1);m[5]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{y(e)},m[5]=o):o=m[5];let j=o;m[6]!==v||m[7]!==x||m[8]!==g?(d=v&&{...v,onComplete:rC,revision:g||void 0,initialValueResolved:!x},m[6]=v,m[7]=x,m[8]=g,m[9]=d):d=m[9],r=d,m[10]!==t||m[11]!==b||m[12]!==h||m[13]!==n||m[14]!==i?(c=e=>{let{states:l}=e;return(0,a.jsx)(rw,{...i,activeIndex:b,actionsBoxElement:t,as:h,onActionStart:j,states:l,children:n})},m[10]=t,m[11]=b,m[12]=h,m[13]=n,m[14]=i,m[15]=c):c=m[15];let _=c;return r&&f?(m[16]!==r||m[17]!==f||m[18]!==_?(p=(0,a.jsx)(n5,{actionProps:r,actions:f,children:_}),m[16]=r,m[17]=f,m[18]=_,m[19]=p):p=m[19],p):null});function rC(){}function rS(e){let t,n,i,l,o,r,c;let u=(0,s.c)(23),{documentType:p,value:m,currentMinWidth:f,paneKey:v,minWidth:x}=e,{t:g}=(0,h.$G7)();return u[0]!==p?(t={documentType:p},u[0]=p,u[1]=t):t=u[1],u[2]!==g||u[3]!==t?(n=(0,a.jsx)(h.vNl,{t:g,i18nKey:"panes.document-pane.document-unknown-type.title",values:t}),u[2]=g,u[3]=t,u[4]=n):n=u[4],u[5]!==p||u[6]!==g?(i=p&&(0,a.jsx)(d.xv,{as:"p",children:(0,a.jsx)(h.vNl,{t:g,i18nKey:"panes.document-pane.document-unknown-type.text",values:{documentType:p}})}),u[5]=p,u[6]=g,u[7]=i):i=u[7],u[8]!==p||u[9]!==g?(l=!p&&(0,a.jsx)(d.xv,{as:"p",children:g("panes.document-pane.document-unknown-type.without-schema.text")}),u[8]=p,u[9]=g,u[10]=l):l=u[10],u[11]!==m?(o=h.r8Q&&m&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.xv,{as:"p",children:"Here is the JSON representation of the document:"}),(0,a.jsx)(d.Zb,{padding:3,overflow:"auto",radius:2,shadow:1,tone:"inherit",children:(0,a.jsx)(d.EK,{language:"json",size:[1,1,2],children:JSON.stringify(m,null,2)})})]}),u[11]=m,u[12]=o):o=u[12],u[13]!==i||u[14]!==l||u[15]!==o?(r=(0,a.jsxs)(d.Kq,{space:4,children:[i,l,o]}),u[13]=i,u[14]=l,u[15]=o,u[16]=r):r=u[16],u[17]!==f||u[18]!==x||u[19]!==v||u[20]!==n||u[21]!==r?(c=(0,a.jsx)(iE,{currentMinWidth:f,flex:2.5,minWidth:x,paneKey:v,title:n,tone:"caution",children:r}),u[17]=f,u[18]=x,u[19]=v,u[20]=n,u[21]=r,u[22]=c):c=u[22],c}rk.displayName="Memo(DocumentActionShortcuts)";let rz=["fixed","fixed","absolute"];function rE(e){let t,n,i,l,o,u,p;let m=(0,s.c)(16),{documentPanelPortalElement:f,setFooterElement:v,setActionsBoxElement:x}=e,g=(0,h.Cnp)(),{value:b}=iT();m[0]!==f?(n={[lZ]:f},m[0]=f,m[1]=n):n=m[1],t=n,m[2]!==b?(i=(0,h.xaJ)(b),m[2]=b,m[3]=i):i=m[3];let y=i;return m[4]!==y||m[5]!==x?(l=(0,a.jsx)(r.uE,{children:(0,a.jsx)(r_,{actionsBoxRef:x,createLinkMetadata:y})}),m[4]=y,m[5]=x,m[6]=l):l=m[6],m[7]!==v||m[8]!==l?(o=(0,a.jsx)(nC,{ref:v,padding:1,children:l}),m[7]=v,m[8]=l,m[9]=o):o=m[9],m[10]!==o||m[11]!==g.portal?(u=(0,a.jsx)(c.Tu,{position:rz,zOffset:g.portal,children:o}),m[10]=o,m[11]=g.portal,m[12]=u):u=m[12],m[13]!==t||m[14]!==u?(p=(0,a.jsx)(d.Xp,{__unstable_elements:t,children:u}),m[13]=t,m[14]=u,m[15]=p):p=m[15],p}let rI=[],rP=["fixed","fixed","absolute"],rA=(0,x.zo)(h.jbM)(tf());function rT(){let{changesOpen:e,displayed:t,documentId:n,documentType:i,editState:l,fieldActions:r,focusPath:s,inspectOpen:p,inspector:f,inspectors:v,onFocus:x,onHistoryOpen:g,onMenuAction:b,onPathOpen:y,paneKey:j,schemaType:_,value:w,previewUrl:k}=iT(),{params:C}=t0(),{features:S}=iN(),{t:z}=(0,h.$G7)(o.UA),{collapsed:E}=tY(),I=(0,h.Cnp)(),[P,A]=(0,u.useState)(null),[T,R]=(0,u.useState)(null),[M,D]=(0,u.useState)(null),[L,N]=(0,u.useState)(null),[O,U]=(0,u.useState)(null);(0,h.LxO)({element:P,focusPath:s,value:w});let[B,$]=(0,u.useState)([]),[V,G]=(0,u.useState)([]),F=(0,c.XL)(T),K=(0,c.XL)(M),W=null==F?void 0:F.height,X=null==K?void 0:K.height,H=600+(f?320:0),q=320+(f?320:0),Y=(0,u.useMemo)(()=>null==v?void 0:v.find(e=>e.name===(null==f?void 0:f.name)),[v,null==f?void 0:f.name]),Z=iL({displayed:t,documentId:n,editState:l}),J=!!w,Q=(0,u.useMemo)(()=>(function(e){let t=function(e){let{currentInspector:t,hasValue:n,inspectors:i,inspectorMenuItems:l}=e;return i.map((e,i)=>{var o;let r=l[i];return!r||r.hidden?null:{action:"".concat(iU).concat(e.name),group:r.showAsAction?void 0:"inspectors",icon:r.icon,disabled:!n,selected:(null==t?void 0:t.name)===e.name,shortcut:null===(o=r.hotkeys)||void 0===o?void 0:o.join("+"),showAsAction:r.showAsAction,title:r.title,tone:r.tone}}).filter(Boolean)}(e),n=[function(e){let{previewUrl:t,t:n}=e;return t?{action:"production-preview",group:"links",title:n("production-preview.menu-item.title"),icon:m.YE8,shortcut:"Ctrl+Alt+O"}:null}(e),function(e){let{documentIdStack:t,t:n}=e,i=typeof(null==t?void 0:t.previousId)>"u"&&{reason:n("compare-versions.menu-item.disabled-reason")};return{action:"compareVersions",group:"inspectors",title:n("compare-versions.menu-item.title"),icon:m.lAt,disabled:i}}(e)].filter(Boolean);return[{action:"copy-document-url",showAsAction:!0,title:e.t("action.copy-document-url.label"),icon:m.xPt},...t,function(e){let{hasValue:t,t:n}=e;return{action:"inspect",group:"inspectors",title:n("document-inspector.menu-item.title"),icon:m.Pr8,disabled:!t,shortcut:"Ctrl+Alt+I"}}(e),...n]})({currentInspector:Y,features:S,hasValue:J,inspectorMenuItems:B,inspectors:v,previewUrl:k,documentIdStack:Z,t:z}),[Y,Z,S,J,B,v,k,z]),ee=(0,u.useCallback)(e=>{for(let t of Q)if(t.shortcut&&(0,ec.P6)(t.shortcut,e)){e.preventDefault(),e.stopPropagation(),b(t);return}},[b,Q]),et=(0,u.useCallback)(e=>{y(e),x(e)},[y,x]);return _?(0,a.jsxs)(h.iWf,{value:w,children:[v.length>0&&(0,a.jsx)(iV,{documentId:n,documentType:i,inspectors:v,onMenuItems:$}),r.length>0&&_&&(0,a.jsx)(h.QMc,{actions:r,documentId:n,documentType:i,onActions:G,path:rI,schemaType:_}),(0,a.jsx)(h.kNp,{actions:V,path:rI,children:(0,a.jsxs)(rk,{actionsBoxElement:L,as:nc,currentMinWidth:H,"data-testid":"document-pane",flex:2.5,id:j,minWidth:q,onKeyUp:ee,rootRef:A,children:[(0,a.jsx)(oC,{ref:D,menuItems:Q}),(0,a.jsx)(c.Tu,{position:rP,zOffset:I.paneDialog,children:(0,a.jsx)(d.kC,{direction:"column",flex:1,height:E?void 0:"fill",children:(0,a.jsx)(rA,{"data-testid":"change-connector-root",isReviewChangesOpen:e&&(null==C?void 0:C.changesInspectorTab)==="review",onOpenReviewChanges:g,onSetFocus:et,children:(0,a.jsx)(lX,{footerHeight:W||null,headerHeight:X||null,isInspectOpen:p,rootElement:P,setDocumentPanelPortalElement:U,footer:(0,a.jsx)(rE,{documentPanelPortalElement:O,setFooterElement:R,setActionsBoxElement:N})})})})}),(0,a.jsx)(iK,{})]})})]}):(0,a.jsx)(rS,{currentMinWidth:H,documentType:i,minWidth:q,paneKey:j,value:w})}let rR=(0,eh.dS)({name:"DocumentURLCopied",version:1,description:"User copied document URL to clipboard"}),rM=e=>{let t,n;let i=(0,s.c)(13),{paneOptions:l,documentType:o,documentId:r,params:a}=e,d=(0,h.zEW)(),c=t0(),u=(0,h.BoV)(c.payload);i[0]!==o||i[1]!==l.template||i[2]!==l.templateParameters||i[3]!==u||i[4]!==a.template||i[5]!==d?(t=function(e,t){let n=t.panePayload||{},i=t.templateName;t.urlTemplate&&i&&i!==t.urlTemplate&&console.warn('Conflicting templates: URL says "'.concat(t.urlTemplate,'", structure node says "').concat(i,'". Using "').concat(i,'".'));let l=i||t.urlTemplate,o=e.filter(e=>e.schemaType===t.documentType),r={...t.templateParams,..."object"==typeof n&&n||{}},a=l;return l||1!==o.length||(a=o[0].id),{templateName:a,templateParams:r}}(d,{documentType:o,templateName:l.template,templateParams:l.templateParameters,panePayload:u,urlTemplate:a.template}),i[0]=o,i[1]=l.template,i[2]=l.templateParameters,i[3]=u,i[4]=a.template,i[5]=d,i[6]=t):t=i[6];let{templateName:p,templateParams:m}=t;i[7]!==r||i[8]!==o||i[9]!==a.version||i[10]!==p||i[11]!==m?(n={documentId:r,documentType:o,templateName:p,templateParams:m,version:a.version},i[7]=r,i[8]=o,i[9]=a.version,i[10]=p,i[11]=m,i[12]=n):n=i[12];let f=(0,h.t2O)(n);return(0,h.BoV)(f)},rD=e=>(0,h.Uy$)(e)&&"string"==typeof e._id&&"string"==typeof e._type;function rL(e){let t=(0,h.Uy$)(e)&&"string"==typeof e.message?e.message:"Unknown error";throw Error("An error was thrown while trying to get your preview url: ".concat(t))}let rN=(0,u.memo)(e=>{let{children:t,index:n,pane:i,paneKey:l,onFocusPath:r,forcedVersion:d,historyStore:m}=e,{store:f,error:v,ready:x,revisionDocument:g,onOlderRevision:b,sinceDocument:y,isPristine:_,revisionId:C,lastNonDeletedRevId:S}=m,z=(0,h.I_y)(),{setDocumentMeta:I}=(0,h.ooN)(),{document:{actions:A,badges:T,unstable_fieldActions:R,unstable_languageFilter:M,drafts:{enabled:L}}}=(0,h.Lky)(),N=(0,em.f1)(),B=t0(),$=B.setParams,{push:V}=(0,c.pm)(),{options:G,menuItemGroups:F=iB,title:K=null,views:W=[]}=i,X=(0,h.BoV)(G),H=X.id,q=(0,h.vsM)(H),Y=G.type,Z=(0,h.BoV)(B.params)||iO,{buildStudioUrl:J}=(0,h.cx5)(),Q=(0,h.Wc0)(),{document:{drafts:{enabled:ee}}}=(0,h.cFj)(),{selectedReleaseId:en,selectedPerspectiveName:ei}=(0,u.useMemo)(()=>d||{selectedPerspectiveName:Q.selectedPerspectiveName,selectedReleaseId:Q.selectedReleaseId},[d,Q.selectedPerspectiveName,Q.selectedReleaseId]),el=ii(),er=rM({paneOptions:X,documentId:q,documentType:Y,params:Z}),ea=er.loading,{changesOpen:es,currentInspector:ed,inspectors:ec,closeInspector:eu,openInspector:ep,handleHistoryClose:eh,handleHistoryOpen:ef,handleInspectorAction:ev,inspectOpen:ex,handleLegacyInspectClose:eg}=function(e){let{documentId:t,documentType:n,params:i,setParams:l}=e,{features:o}=iN(),r=(0,h.Lky)().document.inspectors,a=(0,u.useMemo)(()=>r({documentId:t,documentType:n}),[t,n,r]),[s,d]=(0,u.useState)(()=>i.inspect||null),c=(0,u.useRef)(i.inspect);(0,u.useEffect)(()=>{c.current!==i.inspect&&(c.current=i.inspect,d(i.inspect||null))},[i.inspect]);let p=(0,u.useMemo)(()=>null==a?void 0:a.find(e=>e.name===s),[a,s]),m=(0,u.useMemo)(()=>a.find(e=>e.name===i$),[a]),f=(null==p?void 0:p.name)===i$,v=(0,u.useCallback)(e=>{let t=e&&a.find(t=>t.name===e);if(e&&!t){console.warn('No inspector named "'.concat(e,'"'));return}if(p){var n,o,r,s;if(t){let e=null!==(o=null===(n=t.onClose)||void 0===n?void 0:n.call(t,{params:i}))&&void 0!==o?o:{params:i};d(null),c.current=void 0,l({...e.params,inspect:void 0});return}if(p){let e=null!==(s=null===(r=p.onClose)||void 0===r?void 0:r.call(p,{params:i}))&&void 0!==s?s:{params:i};d(null),c.current=void 0,l({...e.params,inspect:void 0})}}},[p,a,i,l]),x=(0,u.useCallback)((e,t)=>{var n,o,r,s;let u=a.find(t=>t.name===e);if(!u){console.warn('No inspector named "'.concat(e,'"'));return}if((null==p?void 0:p.name)===u.name){l({...i,...t,inspect:u.name});return}let m=i;p&&(m=(null!==(r=null===(n=u.onClose)||void 0===n?void 0:n.call(u,{params:m}))&&void 0!==r?r:{params:m}).params);let h=null!==(s=null===(o=u.onOpen)||void 0===o?void 0:o.call(u,{params:m}))&&void 0!==s?s:{params:m};d(u.name),c.current=u.name,l({...h.params,...t,inspect:u.name})},[p,a,i,l]),g=(0,u.useCallback)(()=>{m&&v(m.name)},[v,m]),b=(0,u.useCallback)(()=>{o.reviewChanges&&m&&x(m.name,{changesInspectorTab:"review"})},[o.reviewChanges,x,m]),y="on"===i.inspect,j=(0,u.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!y;l(e?{...i,inspect:"on"}:w(i,"inspect"))},[y,i,l]),_=(0,u.useCallback)(()=>j(!1),[j]),k=(0,u.useCallback)(e=>{if("inspect"===e.action)return j(!0),!0;if("string"!=typeof e.action)return!1;let t=e.action.slice(iU.length),n=a.find(e=>e.name===t);return!!n&&(n.name===s?v(n.name):x(n.name),!0)},[v,s,a,x,j]);return{changesOpen:f,currentInspector:p,inspectors:a,closeInspector:v,openInspector:x,handleHistoryClose:g,handleHistoryOpen:b,handleInspectorAction:k,handleLegacyInspectClose:_,inspectOpen:y}}({documentId:q,documentType:Y,params:Z,setParams:$}),[eb,ey]=(0,u.useState)(!1),ej=(0,u.useCallback)(e=>!!x&&!(null==e?void 0:e.draft)&&!(null==e?void 0:e.published)&&!(null==e?void 0:e.version)&&!_,[x,_]),e_=(0,u.useCallback)(e=>es?y||(null==e?void 0:e.published):(null==e?void 0:e.published)||null,[es,y]),ew=z.get(Y),ek=(0,u.useCallback)(e=>{let t=ej(e);return!!Z.rev||eb||t||!(0,h.Xje)({selectedPerspective:Q.selectedPerspective,isDraftModelEnabled:ee,schemaType:ew}).result},[ej,eb,ee,Z.rev,Q.selectedPerspective,ew]),eC=(0,u.useCallback)(e=>b?g||{_id:e._id,_type:e._type}:e,[b,g]),{editState:eS,connectionState:ez,focusPath:eE,onChange:eI,validation:eP,ready:eA,value:eT,formState:eR,permissions:eM,onPathOpen:eD,isPermissionsLoading:eL,formStateRef:eN,onProgrammaticFocus:eO,collapsedFieldSets:eU,collapsedPaths:eB,onBlur:e$,onFocus:eV,onSetActiveFieldGroup:eG,onSetCollapsedPath:eF,onSetCollapsedFieldSet:eK,openPath:eW}=(0,h.izb)({documentType:Y,documentId:q,initialValue:er,comparisonValue:e_,releaseId:en,selectedPerspectiveName:ei,initialFocusPath:Z.path?(0,k.mL)(Z.path):h.LZ8,readOnly:ek,onFocusPath:r,getFormDocumentValue:eC}),eX=(0,u.useCallback)(()=>{let e;switch(!0){case!!Z.rev:e="revision";break;case en&&(0,h.Y_j)(eT._id):e="version";break;case"published"===ei:e="published";break;case L:e="draft";break;default:e="published"}return e},[Z.rev,en,eT._id,ei,L]),eH=(0,u.useMemo)(()=>eX(),[eX]),eq=(0,u.useMemo)(()=>({schemaType:Y,documentId:q,versionType:eH,releaseId:en}),[Y,q,eH,en]),eY=(0,u.useMemo)(()=>A(eq),[A,eq]),eZ=(0,u.useMemo)(()=>T({schemaType:Y,documentId:q}),[T,q,Y]),eJ=(0,u.useMemo)(()=>M({schemaType:Y,documentId:q}),[q,Y,M]),eQ=(0,h.BoV)(W),e0=Z.view||eQ[0]&&eQ[0].id||null,e1=function(e){let t,n,i,l,o,r;let a=(0,s.c)(6),{resolveProductionUrl:d}=(0,h.Lky)().document;return a[0]===Symbol.for("react.memo_cache_sentinel")?(n=new O.X(void 0),a[0]=n):n=a[0],t=n,a[1]!==e?(i=()=>{t.next(e)},l=[t,e],a[1]=e,a[2]=i,a[3]=l):(i=a[2],l=a[3]),(0,u.useEffect)(i,l),a[4]!==d?(r=t.asObservable().pipe((0,P.x)(),(0,eo.b)(500),(0,et.w)(e=>rD(e)?(0,U.D)(d({document:e})):(0,E.of)(void 0)),(0,P.x)(),(0,D.K)(rL)),a[4]=d,a[5]=r):r=a[5],o=r,(0,j.m)(o)}(eT),{t:e2}=(0,h.$G7)(o.UA),e3=(0,u.useMemo)(()=>ew?R({documentId:q,documentType:Y,schemaType:ew}):[],[q,Y,R,ew]),e4=eA&&(!Z.rev||x||!!v),e5=(0,u.useMemo)(()=>eC(eT),[eC,eT]),{previousId:e6}=iL({displayed:e5,documentId:q,editState:eS}),e7=(0,u.useCallback)((e,t)=>{$({...Z,since:e,rev:t||void 0})},[Z,$]),e8=(0,u.useCallback)(()=>B.closeCurrent(),[B]),e9=(0,u.useCallback)(()=>B.duplicateCurrent(),[B]),te=(0,u.useCallback)(async e=>{if("production-preview"===e.action&&e1)return window.open(e1),!0;if("copy-document-url"===e.action&&navigator){N.log(rR);let e=J({coreUi:e=>"".concat(e,"/intent/edit/id=").concat(q,";type=").concat(Y)});return await navigator.clipboard.writeText(e),V({id:"copy-document-url",status:"info",title:e2("panes.document-operation-results.operation-success_copy-url")}),!0}return"reviewChanges"===e.action?(ef(),!0):(("inspect"===e.action||"string"==typeof e.action&&e.action.startsWith(iU))&&ev(e),"compareVersions"===e.action&&"u">typeof e6&&(el.navigateDiffView({mode:"version",previousDocument:{type:Y,id:e6},nextDocument:{type:Y,id:eT._id}}),!0))},[e1,e6,N,J,V,e2,q,Y,ef,ev,el,eT._id]);(0,u.useEffect)(()=>{I({documentId:q,documentType:Y,schemaType:ew,onChange:eI})},[q,Y,ew,eI,I]);let tt=(0,u.useMemo)(()=>e_(eS),[eS,e_]),tn=(0,u.useMemo)(()=>ej(eS),[eS,ej]),ti=b&&!g,tl=(0,u.useMemo)(()=>({actions:eY,activeViewId:e0,badges:eZ,changesOpen:es,closeInspector:eu,collapsedFieldSets:eU,collapsedPaths:eB,compareValue:tt,connectionState:ez,displayed:e5,documentId:q,documentIdRaw:H,documentType:Y,editState:eS,fieldActions:e3,focusPath:eE,inspector:ed||null,inspectors:ec,onBlur:e$,onChange:eI,onFocus:eV,onPathOpen:eD,onHistoryClose:eh,onHistoryOpen:ef,onInspectClose:eg,onMenuAction:te,onPaneClose:e8,onPaneSplit:e9,onSetActiveFieldGroup:eG,onSetCollapsedPath:eF,onSetCollapsedFieldSet:eK,openInspector:ep,openPath:eW,index:n,inspectOpen:ex,validation:eP,menuItemGroups:F||[],paneKey:l,previewUrl:e1,ready:e4,schemaType:ew,isPermissionsLoading:eL,isInitialValueLoading:ea,permissions:eM,setTimelineRange:e7,setIsDeleting:ey,isDeleting:eb,isDeleted:tn,timelineError:v,timelineStore:f,title:K,value:eT,selectedReleaseId:en,views:eQ,formState:eR,unstable_languageFilter:eJ,revisionId:C,revisionNotFound:ti,lastNonDeletedRevId:S}),[eY,e0,eZ,es,eu,eU,eB,tt,ez,e5,q,H,Y,eS,e3,eE,ed,ec,e$,eI,eV,eD,eh,ef,eg,te,e8,e9,eG,eF,eK,ep,eW,n,ex,eP,F,l,e1,e4,ew,eL,ea,eM,e7,eb,tn,v,f,K,eT,en,eQ,eR,eJ,C,ti,S]);return(0,u.useEffect)(()=>{if(e4&&Z.path){var e;let{path:t,...n}=Z;eO((0,k.vW)(null===(e=eN.current)||void 0===e?void 0:e.value,(0,k.mL)(t))),B.setParams(n)}},[eN,eO,B,Z,e4]),(0,a.jsx)(p.cO.Provider,{value:tl,children:t})});rN.displayName="Memo(DocumentPaneProvider)";let rO=e=>{var t,n,i,l,o,r;let d,c,u,p,m,f,v,x;let g=(0,s.c)(37),{params:b}=t0(),y=void 0===b?iO:b,j=rJ(e.pane.options,y),_=(0,h.I_y)(),w=j.type,k=!!(null===(t=_.get(j.type))||void 0===t?void 0:t.liveEdit),{selectedPerspectiveName:C,selectedReleaseId:S,selectedPerspective:z}=(0,h.Wc0)(),{data:E}=(0,h.vlT)();g[0]!==j.id?(d=(0,h.vsM)(j.id),g[0]=j.id,g[1]=d):d=g[1];let I=(0,h.iav)(d,w,"default",S),P=k&&"drafts"===z&&!(null==I?void 0:I.draft),{rev:A,since:T}=y,R=y.historyVersion;e:{if(P){let e;g[2]!==j.id?(e=(0,h.vsM)(j.id),g[2]=j.id,g[3]=e):e=g[3],c=e;break e}if(R&&E.some(e=>(0,h.QXs)(e._id)===R)){let e;g[4]!==R||g[5]!==j.id?(e=(0,h.XLS)(j.id,R),g[4]=R,g[5]=j.id,g[6]=e):e=g[6],c=e;break e}if(typeof C>"u"){let e;g[7]!==j.id?(e=(0,h.qyu)(j.id),g[7]=j.id,g[8]=e):e=g[8],c=e;break e}if("published"===C){let e;g[9]!==j.id?(e=(0,h.vsM)(j.id),g[9]=j.id,g[10]=e):e=g[10],c=e;break e}if(S){let e;g[11]!==j.id||g[12]!==C?(e=(0,h.XLS)(j.id,C),g[11]=j.id,g[12]=C,g[13]=e):e=g[13],c=e;break e}c=j.id}let M=c;g[14]!==M||g[15]!==j.type||g[16]!==A||g[17]!==T?(u={documentId:M,documentType:j.type,rev:A,since:T},g[14]=M,g[15]=j.type,g[16]=A,g[17]=T,g[18]=u):u=g[18];let D=(0,h.qDX)(u),L=D.error,N=(null===(n=D.revision)||void 0===n?void 0:n.revisionId)||null,O=!!(A&&!(null===(i=D.revision)||void 0===i?void 0:i.loading)),U=(null===(l=D.revision)||void 0===l?void 0:l.document)||null,B=(null===(o=D.sinceRevision)||void 0===o?void 0:o.document)||null,$=!D.loading,V=0===D.events.length;return g[19]!==D.events?(m=(null===(r=D.events.find(rU))||void 0===r?void 0:r.id)||null,g[19]=D.events,g[20]=m):m=g[20],g[21]!==D.error||g[22]!==$||g[23]!==V||g[24]!==m||g[25]!==N||g[26]!==O||g[27]!==U||g[28]!==B?(f={error:L,revisionId:N,onOlderRevision:O,revisionDocument:U,sinceDocument:B,ready:$,isPristine:V,lastNonDeletedRevId:m},g[21]=D.error,g[22]=$,g[23]=V,g[24]=m,g[25]=N,g[26]=O,g[27]=U,g[28]=B,g[29]=f):f=g[29],p=f,g[30]!==p||g[31]!==R||g[32]!==e?(v=R?(0,a.jsx)(h.t7B,{selectedPerspectiveName:R,excludedPerspectives:h.LZ8,children:(0,a.jsx)(rN,{...e,historyStore:p})}):(0,a.jsx)(rN,{...e,historyStore:p}),g[30]=p,g[31]=R,g[32]=e,g[33]=v):v=g[33],g[34]!==v||g[35]!==D?(x=(0,a.jsx)(h.Yls,{value:D,children:v}),g[34]=v,g[35]=D,g[36]=x):x=g[36],x};function rU(e){return!(0,h.E8O)(e)&&!(0,h.Pm6)(e)}let rB=e=>{let t,n,i,l,o;let r=(0,s.c)(20),{pane:d}=e,c=t0(),p=rJ(d.options,c.params),m=c.params||iO,[f,v]=(0,u.useState)(null);r[0]!==p.id?(t=(0,h.vsM)(p.id),r[0]=p.id,r[1]=t):t=r[1],r[2]!==p.type||r[3]!==m.rev||r[4]!==m.since||r[5]!==t?(n={documentId:t,documentType:p.type,onError:v,rev:m.rev,since:m.since},r[2]=p.type,r[3]=m.rev,r[4]=m.since,r[5]=t,r[6]=n):n=r[6];let x=(0,h.Dab)(n),g=(0,h.P08)(x,r$),b=(0,h.P08)(x,rV),y=(0,h.P08)(x,rG),j=(0,h.P08)(x,rF),_=(0,h.P08)(x,rK),w=(0,h.P08)(x,rW),k=(0,h.P08)(x,rX),C=(null==b?void 0:b.id)||null,S=!!w;return r[7]!==k||r[8]!==g||r[9]!==x||r[10]!==C||r[11]!==j||r[12]!==y||r[13]!==S||r[14]!==f||r[15]!==_?(l={store:x,error:f,revisionId:C,onOlderRevision:g,revisionDocument:j,sinceDocument:y,ready:_,isPristine:S,lastNonDeletedRevId:k},r[7]=k,r[8]=g,r[9]=x,r[10]=C,r[11]=j,r[12]=y,r[13]=S,r[14]=f,r[15]=_,r[16]=l):l=r[16],i=l,r[17]!==i||r[18]!==e?(o=(0,a.jsx)(rN,{...e,historyStore:i}),r[17]=i,r[18]=e,r[19]=o):o=r[19],o};function r$(e){return e.onOlderRevision}function rV(e){return e.revTime}function rG(e){return e.sinceAttributes}function rF(e){return e.timelineDisplayed}function rK(e){return e.timelineReady}function rW(e){return e.isPristine}function rX(e){return e.lastNonDeletedRevId}let rH=(0,u.memo)(e=>{var t,n;let i;let l=(0,s.c)(4);if(null===(n=(0,h.Lky)().beta)||void 0===n?void 0:null===(t=n.eventsAPI)||void 0===t?void 0:t.documents){let t;return l[0]!==e?(t=(0,a.jsx)(rO,{...e}),l[0]=e,l[1]=t):t=l[1],t}return l[2]!==e?(i=(0,a.jsx)(rB,{...e}),l[2]=e,l[3]=i):i=l[3],i});rH.displayName="Memo(DocumentPaneProviderWrapper)";let rq=(0,u.memo)(function(e){let t,n;let i=(0,s.c)(5),{name:l}=(0,h.Lky)(),o=e.pane.source||l;return i[0]!==e?(t=(0,a.jsx)(h.Or8,{children:(0,a.jsx)(rY,{...e})}),i[0]=e,i[1]=t):t=i[1],i[2]!==o||i[3]!==t?(n=(0,a.jsx)(h.cWh,{name:o,children:t}),i[2]=o,i[3]=t,i[4]=n):n=i[4],n});function rY(e){var t;let n,i,l,r,c,p,m,f,v,x,g,b,y;let j=(0,s.c)(57),{pane:_,paneKey:w}=e,{resolveNewDocumentOptions:C}=(0,h.Lky)().document,{selectedPerspectiveName:S}=(0,h.Wc0)(),z=t0(),E=rJ(_.options,z.params),{documentType:I,isLoaded:P}=(0,h.Hdz)(E.id,E.type);!function(){let e,t,n,i,l;let o=(0,s.c)(10),{params:r,setParams:a}=t0(),d=void 0===r?iO:r,{selectedPerspectiveName:c}=(0,h.Wc0)(),p=(0,u.useRef)(!1);o[0]!==d||o[1]!==a?(e=e=>{["since","historyVersion","rev","preserveRev"].some(e=>d[e])&&a({...d,rev:"true"===d.preserveRev?d.rev:void 0,preserveRev:void 0,since:void 0,historyVersion:void 0})},o[0]=d,o[1]=a,o[2]=e):e=o[2];let m=(0,eb.i)(e);o[3]!==c||o[4]!==m?(t=()=>{p.current&&m(c)},o[3]=c,o[4]=m,o[5]=t):t=o[5],o[6]!==c?(n=[c],o[6]=c,o[7]=n):n=o[7],(0,u.useEffect)(t,n),o[8]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(p.current=!0,()=>{p.current=!1}),l=[],o[8]=i,o[9]=l):(i=o[8],l=o[9]),(0,u.useEffect)(i,l)}();let A=function(){let e;let t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e={pick:ih,defaultComponent:rT},t[0]=e):e=t[0],(0,h.uwK)(e)}();j[0]!==E.id||j[1]!==E.type||j[2]!==C?(i=C({type:"document",documentId:E.id,schemaType:E.type}),j[0]=E.id,j[1]=E.type,j[2]=C,j[3]=i):i=j[3],n=i,j[4]!==n?(l={templateItems:n},j[4]=n,j[5]=l):l=j[5];let[T,R]=(0,h.UMU)(l),M=P&&!R;j[6]!==I||j[7]!==M||j[8]!==E||j[9]!==e?(c=M&&I&&E.type!==I?{...e,pane:{...e.pane,options:{...E,type:I}}}:e,j[6]=I,j[7]=M,j[8]=E,j[9]=e,j[10]=c):c=j[10],r=c;let{ReferenceChildLink:D,handleEditReference:L,groupIndex:N,routerPanesState:O}=z;j[11]!==N||j[12]!==O?(p=(null===(t=O[N+1])||void 0===t?void 0:t[0].params)||{},j[11]=N,j[12]=O,j[13]=p):p=j[13];let U=p,B=O.length,{parentRefPath:$}=U;j[14]!==N||j[15]!==$||j[16]!==B?(f=$?{path:(0,k.mL)($),state:N>=B-1?"none":N>=B-2?"selected":"pressed"}:{path:[],state:"none"},j[14]=N,j[15]=$,j[16]=B,j[17]=f):f=j[17],m=f;let{t:V}=(0,h.$G7)(o.UA);if("*"===E.type&&!M){let e,t;return j[18]!==V?(e=V("panes.document-pane.document-not-found.loading"),j[18]=V,j[19]=e):e=j[19],j[20]!==w||j[21]!==e?(t=(0,a.jsx)(iA,{flex:2.5,minWidth:320,paneKey:w,title:e}),j[20]=w,j[21]=e,j[22]=t):t=j[22],t}if(!I){let e,t,n,i,l;return j[23]!==V?(e=V("panes.document-pane.document-not-found.title"),j[23]=V,j[24]=e):e=j[24],j[25]!==E.id?(t={id:E.id},j[25]=E.id,j[26]=t):t=j[26],j[27]===Symbol.for("react.memo_cache_sentinel")?(n={Code:rZ},j[27]=n):n=j[27],j[28]!==V||j[29]!==t?(i=(0,a.jsx)(d.Kq,{space:4,children:(0,a.jsx)(d.xv,{as:"p",children:(0,a.jsx)(h.vNl,{t:V,i18nKey:"panes.document-pane.document-not-found.text",values:t,components:n})})}),j[28]=V,j[29]=t,j[30]=i):i=j[30],j[31]!==w||j[32]!==i||j[33]!==e?(l=(0,a.jsx)(iE,{flex:2.5,minWidth:320,paneKey:w,title:e,children:i}),j[31]=w,j[32]=i,j[33]=e,j[34]=l):l=j[34],l}let G="".concat(I,"-").concat(E.id,"-").concat(S||"");return j[35]!==A||j[36]!==E.id||j[37]!==E.type?(v=(0,a.jsx)(A,{documentId:E.id,documentType:E.type}),j[35]=A,j[36]=E.id,j[37]=E.type,j[38]=v):v=j[38],j[39]!==E.id||j[40]!==E.type||j[41]!==v?(x=(0,a.jsx)(iR,{documentId:E.id,documentType:E.type,children:v}),j[39]=E.id,j[40]=E.type,j[41]=v,j[42]=x):x=j[42],j[43]!==E.id||j[44]!==E.type||j[45]!==x?(g=(0,a.jsx)(iz,{documentId:E.id,documentType:E.type,children:x}),j[43]=E.id,j[44]=E.type,j[45]=x,j[46]=g):g=j[46],j[47]!==D||j[48]!==m||j[49]!==L||j[50]!==g||j[51]!==T?(b=(0,a.jsx)(h.euX,{EditReferenceLinkComponent:D,onEditReference:L,initialValueTemplateItems:T,activePath:m,children:g}),j[47]=D,j[48]=m,j[49]=L,j[50]=g,j[51]=T,j[52]=b):b=j[52],j[53]!==r||j[54]!==b||j[55]!==G?(y=(0,a.jsx)(rH,{...r,children:b},G),j[53]=r,j[54]=b,j[55]=G,j[56]=y):y=j[56],y}function rZ(e){let{children:t}=e;return(0,a.jsx)("code",{children:t})}function rJ(e,t){let n,i;let l=(0,s.c)(8);l[0]!==t?(n=void 0===t?{}:t,l[0]=t,l[1]=n):n=l[1];let o=n,r=(0,h.zEW)();e:{let t,n;if(e.type&&"*"!==e.type){i=e;break e}let a=e.template||o.template;l[2]!==a||l[3]!==r?(t=a?r.find(e=>e.id===a):void 0,l[2]=a,l[3]=r,l[4]=t):t=l[4];let s=null==t?void 0:t.schemaType;if(!s){i=e;break e}l[5]!==s||l[6]!==e?(n={...e,type:s},l[5]=s,l[6]=e,l[7]=n):n=l[7],i=n}return i}let rQ={by:[{field:"_updatedAt",direction:"desc"}]},r0={},r1=(0,x.zo)(d.xu)(tv(),e=>e.$opacity||1),r2=(0,x.zo)(d.xu)(tx()),r3=[...Array(30).keys()];function r4(e){let t,n;let i=(0,s.c)(4),{layout:l}=e;return i[0]!==l?(t=r3.map(e=>(0,a.jsx)(h.ogX,{isPlaceholder:!0,layout:l},e)),i[0]=l,i[1]=t):t=i[1],i[2]!==t?(n=(0,a.jsx)(d.Kq,{paddingX:3,paddingY:2,paddingTop:0,space:1,children:t}),i[2]=t,i[3]=n):n=i[3],n}function r5(e){let t,n,i,l,r,c,p;let m=(0,s.c)(66),{childItemId:f,error:v,isRetrying:x,autoRetry:g,filterIsSimpleTypeConstraint:b,hasMaxItems:y,hasSearchQuery:j,isActive:_,isLazyLoading:w,muted:k,isLoading:C,isConnected:S,retryCount:z,canRetry:E,items:I,layout:P,loadingVariant:A,onEndReached:T,onRetry:R,paneTitle:M,searchInputElement:D,showIcons:L}=e,N=(0,h.I_y)(),{collapsed:O}=tY(),{collapsed:U,index:B}=np(),[$,V]=(0,u.useState)(!U),{t:G}=(0,h.$G7)(o.UA);m[0]!==T||m[1]!==$?(t=()=>{$&&T()},m[0]=T,m[1]=$,m[2]=t):t=m[2];let F=t;m[3]!==U?(n=()=>{if(U)return;let e=setTimeout(()=>{V(!0)},0);return()=>{clearTimeout(e)}},m[3]=U,m[4]=n):n=m[4],m[5]!==U||m[6]!==I?(i=[U,I],m[5]=U,m[6]=I,m[7]=i):i=m[7],(0,u.useEffect)(n,i),m[8]!==f||m[9]!==y||m[10]!==_||m[11]!==w||m[12]!==I.length||m[13]!==P||m[14]!==N||m[15]!==L||m[16]!==G?(l=(e,t)=>{let{activeIndex:n}=t,i=(0,h.vsM)(e._id),l=f===i,o=!_&&l,r=_&&l,s=n===I.length-1,c=s&&w,u=s&&y;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n3,{icon:!1!==L&&void 0,id:i,layout:P,marginBottom:1,pressed:o,schemaType:N.get(e._type),selected:r,value:e}),c&&(0,a.jsx)(h.Bwn,{}),u&&(0,a.jsx)(d.xu,{marginY:1,paddingX:3,paddingY:4,children:(0,a.jsx)(d.xv,{align:"center",muted:!0,size:1,children:G("panes.document-list-pane.max-items.text",{limit:2e3})})})]})},m[8]=f,m[9]=y,m[10]=_,m[11]=w,m[12]=I.length,m[13]=P,m[14]=N,m[15]=L,m[16]=G,m[17]=l):l=m[17];let K=l;e:{let e,t;if(j){let e,t;m[18]!==G?(e=G("panes.document-list-pane.no-documents.text"),m[18]=G,m[19]=e):e=m[19],m[20]!==e?(t=(0,a.jsx)(d.kC,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,a.jsx)(d.W2,{width:1,children:(0,a.jsx)(d.xu,{paddingX:4,paddingY:5,children:(0,a.jsx)(d.xv,{align:"center",muted:!0,children:e})})})}),m[20]=e,m[21]=t):t=m[21],r=t;break e}m[22]!==b||m[23]!==G?(e=G(b?"panes.document-list-pane.no-documents-of-type.text":"panes.document-list-pane.no-matching-documents.text"),m[22]=b,m[23]=G,m[24]=e):e=m[24],m[25]!==e?(t=(0,a.jsx)(d.kC,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,a.jsx)(d.W2,{width:1,children:(0,a.jsx)(d.xu,{paddingX:4,paddingY:5,children:(0,a.jsx)(d.xv,{align:"center",muted:!0,children:e})})})}),m[25]=e,m[26]=t):t=m[26],r=t}let W=r;t:{let e,t;if(!$){c=null;break t}let n=window.navigator.onLine;if(v){let e,t,i,l,o,r,s;m[27]!==G?(e=G("panes.document-list-pane.error.title"),m[27]=G,m[28]=e):e=m[28],m[29]!==e?(t=(0,a.jsx)(d.X6,{as:"h3",children:e}),m[29]=e,m[30]=t):t=m[30],m[31]!==v||m[32]!==G?(i=h.r8Q?(0,a.jsx)(h.vNl,{t:G,i18nKey:"panes.document-list-pane.error.text.dev",values:{error:v.message},components:{Code:r6}}):G(n?"panes.document-list-pane.error.text":"panes.document-list-pane.error.text.offline"),m[31]=v,m[32]=G,m[33]=i):i=m[33],m[34]!==i?(l=(0,a.jsx)(d.xv,{as:"p",children:i}),m[34]=i,m[35]=l):l=m[35];let u=n&&E?R:void 0;m[36]!==v||m[37]!==x||m[38]!==u?(o=(0,a.jsx)(h.fZm,{error:v,eventId:null,onRetry:u,isRetrying:x}),m[36]=v,m[37]=x,m[38]=u,m[39]=o):o=m[39],m[40]!==g||m[41]!==E||m[42]!==x||m[43]!==z||m[44]!==G?(r=E?(0,a.jsx)(d.xv,{as:"p",muted:!0,size:1,children:x?G("panes.document-list-pane.error.retrying",{count:z}):g?G("panes.document-list-pane.error.will-retry-automatically",{count:z}):G("panes.document-list-pane.error.max-retries-attempted",{count:z})}):null,m[40]=g,m[41]=E,m[42]=x,m[43]=z,m[44]=G,m[45]=r):r=m[45],m[46]!==o||m[47]!==r||m[48]!==t||m[49]!==l?(s=(0,a.jsx)(d.kC,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,a.jsx)(d.W2,{width:1,children:(0,a.jsxs)(d.Kq,{paddingX:4,paddingY:5,space:4,children:[t,l,o,r]})})}),m[46]=o,m[47]=r,m[48]=t,m[49]=l,m[50]=s):s=m[50],c=s;break t}if(S&&!C&&0===I.length){c=W;break t}if("initial"===A&&C){let e;m[51]!==P?(e=(0,a.jsx)(nr,{ms:300,children:(0,a.jsx)(r4,{layout:P})}),m[51]=P,m[52]=e):e=m[52],c=e;break t}if("spinner"===A&&C){c=null;break t}let i="".concat(B,"-").concat(U),l=k?.8:1;m[53]!==F||m[54]!==I||m[55]!==i||m[56]!==M||m[57]!==K||m[58]!==D?(e=(0,a.jsx)(r2,{children:(0,a.jsx)(h.e8h,{activeItemDataAttr:"data-hovered",ariaLabel:M,canReceiveFocus:!0,inputElement:D,itemHeight:51,items:I,onEndReached:F,onlyShowSelectionWhenActive:!0,overscan:10,paddingBottom:1,paddingX:3,renderItem:K,wrapAround:!1},i)}),m[53]=F,m[54]=I,m[55]=i,m[56]=M,m[57]=K,m[58]=D,m[59]=e):e=m[59],m[60]!==l||m[61]!==e?(t=(0,a.jsx)(r1,{overflow:"hidden",height:"fill",$opacity:l,children:e}),m[60]=l,m[61]=e,m[62]=t):t=m[62],c=t}let X=c,H=O||"initial"===A?"hidden":"auto";return m[63]!==X||m[64]!==H?(p=(0,a.jsx)(nm,{"data-testid":"document-list-pane",overflow:H,children:X}),m[63]=X,m[64]=H,m[65]=p):p=m[65],p}function r6(e){let{children:t}=e;return(0,a.jsx)("code",{children:t})}function r7(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=function e(t){switch(t.type){case"OpCall":{let{left:e,right:n}=t;switch(t.op){case"==":return"AccessAttribute"!==e.type||"_type"!==e.name||e.base?"AccessAttribute"!==n.type||"_type"!==n.name||n.base?null:"Value"!==e.type||"string"!=typeof e.value?null:new Set([e.value]):"Value"!==n.type||"string"!=typeof n.value?null:new Set([n.value]);case"in":{if("AccessAttribute"!==e.type||"_type"!==e.name||e.base||"Array"!==n.type)return null;let t=new Set;for(let e of n.elements){if(e.isSplat||"Value"!==e.value.type||"string"!=typeof e.value.value)return null;t.add(e.value.value)}return t.size?t:null}default:return null}}case"Group":return e(t.base);case"Or":{let n=e(t.left);if(!n)return null;let i=e(t.right);return i?new Set([...n,...i]):null}case"And":{let n=e(t.left),i=e(t.right);return n||i?new Set([...n||[],...i||[]]):null}default:return null}}((0,eS.Qc)(e,{params:t}));return n?Array.from(n).sort():null}catch(e){return null}}let r8=(0,h.h40)({maxSize:100});function r9(e){let{client:t,schema:n,sort:i,perspective:l,limit:r,params:a,filter:s,searchQuery:d,staticTypeNames:c,maxFieldDepth:u,searchStrategy:p}=e,m=i.by,f=null==i?void 0:i.extendedProjection,v=(0,B.P)(()=>t.listen("*[".concat(s,"]"),a,{events:["welcome","mutation","reconnect"],includeAllVersions:!0,includeResult:!1,visibility:"query",tag:"listen-search-query"})).pipe((0,$.z)((e,t)=>{let n=0===t;return n&&"reconnect"===e.type?(0,V._)(()=>Error("Failed to establish EventSource connection")):n&&"welcome"!==e.type?(0,V._)(()=>Error('Received unexpected type of first event "'.concat(e.type,'"'))):(0,E.of)(e)}),(0,G.B)()),[x,g]=(0,F.u)(v,e=>"welcome"===e.type),b=JSON.stringify({fiilter:s,limit:r,params:a,searchQuery:d,perspective:l,sort:i,staticTypeNames:c});return(0,R.T)(x,g.pipe((0,K.p)(1e3,W.z,{leading:!0,trailing:!0}))).pipe((0,eI.q)(e=>(c?(0,E.of)(c):t.observable.fetch("array::unique(*[".concat(s,"][]._type)"),a)).pipe((0,$.z)(v=>{let x=(0,h.wBu)(n,c||[]).filter(e=>!!v.includes(e.name)&&((0,o.xc)(e,i.by,!0),!0)),g=(0,h.mju)(x,t,{filter:s,params:a,strategy:p,maxDepth:u}),b=()=>g({query:d||"",types:x},{__unstable_extendedProjection:f,comments:["findability-source: ".concat(d?"list-query":"list")],limit:r,skipSortByScore:!0,sort:m,perspective:l}).pipe((0,T.U)(e=>e.hits.map(e=>{let{hit:t}=e;return t})),(0,T.U)(e=>({type:"result",documents:e})));return"mutation"===e.type&&"query"!==e.visibility?(0,S.H)(1200).pipe((0,$.z)(b)):"reconnect"===e.type?(0,E.of)(e):b()}))),(0,er.R)((e,t)=>({connected:"reconnect"!==t.type,documents:"result"===t.type?t.documents:(null==e?void 0:e.documents)||[]}),null),(0,A.h)(e=>null!==e),r8(b),(0,T.U)(e=>{let{fromCache:t,value:n}=e;return{fromCache:t,...n}}))}let ae={error:null,isRetrying:!1,retryCount:0,autoRetry:!1,canRetry:!1,isLoading:!0,isLoadingFullList:!1,fromCache:!1,items:[]},at="[WARNING: This was thrown as a non-error. Only Error instances should be thrown]",an=(0,x.F4)(tg()),ai=(0,x.F4)(tb()),al=(0,x.zo)(m.L4p)(ty(),an),ao=(0,x.zo)(m.L4p)(tj(),an),ar=(0,x.zo)(m.L4p)(t_(),an,ai),aa=(0,u.memo)(function(e){let{childItemId:t,isActive:n,pane:i,paneKey:l,sortOrder:r,layout:s}=e,c=(0,h.I_y)(),p=(0,h.F6R)(),{perspectiveStack:v}=(0,h.Wc0)(),{displayOptions:x,options:g}=i,{apiVersion:b,filter:y}=g,_=aN(g.params||r0),w=(0,u.useMemo)(()=>{let e=r7(y,_);return(null==e?void 0:e.length)===1?e[0]:null},[y,_]),z=(null==x?void 0:x.showIcons)!==!1,{t:I}=(0,h.$G7)(o.UA),{title:P}=(0,h.v0Z)(i),[M,D]=(0,u.useState)(""),[N,O]=(0,u.useState)(""),[U,B]=(0,u.useState)(null),V=w&&r?function(e,t){let n=e.by.map(e=>{if(e.mapWith)return e;let n=function(e,t){let n=k.mL(t),i=e;for(let e of n){if(!i)return;if("string"==typeof e){i=function(e,t){if(!("fields"in e))return;let n=e.fields.find(e=>e.name===t);return n?n.type:void 0}(i,e);continue}if(!((0,f.Fd)(e)||(0,f.dw)(e))||"array"!==i.jsonType)return;let[t,n]=i.of||[];if(n||!t)return;if(!(0,f.dD)(t)){i=t;continue}let[l,o]=t.to||[];if(o||!l)return;i=l}return i}(t,e.field);return n?!function(e,t){let n=e.type;for(;n;){if(n.name===t||!n.type&&n.jsonType===t)return!0;n=n.type}return!1}(n,"datetime")?"string"===n.jsonType?{...e,mapWith:"lower"}:e:{...e,mapWith:"dateTime"}:e});return n.every((t,n)=>t===e.by[n])?e:{...e,by:n}}(r,c.get(w)):r,F=(0,h.BoV)(V),{error:K,isLoadingFullList:W,isLoading:Y,items:Z,fromCache:J,isRetrying:Q,autoRetry:ee,canRetry:ei,retryCount:el,connected:eo,onLoadFullList:ec,onRetry:eu}=function(e){let{filter:t,params:n,sortOrder:i,searchQuery:l,perspective:o,apiVersion:r}=e,a=(0,h.m85)({...h.Dr7,apiVersion:r||h.Dr7.apiVersion}),{strategy:s}=(0,h.cFj)().search,d=(0,h.I_y)(),c=(0,h.NFh)(),p=(0,u.useMemo)(()=>r7(t,n),[t,n]),[[m,f]]=(0,u.useState)(()=>(0,eE.E)()),[[v,x]]=(0,u.useState)(()=>(0,eE.E)()),g=(0,u.useMemo)(()=>{let e={client:a,filter:t,limit:100,params:n,schema:d,perspective:o,searchQuery:l||"",sort:i||rQ,staticTypeNames:p,maxFieldDepth:c,searchStrategy:s},r=r9(e).pipe((0,en.d)({refCount:!0,bufferSize:1})),u=v.pipe((0,ea.M)(r),(0,A.h)(e=>{let[,t]=e;return(null==t?void 0:t.documents.length)===100}),(0,es.q)(1),(0,$.z)(()=>(0,L.z)((0,E.of)({type:"loadFullList"}),r9({...e,limit:2e3}).pipe((0,T.U)(e=>({type:"result",result:e}))))),(0,G.B)());return(0,R.T)(r.pipe((0,T.U)(e=>({type:"result",result:e})),(0,ed.R)(u)),u).pipe((0,h.p0W)((e,t,n)=>{var i;let l=e instanceof Error?e:"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message?Error("".concat(e.message," ").concat(at)):Error("".concat(String(e)," ").concat(at)),o=window.navigator.onLine,r=o&&!((i=e)instanceof ez.rB)&&(i instanceof ez.nl||!(i instanceof ez.XF)||403===i.statusCode),a=t<10,s=(0,R.T)(o?m:(0,C.R)(window,"online"),o&&a?(0,S.H)(1e3*t):X.C).pipe((0,es.q)(1),(0,et.w)(()=>(0,R.T)((0,E.of)({type:"error",error:l,retrying:!0,autoRetry:a,canRetry:r,retryCount:t}),n)));return(0,L.z)((0,E.of)({type:"error",error:l,retrying:!1,autoRetry:a,canRetry:r,retryCount:t}),s)}),(0,er.R)((e,t)=>{if("error"===t.type)return{...e,error:t.error,retryCount:t.retryCount,isRetrying:t.retrying,autoRetry:t.autoRetry,canRetry:t.canRetry};if("result"===t.type){var n;return{...e,error:null,isRetrying:!1,fromCache:t.result.fromCache,connected:t.result.connected,isLoading:!1,items:(n=t.result.documents,(0,h.RgL)(n).map(e=>{let t=e.draft||e.published||e.versions[0],n=!!e.draft;return{...t,hasPublished:!!e.published,hasDraft:n}})),isLoadingFullList:!1}}if("loadFullList"===t.type)return{...e,error:null,isLoadingFullList:!0};throw Error("Unexpected event type: ".concat(t.type))},ae))},[a,t,n,d,o,l,i,p,c,s,v,m]),{error:b,items:y,isLoading:_,fromCache:w,connected:k,canRetry:z,isLoadingFullList:I,isRetrying:P,autoRetry:M,retryCount:D}=(0,j.m)(g,ae);return{error:b,onRetry:f,isLoading:_,items:y,isRetrying:P,canRetry:z,retryCount:D,autoRetry:M,connected:k,fromCache:w,onLoadFullList:x,isLoadingFullList:I}}({apiVersion:b,filter:y,perspective:v,params:_,searchQuery:null==M?void 0:M.trim(),sortOrder:F}),ep=Y||p.loading,em=(0,j.H)(e=>e.pipe((0,T.U)(e=>e.target.value),(0,H.b)(O),(0,q.D)(e=>""===e?(0,E.of)(""):(0,S.H)(300)),(0,H.b)(D))),eh=(0,u.useCallback)(()=>{D(""),O("")},[]),ef=(0,u.useCallback)(e=>{"Escape"===e.key&&eh()},[eh]),[ev,ex]=(0,u.useState)();(0,u.useEffect)(()=>{ev||ep||ex(l)},[ev,ep,l]),(0,u.useEffect)(()=>{eh(),ex()},[l,eh]);let eg=(0,u.useMemo)(()=>eo&&ep&&ev===l?"spinner":eo&&J?"subtle":"initial",[eo,ev,J,ep,l]),eb=(0,u.useMemo)(()=>"spinner"===eg?al:N&&"subtle"===eg?ao:m.W1M,[eg,N]);return(0,h.IPD)(!eo),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.xu,{paddingX:3,paddingBottom:3,children:(0,a.jsx)(d.oi,{"aria-label":I("panes.document-list-pane.search-input.aria-label"),autoComplete:"off",border:!1,clearButton:!!M,fontSize:[2,2,1],icon:eb,iconRight:eo&&("subtle"!==eg||N)?null:ar,onChange:em,onClear:eh,onKeyDown:ef,padding:2,placeholder:I("panes.document-list-pane.search-input.placeholder"),radius:2,ref:B,spellCheck:!1,value:N})}),(0,a.jsx)(r5,{childItemId:t,error:K,filterIsSimpleTypeConstraint:!!w,hasMaxItems:2e3===Z.length,hasSearchQuery:!!M,isActive:n,isLazyLoading:W,isLoading:ep,autoRetry:ee,canRetry:ei,retryCount:el,isRetrying:Q,isConnected:eo,items:Z,layout:s,muted:"subtle"===eg,loadingVariant:eg,onEndReached:ec,onRetry:eu,paneTitle:P,searchInputElement:U,showIcons:z},l)]})}),as=(0,u.memo)(e=>{let t,n,i,l,o,d,c,u,p,h;let f=(0,s.c)(27),{contentAfter:v,index:x,initialValueTemplates:g,menuItemGroups:b,menuItems:y,setLayout:j,setSortOrder:_,title:w}=e;f[0]!==g?(t=void 0===g?[]:g,f[0]=g,f[1]=t):t=f[1];let k=t;f[2]!==b?(n=void 0===b?[]:b,f[2]=b,f[3]=n):n=f[3];let C=n;f[4]!==y?(i=void 0===y?[]:y,f[4]=y,f[5]=i):i=f[5];let S=i,{features:z}=iN(),{collapsed:E,isLast:I}=np(),P=I&&!E?-1:0;return f[6]!==j?(o=e=>{let{layout:t}=e;j(t)},f[6]=j,f[7]=o):o=f[7],f[8]!==_?(d=e=>{_(e)},f[8]=_,f[9]=d):d=f[9],f[10]!==o||f[11]!==d?(c={setLayout:o,setSortOrder:d},f[10]=o,f[11]=d,f[12]=c):c=f[12],l=c,f[13]!==l||f[14]!==k||f[15]!==C||f[16]!==S?(u=(0,a.jsx)(nQ,{initialValueTemplateItems:k,actionHandlers:l,menuItemGroups:C,menuItems:S}),f[13]=l,f[14]=k,f[15]=C,f[16]=S,f[17]=u):u=f[17],f[18]!==z.backButton||f[19]!==x?(p=z.backButton&&x>0&&(0,a.jsx)(r.zx,{as:tq,"data-as":"a",icon:m.Y4O,mode:"bleed",tooltipProps:{content:"Back"}}),f[18]=z.backButton,f[19]=x,f[20]=p):p=f[20],f[21]!==v||f[22]!==u||f[23]!==p||f[24]!==P||f[25]!==w?(h=(0,a.jsx)(r.uE,{children:(0,a.jsx)(nA,{actions:u,backButton:p,contentAfter:v,tabIndex:P,title:w})}),f[21]=v,f[22]=u,f[23]=p,f[24]=P,f[25]=w,f[26]=h):h=f[26],h});function ad(e){let{row:t,table:n}=e,{selectedAnchor:i,setSelectedAnchor:l}=n.options.meta||{},o=(0,u.useCallback)(e=>{if(e.shiftKey&&null!=i){let e=t.index,l=e<i?e:i,o=e<i?i:e,r=n.getRowModel().flatRows.slice(l,o+1).map(e=>{let{id:t}=e;return t}),a=n.getSelectedRowModel().rows.map(e=>{let{id:t}=e;return t});n.setRowSelection(()=>[...r,...a].reduce((e,t)=>({...e,[t]:!0}),{}))}else l&&(l(t.getIsSelected()?null:t.index),t.toggleSelected())},[i,t,l,n]);return(0,a.jsx)(d.XZ,{style:{paddingLeft:4},checked:e.row.getIsSelected(),disabled:!e.row.getCanSelect(),onChange:()=>null,onClick:o})}as.displayName="Memo(PaneHeader)";let ac=()=>{let e=(0,u.useContext)(p.Q2);if(void 0===e)throw Error("useDocumentSheetListContext must be used within an DocumentSheetListProvider");return e};function au(e){let{children:t,table:n}=e,[i,l]=(0,u.useState)(null),[o,r]=(0,u.useState)([]),s=(0,u.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(null==i?void 0:i.state)==="focused"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),l(e),r([])},[i]),d=(0,u.useCallback)(()=>s(),[s]),c=(0,u.useCallback)(e=>{if(!i)return;let t=n.getVisibleLeafColumns(),l=t.findIndex(e=>e.id===i.colId)+("left"===e?-1:1);l<0||l>=t.length||s({colId:t[l].id,rowIndex:i.rowIndex,state:"selected"})},[s,i,n]),m=(0,u.useCallback)(e=>{i&&r(t=>{let{rowIndex:n}=i,l=t=>t+("down"===e?1:-1);if(!t.length){let e=l(n);return e<0?[]:[e]}let o=l(t[t.length-1]);return o<0?t:o===n?[]:t.includes(o)?t.slice(0,-1):[...t,o]})},[i]),h=(0,u.useCallback)((e,t)=>{s({colId:e,rowIndex:t,state:"selected"})},[s]),f=(0,u.useCallback)(()=>{i&&(o.length?r([]):s("selected"===i.state?null:{...i,state:"selected"}))},[s,i,o.length]),v=(0,u.useCallback)((e,t)=>{if(!i)return;let n="ArrowDown"===t?"down":"up",l="down"===n?1:-1;if(e)m(n);else{let e=i.rowIndex+l;if(e<0)return;h(i.colId,e)}},[m,i,h]),x=(0,u.useCallback)(e=>{if(!i)return;let{key:t,shiftKey:n}=e;switch(t){case"Shift":break;case"Escape":f();break;case"ArrowDown":case"ArrowUp":e.preventDefault(),v(n,t);break;case"ArrowLeft":case"ArrowRight":"selected"===i.state&&(e.preventDefault(),c("ArrowLeft"===t?"left":"right"))}},[i,f,v,c]),g=(0,u.useCallback)(e=>{var t;i&&((null===(t=document.getElementById("cell-".concat(i.colId,"-").concat(i.rowIndex)))||void 0===t?void 0:t.contains(e.target))||d())},[d,i]);(0,u.useEffect)(()=>(i&&(document.addEventListener("keydown",x),document.addEventListener("click",g)),()=>{i&&(document.removeEventListener("keydown",x),document.removeEventListener("click",g))}),[g,x,i]);let b=(0,u.useCallback)(()=>l(e=>e?{...e,state:"focused"}:null),[]),y=(0,u.useCallback)((e,t)=>(null==i?void 0:i.colId)!==e?null:i.rowIndex===t?"focused"===i.state?"focused":"selectedAnchor":o.includes(t)?"selectedRange":null,[i,o]),j=(0,u.useCallback)(()=>{i&&s({colId:i.colId,rowIndex:i.rowIndex+1,state:"selected"})},[s,i]),_=(0,u.useMemo)(()=>({focusAnchorCell:b,resetFocusSelection:d,setSelectedAnchorCell:h,getStateByCellId:y,submitFocusedCell:j}),[b,d,h,y,j]);return(0,a.jsx)(p.Q2.Provider,{value:_,children:t})}let ap=x.zo.td(tw(),e=>{let{width:t}=e;return t}),am=(0,x.zo)(ap)(tk());function ah(e){let{getValue:t,column:n,row:i,fieldType:l}=e,o="cell-".concat(n.id,"-").concat(i.index),[r,s]=(0,u.useState)(t()),[c,p]=(0,u.useState)(!1),m=(0,u.useRef)(null),{focusAnchorCell:h,resetFocusSelection:f,setSelectedAnchorCell:v,getStateByCellId:x,submitFocusedCell:g}=ac(),b=x(n.id,i.index),y=(0,u.useCallback)(()=>{v(n.id,i.index),h()},[n.id,h,i.index,v]),{patchDocument:j}=e.table.options.meta||{},_=()=>{var e;null===(e=m.current)||void 0===e||e.focus(),m.current instanceof HTMLInputElement&&m.current.select()},w=(0,u.useCallback)(e=>{let{key:t}=e;"Enter"===t&&("selectedAnchor"===b&&_(),"focused"===b&&g())},[b,g]),k=(0,u.useCallback)(e=>{var t;let l=null===(t=e.clipboardData)||void 0===t?void 0:t.getData("Text");("string"==typeof l||"number"==typeof l)&&(s(l),null==j||j(i.id,n.id,l))},[n.id,j,i.id]),C=(0,u.useCallback)(()=>{navigator.clipboard.writeText(r.toString())},[r]);(0,u.useEffect)(()=>(("selectedAnchor"===b||"focused"===b)&&document.addEventListener("keydown",w),("selectedAnchor"===b||"selectedRange"===b)&&document.addEventListener("paste",k),"selectedAnchor"===b&&document.addEventListener("copy",C),()=>{("selectedAnchor"===b||"focused"===b)&&document.removeEventListener("keydown",w),("selectedAnchor"===b||"selectedRange"===b)&&document.removeEventListener("paste",k),"selectedAnchor"===b&&document.removeEventListener("copy",C)}),[o,b,n.id,x,C,w,k,i.index]);let S=()=>"focused"===b?"2px solid blue":"selectedRange"===b?"1px solid green":"selectedAnchor"===b?"1px solid blue":"1px solid transparent",z={onFocus:y,onBlur:()=>{c&&(null==j||j(i.id,n.id,r),p(!1)),f()},onMouseDown:e=>{2===e.detail?_():(e.preventDefault(),v(n.id,i.index))},"aria-selected":!!b,"data-testid":o,id:o,ref:e=>{m.current=e}};return"boolean"===l.name?(0,a.jsxs)(d.Ph,{...z,onChange:()=>null,radius:0,style:{boxShadow:"none",border:S(),padding:0},value:JSON.stringify(r),children:[(0,a.jsx)("option",{value:"True",children:"True"}),(0,a.jsx)("option",{value:"False",children:"False"})]}):(0,a.jsx)(d.oi,{...z,size:0,radius:0,border:!1,style:{border:S(),padding:"22px 16px"},value:"string"==typeof r||"number"==typeof r?r:JSON.stringify(r),onChange:e=>{p(!0),s(e.target.value)}})}function af(e){var t,n;let i=e.column.getIsPinned(),l=i&&e.column.getIsLastColumn("left")?2:1;return(0,a.jsx)(i?am:ap,{style:{left:null!==(n=e.column.getStart("left"))&&void 0!==n?n:void 0,borderRight:"".concat(l,"px solid var(--card-border-color)")},width:e.column.getSize(),children:(0,eP.ie)(e.column.columnDef.cell,null===(t=e.getContext)||void 0===t?void 0:t.call(e))},e.row.original._id+e.id)}let av=e=>{var t;let{documentPreviewStore:n,row:i,schemaType:l}=e,o=(0,u.useMemo)(()=>(0,h.eLL)(n,l,i.original._id),[n,i.original._id,l]),r=(0,h._je)(i.original._id),{snapshot:s,isLoading:c}=(0,j.m)(o,{snapshot:null,isLoading:!0});if(c)return(0,a.jsx)(d.xv,{size:1,muted:!0,children:"Loading..."});let p=null!==(t=null==s?void 0:s.title)&&void 0!==t?t:"Untitled";return(0,a.jsxs)(d.kC,{align:"center",gap:3,children:[(0,a.jsx)(h.aAo,{draft:r.draft,published:r.published,versions:void 0}),(0,a.jsx)(d.xv,{size:1,children:p})]})},ax=(0,eA.Cl)(),ag=["string","number","boolean"],ab=(e,t)=>e.fields.reduce((e,n)=>{let{type:i,name:l}=n;return ag.includes(i.name)?[...e,ax.accessor(t?"".concat(t,".").concat(n.name):n.name,{id:t?"".concat(t,"_").concat(n.name):n.name,header:n.type.title,enableHiding:!0,cell:e=>(0,a.jsx)(ah,{...e,fieldType:i})})]:"object"===i.name&&(0,f.m$)(i)&&!t?[...e,ax.group({header:l,columns:ab(i,n.name)})]:e},[]),ay=e=>e.flatMap(e=>"accessorKey"in e?e:"columns"in e&&e.columns?ay(e.columns):[]);function aj(e){let{table:t}=e,{t:n}=(0,h.$G7)(),i=t.getVisibleLeafColumns().filter(e=>e.getCanHide()).length>=5,l=(0,u.useCallback)(()=>{t.resetColumnVisibility()},[t]),o=e=>()=>{e.toggleVisibility()},s=e=>{let n=e.getIsVisible(),l=1===t.getVisibleLeafColumns().filter(e=>e.getCanHide()).length;return i&&!n||l&&n};return(0,a.jsx)(r.j2,{button:(0,a.jsx)(r.zx,{mode:"bleed",text:n("sheet-list.edit-columns")}),id:"columns-control",menu:(0,a.jsx)(d.v2,{padding:3,paddingTop:4,style:{width:240},children:(0,a.jsxs)(d.kC,{direction:"column",height:"fill",gap:3,children:[(0,a.jsx)(d.xv,{weight:"semibold",size:1,children:n("sheet-list.select-fields")}),(0,a.jsx)(d.kC,{style:{flex:"1 1 auto",maxHeight:320,overflowY:"scroll"},children:(0,a.jsx)(d.Kq,{children:t.getAllLeafColumns().filter(e=>e.getCanHide()).map(e=>{var t;return(0,a.jsxs)(d.kC,{marginY:2,align:"center",children:[(0,a.jsx)(d.XZ,{readOnly:s(e),checked:e.getIsVisible(),onChange:o(e),id:"col-visibility-".concat(e.id),style:{display:"block"}}),(0,a.jsx)(d.xu,{flex:1,paddingLeft:3,children:(0,a.jsx)(d.xv,{size:1,children:(0,a.jsx)("label",{htmlFor:"col-visibility-".concat(e.id),children:null===(t=e.columnDef.header)||void 0===t?void 0:t.toString()})})})]},e.id)})})}),(0,a.jsx)(r.zx,{width:"fill",mode:"ghost",text:n("sheet-list.reset-columns"),onClick:l})]})}),placement:"bottom",popover:{portal:!0}})}let a_=(0,x.zo)(d.kC)(tC());function aw(){let e,t,n;let i=(0,s.c)(5),{state:l}=(0,h.XNc)(),{filtersVisible:o}=l;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(h.s8v,{}),i[0]=e):e=i[0],i[1]!==o?(t=o&&(0,a.jsx)(h.x$p,{showTypeFilter:!1}),i[1]=o,i[2]=t):t=i[2],i[3]!==t?(n=(0,a.jsxs)(a_,{children:[e,t]}),i[3]=t,i[4]=n):n=i[4],n}let ak=x.zo.th(tS(),e=>{let{width:t}=e;return t},e=>{let{width:t}=e;return t}),aC=(0,x.zo)(ak)(tz()),aS=x.zo.div(tE(),ak);function az(e){var t;let{header:n,headerGroup:i}=e,{t:l}=(0,h.$G7)(),o=n.column.getIsPinned(),s=i.depth>0&&!n.column.parent?null:(0,a.jsx)(d.xv,{size:1,weight:"semibold",textOverflow:"ellipsis",children:(0,eP.ie)(n.column.columnDef.header,n.getContext())}),c=o?aC:ak,u=n.column.getCanHide()&&(0===i.depth?!n.column.columns.length:n.column.parent),p=o&&n.column.getIsLastColumn("left")?2:1;return(0,a.jsx)(c,{style:{left:null!==(t=n.column.getStart("left"))&&void 0!==t?t:void 0,borderRight:"".concat(p,"px solid var(--card-border-color)")},"data-testid":"header-".concat(n.id),width:n.getSize(),children:(0,a.jsxs)(d.kC,{justify:"space-between",marginX:2,align:"baseline",children:[(0,a.jsx)(r.u,{delay:500,content:s,children:(0,a.jsx)(d.xu,{style:{boxSizing:"border-box"},marginLeft:3,marginRight:3,children:s})}),u&&(0,a.jsx)(aS,{children:(0,a.jsx)(r.j2,{button:(0,a.jsx)(r.zx,{tooltipProps:{content:"Open field menu"},mode:"bleed",icon:m.xXb,"data-testid":"field-menu-button"}),id:"field menu",popover:{placement:"bottom-end"},menu:(0,a.jsx)(d.v2,{children:(0,a.jsx)(r.sN,{text:l("sheet-list.hide-field"),icon:m.Two,onClick:()=>n.column.toggleVisibility()})})})})]})},n.id)}function aE(e){let{table:t}=e;return(0,a.jsx)(r.uE,{children:(0,a.jsxs)(d.kC,{gap:3,align:"center",children:[(0,a.jsx)(r.zx,{onClick:()=>t.setPageIndex(0),disabled:!t.getCanPreviousPage(),icon:m.TwJ,tooltipProps:{content:"Go to first page"}}),(0,a.jsx)(r.zx,{onClick:()=>t.previousPage(),disabled:!t.getCanPreviousPage(),icon:m.wyc,tooltipProps:{content:"Go to previous page"}}),(0,a.jsxs)(d.xv,{style:{whiteSpace:"nowrap"},children:[t.getState().pagination.pageIndex+1," of ",t.getPageCount()]}),(0,a.jsx)(r.zx,{onClick:()=>t.nextPage(),disabled:!t.getCanNextPage(),icon:m.XCv,tooltipProps:{content:"Go to next page"}}),(0,a.jsx)(r.zx,{onClick:()=>t.setPageIndex(t.getPageCount()-1),disabled:!t.getCanNextPage(),icon:m.hZl,tooltipProps:{content:"Go to last page"}}),(0,a.jsx)("select",{value:t.getState().pagination.pageSize,onChange:e=>{t.setPageSize(Number(e.target.value))},children:[25,50,100].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]})})}function aI(e,t){switch(t.type){case"DOCUMENTS_SET":{let n=t.documents.reduce((e,t)=>({...e,[t._id]:t}),{});return{...e,documents:n}}case"DOCUMENT_RECEIVED":{let n=t.payload;return{...e,documents:{...e.documents,[n._id]:n}}}case"DOCUMENT_DELETED":{let{[t.id]:n,...i}=e.documents;return{...e,documents:i}}case"DOCUMENT_UPDATED":{let n=t.payload,i=n._id,l={...e.documents[i],...n};return{...e,documents:{...e.documents,[i]:l}}}default:return e}}let aP={events:["welcome","mutation","reconnect"],includeResult:!0,visibility:"query",includeAllVersions:!0,tag:"document-sheet-list-store"},aA=(0,x.zo)(d.kC)(tI()),aT=x.zo.div(tP()),aR=x.zo.table(tA());function aM(e){let{documentSchemaType:t}=e,{dispatch:n,state:i}=(0,h.XNc)(),{columns:l,initialColumnsVisibility:o}=function(e){let t=(0,h.rq_)(),n=(0,u.useMemo)(()=>e?[ax.display({id:"selected",enableHiding:!1,header:e=>(0,a.jsxs)(d.xu,{children:[(0,a.jsx)(d.XZ,{style:{paddingLeft:4},indeterminate:e.table.getIsSomeRowsSelected(),onChange:e.table.getToggleAllPageRowsSelectedHandler()}),e.table.getSelectedRowModel().rows.length," selected"]}),cell:ad}),ax.accessor("Preview",{enableHiding:!1,id:"Preview",cell:n=>(0,a.jsx)(av,{...n,documentPreviewStore:t,schemaType:e})}),...ab(e)]:[],[t,e]),[i]=(0,u.useMemo)(()=>ay(n).reduce((e,t)=>{let[n,i]=e;if(!t.id)throw Error("Column must have an id");let l=t.id;return t.enableHiding?5===i?[{...n,[l]:!1},i]:[{...n,[l]:!0},i+1]:[{...n,[l]:!0},i]},[{},0]),[n]);return{columns:n,initialColumnsVisibility:i}}(t),{data:r}=function(e){let t,n,i,l,o,r;let a=(0,s.c)(12),{typeName:d}=e,{state:c}=(0,h.XNc)();a[0]!==c.result.hits?(n=new Map,c.result.hits.forEach(e=>n.set((0,h.vsM)(e.hit._id),e.hit)),a[0]=c.result.hits,a[1]=n):n=a[1],t=n;let p='_type == "'.concat(d,'"');a[2]!==p?(i={filter:p},a[2]=p,a[3]=i):i=a[3];let{data:m,isLoading:f}=function(e){let t,n,i,l,o,r,a,d,c,p;let m=(0,s.c)(25),{filter:f,params:v,apiVersion:x}=e,g="*[".concat(f,"][0...2000]"),b=x||h.Dr7.apiVersion;m[0]!==b?(t={...h.Dr7,apiVersion:b},m[0]=b,m[1]=t):t=m[1];let y=(0,h.m85)(t);m[2]===Symbol.for("react.memo_cache_sentinel")?(n={documents:{}},m[2]=n):n=m[2];let[j,_]=(0,u.useReducer)(aI,n),[w,k]=(0,u.useState)(null!==y),[C,S]=(0,u.useState)(null);m[3]!==g||m[4]!==y||m[5]!==v?(i=async()=>{if(!y){k(!1);return}try{let e=await y.fetch(g,v);_({type:"DOCUMENTS_SET",documents:e}),k(!1)}catch(e){S(e)}},m[3]=g,m[4]=y,m[5]=v,m[6]=i):i=m[6];let z=i;m[7]!==z?(l=async e=>{if("welcome"===e.type&&(k(!0),await z(),k(!1)),"reconnect"===e.type&&k(!0),"mutation"===e.type){if("appear"===e.transition){let t=e.result;t&&_({type:"DOCUMENT_RECEIVED",payload:t})}if("disappear"===e.transition&&_({type:"DOCUMENT_DELETED",id:e.documentId}),"update"===e.transition){let t=e.result;t&&_({type:"DOCUMENT_UPDATED",payload:t})}}},m[7]=z,m[8]=l):l=m[8];let I=l;e:{let e;if(!y){let e;m[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,E.of)(),m[9]=e):e=m[9],o=e;break e}if(m[10]!==g||m[11]!==y.observable||m[12]!==v){let t;m[14]===Symbol.for("react.memo_cache_sentinel")?(t=e=>(S(e),(0,E.of)(e)),m[14]=t):t=m[14],e=y.observable.listen(g,v,aP).pipe((0,D.K)(t)),m[10]=g,m[11]=y.observable,m[12]=v,m[13]=e}else e=m[13];o=e}let P=o;return m[15]!==I||m[16]!==P?(r=()=>{let e=P.subscribe(I);return()=>{null==e||e.unsubscribe()}},a=[I,P],m[15]=I,m[16]=P,m[17]=r,m[18]=a):(r=m[17],a=m[18]),(0,u.useEffect)(r,a),m[19]!==j.documents?(c=Object.values(Object.keys(j.documents).reduce((e,t)=>{let n=j.documents[t],i=n._id===(0,h.qyu)(n._id),l=i?n._id:(0,h.qyu)(n._id);return e[l]&&!i||(e[l]=n),e},{})),m[19]=j.documents,m[20]=c):c=m[20],d=c,m[21]!==d||m[22]!==C||m[23]!==w?(p={data:d,isLoading:w,error:C},m[21]=d,m[22]=C,m[23]=w,m[24]=p):p=m[24],p}(i);if(a[4]!==m||a[5]!==t){let e;a[7]!==t?(e=e=>t.has((0,h.vsM)(e._id)),a[7]=t,a[8]=e):e=a[8],o=m.filter(e),a[4]=m,a[5]=t,a[6]=o}else o=a[6];return l=o,a[9]!==l||a[10]!==f?(r={data:l,isLoading:f},a[9]=l,a[10]=f,a[11]=r):r=a[11],r}({typeName:t.name}),[c,p]=(0,u.useState)(null),m=i.result.hits.length,f=(0,eP.b7)({data:r,columns:l,getCoreRowModel:(0,eA.sC)(),getFilteredRowModel:(0,eA.vL)(),getPaginationRowModel:(0,eA.G_)(),autoResetPageIndex:!1,initialState:{columnPinning:{left:["selected","Preview"]},pagination:{pageSize:25},columnVisibility:o},getRowId:e=>e._id,meta:{selectedAnchor:c,setSelectedAnchor:p,patchDocument:(e,t,n)=>null}}),{rows:v}=f.getRowModel();(0,u.useEffect)(()=>(n({type:"TERMS_TYPE_ADD",schemaType:t}),()=>{n({type:"TERMS_TYPE_REMOVE",schemaType:t})}),[t,n]);let x=(0,u.useCallback)(e=>(0,a.jsx)(d.xu,{as:"tr",paddingY:2,style:{display:"flex",width:"100%"},children:e.getVisibleCells().map(t=>(0,u.createElement)(af,{...t,key:e.original._id+t.id}))},e.original._id+e.id),[]),g="Total: ".concat(m," rows, showing ").concat(v.length," rows");return(0,a.jsxs)(aA,{direction:"column",paddingX:3,"data-testid":"document-sheet-list-pane",children:[(0,a.jsxs)(d.kC,{direction:"row",align:"center",paddingY:3,paddingX:1,justify:"space-between",children:[(0,a.jsxs)(d.kC,{direction:"row",align:"center",children:[(0,a.jsx)(aw,{}),(0,a.jsx)(d.xv,{size:0,muted:!0,children:g})]}),(0,a.jsx)(aj,{table:f})]}),(0,a.jsx)(aT,{children:(0,a.jsx)(au,{table:f,children:(0,a.jsxs)(aR,{children:[(0,a.jsx)("thead",{children:f.getHeaderGroups().map(e=>(0,a.jsx)(d.xu,{as:"tr",children:e.headers.map(t=>(0,a.jsx)(az,{header:t,headerGroup:e},t.id))},e.id))}),(0,a.jsx)("tbody",{children:f.getRowModel().rows.map(x)})]})})}),(0,a.jsx)(d.kC,{justify:"flex-end",padding:3,gap:4,paddingY:5,children:(0,a.jsx)(aE,{table:f})})]})}function aD(e){let t=(0,h.I_y)(),n=e.pane.schemaTypeName,i=t.get(n);if(!i||!(0,f.em)(i))throw Error('Schema type "'.concat(n,'" not found or not a document schema'));return(0,a.jsx)(h.X$R,{children:(0,a.jsx)(aM,{...e,documentSchemaType:i})})}let aL=e=>{let{menuItems:t,sortOrderRaw:n,layout:i}=e;return null==t?void 0:t.map(e=>{var t,l,o,r;return(null===(t=e.params)||void 0===t?void 0:t.layout)?{...e,selected:i===(null===(l=e.params)||void 0===l?void 0:l.layout)}:(null==e?void 0:null===(o=e.params)||void 0===o?void 0:o.by)?{...e,selected:ej(null==n?void 0:n.by,(null==e?void 0:null===(r=e.params)||void 0===r?void 0:r.by)||h.LZ8)}:{...e,selected:!1}})};function aN(e){let[t,n]=(0,u.useState)(e);return e_(t,e)?t:(n(e),e)}let aO=(0,u.memo)(function(e){let t,n,i,l,o,r,d,c,p,m,f;let v=(0,s.c)(36),{index:x,isSelected:g,pane:b,paneKey:y}=e,{name:j}=(0,h.Lky)(),{defaultLayout:_,initialValueTemplates:w,menuItemGroups:k,menuItems:C,options:S}=b,z=void 0===w?h.LZ8:w,{defaultOrdering:E,filter:I}=S,P=void 0===E?h.LZ8:E,A=aN(S.params||r0),T=b.source;e:{let e;v[0]!==I||v[1]!==A?(e=r7(I,A),v[0]=I,v[1]=A,v[2]=e):e=v[2];let n=e;if((null==n?void 0:n.length)===1){t=n[0];break e}t=null}let R=t,[M,D]=iY("layout",null!=R?R:b.id,void 0===_?"default":_),{title:L}=(0,h.v0Z)(b);v[3]!==P?(i=(null==P?void 0:P.length)>0?{by:P}:rQ,v[3]=P,v[4]=i):i=v[4],n=i;let[N,O]=iY("sort-order",null!=R?R:b.id,n);v[5]!==M||v[6]!==C||v[7]!==N?(o=aL({menuItems:C,sortOrderRaw:N,layout:M}),v[5]=M,v[6]=C,v[7]=N,v[8]=o):o=v[8],l=o;let U="sheetList"===M;v[9]!==U||v[10]!==M||v[11]!==e||v[12]!==N?(r=U?(0,u.createElement)(aD,{...e,key:e.pane.id}):(0,a.jsx)(aa,{...e,sortOrder:N,layout:M}),v[9]=U,v[10]=M,v[11]=e,v[12]=N,v[13]=r):r=v[13];let B=r,$=T||j;return v[14]!==U?(d=U?{}:{currentMaxWidth:350,maxWidth:640},v[14]=U,v[15]=d):d=v[15],v[16]!==b.source?(c=lH,v[16]=b.source,v[17]=c):c=v[17],v[18]!==x||v[19]!==z||v[20]!==k||v[21]!==l||v[22]!==D||v[23]!==O||v[24]!==L?(p=(0,a.jsx)(as,{index:x,initialValueTemplates:z,menuItemGroups:k,menuItems:l,setLayout:D,setSortOrder:O,title:L}),v[18]=x,v[19]=z,v[20]=k,v[21]=l,v[22]=D,v[23]=O,v[24]=L,v[25]=p):p=v[25],v[26]!==g||v[27]!==y||v[28]!==B||v[29]!==d||v[30]!==c||v[31]!==p?(m=(0,a.jsxs)(nc,{"data-ui":"DocumentListPane",id:y,minWidth:320,...d,selected:g,children:[c,p,B]}),v[26]=g,v[27]=y,v[28]=B,v[29]=d,v[30]=c,v[31]=p,v[32]=m):m=v[32],v[33]!==m||v[34]!==$?(f=(0,a.jsx)(h.cWh,{name:$,children:m}),v[33]=m,v[34]=$,v[35]=f):f=v[35],f});aO.displayName="Memo(PaneContainer)";let aU=e=>{let{liveEditSchemaType:t,version:n}=e;return t&&!n?{label:"Live",color:"danger"}:null};aU.displayName="LiveEditBadge";let aB={activePanes:[]};function a$(e){aB.activePanes=e}function aV(e,t,n,i){let l=(null==n?void 0:n.panes)||[],o=aB.activePanes||[],r=t.id||(0,v.Z)();for(let n=o.length-1;n>=0;n--){var a;let s=o[n];if("object"==typeof s&&((null===(a=s.canHandleIntent)||void 0===a?void 0:a.call(s,e,t,{pane:s,index:n}))||"documentList"===s.type&&s.schemaTypeName===t.type&&"_type == $type"===s.options.filter)){let o=function(e,t){let{template:n,version:i}=t;return"create"!==e?lq:n&&i?{template:n,version:i}:n?{template:n}:i?{version:i}:lq}(e,t);return{panes:l.slice(0,n).concat([[{id:r,params:o,payload:i}]])}}}return{intent:e,params:t,payload:i}}let aG=(0,x.zo)(h.l$t)(tT()),aF=(0,x.zo)(d.xu)(tR());function aK(e){let t,n,i,l,r,c,p,m,f,v,x,g,b;let y=(0,s.c)(39),{showChanges:j}=e,{documentId:_,schemaType:w,timelineError:k,timelineStore:C,value:S}=iT(),{selectedReleaseId:z}=(0,h.Wc0)(),[E,I]=(0,u.useState)(null),P=(0,h.P08)(C,aZ),A=(0,h.P08)(C,aY),T=(0,h.P08)(C,aq),R=(0,h.P08)(C,aH),M=(0,h.P08)(C,aX),D="loading"===R,L=!T,{t:N}=(0,h.$G7)(o.UA);if(y[0]!==A||y[1]!==_||y[2]!==L||y[3]!==w||y[4]!==S?(n={documentId:_,schemaType:w,FieldWrapper:aW,rootDiff:A,isComparingCurrent:L,value:S,showFromValue:!0},y[0]=A,y[1]=_,y[2]=L,y[3]=w,y[4]=S,y[5]=n):n=y[5],t=n,z){let e;return y[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(d.kC,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,a.jsx)(d.Zb,{flex:1,padding:2,paddingTop:0,children:(0,a.jsx)(o1,{versionError:!0})})}),y[6]=e):e=y[6],e}return y[7]!==N?(i=N("changes.from.label"),y[7]=N,y[8]=i):i=y[8],y[9]!==i?(l=(0,a.jsx)(d.xv,{size:1,muted:!0,children:i}),y[9]=i,y[10]=l):l=y[10],y[11]!==M?(r=(0,a.jsx)(o4,{mode:"since",chunk:M,placement:"bottom-start"}),y[11]=M,y[12]=r):r=y[12],y[13]!==N?(c=N("changes.to.label"),y[13]=N,y[14]=c):c=y[14],y[15]!==c?(p=(0,a.jsx)(d.xv,{size:1,muted:!0,children:c}),y[15]=c,y[16]=p):p=y[16],y[17]!==P?(m=(0,a.jsx)(o4,{chunk:P,mode:"rev",placement:"bottom-end"}),y[17]=P,y[18]=m):m=y[18],y[19]!==l||y[20]!==r||y[21]!==p||y[22]!==m?(f=(0,a.jsx)(d.xu,{padding:3,children:(0,a.jsxs)(aF,{paddingX:2,paddingBottom:2,children:[l,r,p,m]})}),y[19]=l,y[20]=r,y[21]=p,y[22]=m,y[23]=f):f=y[23],y[24]!==A||y[25]!==t||y[26]!==D||y[27]!==w||y[28]!==j||y[29]!==k?(v=j&&(0,a.jsx)(aJ,{diff:A,documentContext:t,error:k,loading:D,schemaType:w}),y[24]=A,y[25]=t,y[26]=D,y[27]=w,y[28]=j,y[29]=k,y[30]=v):v=y[30],y[31]!==v?(x=(0,a.jsx)(aG,{"data-ui":"Scroller",ref:I,children:(0,a.jsx)(d.xu,{flex:1,paddingX:3,height:"fill",children:v})}),y[31]=v,y[32]=x):x=y[32],y[33]!==E||y[34]!==x?(g=(0,a.jsx)(d.Zb,{flex:1,paddingX:2,paddingY:2,children:(0,a.jsx)(d.NM,{element:E,children:x})}),y[33]=E,y[34]=x,y[35]=g):g=y[35],y[36]!==g||y[37]!==f?(b=(0,a.jsxs)(d.kC,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[f,g]}),y[36]=g,y[37]=f,y[38]=b):b=y[38],b}function aW(e){return(0,a.jsx)(h.MUX,{...e,hasRevertHover:!1})}function aX(e){return e.sinceTime}function aH(e){return e.selectionState}function aq(e){return e.onOlderRevision}function aY(e){return e.diff}function aZ(e){return e.revTime}function aJ(e){let t,n;let i=(0,s.c)(9),{error:l,diff:o,documentContext:r,loading:d,schemaType:c}=e;if(l){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(h.kwM,{}),i[0]=e):e=i[0],e}if(d){let e;return i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(h.Bwn,{showText:!0}),i[1]=e):e=i[1],e}if(!o){let e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(h.kwM,{}),i[2]=e):e=i[2],e}return i[3]!==o||i[4]!==c?(t=(0,a.jsx)(h.EyJ,{diff:o,schemaType:c}),i[3]=o,i[4]=c,i[5]=t):t=i[5],i[6]!==r||i[7]!==t?(n=(0,a.jsx)(p.H7.Provider,{value:r,children:t}),i[6]=r,i[7]=t,i[8]=n):n=i[8],n}let aQ=e=>!(0,h.Pm6)(e)&&!(0,h.E8O)(e)&&!(0,h.fWL)(e)&&!(0,h.rxG)(e)&&!(0,h.c$P)(e);function a0(e){let t,n,i,l,o,c,u,p;let m=(0,s.c)(27),{event:f,isSelected:v,onSelect:x,optionsMenu:g}=e,{t:b}=(0,h.$G7)("studio");m[0]!==f?(t=aQ(f),m[0]=f,m[1]=t):t=m[1];let y=t;m[2]!==f||m[3]!==y||m[4]!==x?(n=e=>{e.preventDefault(),e.stopPropagation(),y&&x(f)},m[2]=f,m[3]=y,m[4]=x,m[5]=n):n=m[5];let j=n;m[6]!==y||m[7]!==b?(i=y?"":b("changes.not-selectable"),m[6]=y,m[7]=b,m[8]=i):i=m[8];let _=y?"button":"div",w=y?"pointer":"default";return m[9]!==w?(l={cursor:w,width:"100%"},m[9]=w,m[10]=l):l=m[10],m[11]!==f?(o=(0,a.jsx)(h.juk,{event:f,showChangesBy:"tooltip"}),m[11]=f,m[12]=o):o=m[12],m[13]!==f.timestamp||m[14]!==j||m[15]!==v||m[16]!==_||m[17]!==l||m[18]!==o?(c=(0,a.jsx)(d.Zb,{as:_,onClick:j,padding:2,pressed:v,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-timestamp":f.timestamp,style:l,children:o}),m[13]=f.timestamp,m[14]=j,m[15]=v,m[16]=_,m[17]=l,m[18]=o,m[19]=c):c=m[19],m[20]!==y||m[21]!==i||m[22]!==c?(u=(0,a.jsx)(r.u,{content:i,disabled:y,children:c}),m[20]=y,m[21]=i,m[22]=c,m[23]=u):u=m[23],m[24]!==g||m[25]!==u?(p=(0,a.jsxs)(d.kC,{gap:1,children:[u,g]}),m[24]=g,m[25]=u,m[26]=p):p=m[26],p}function a1(e){var t,n,i,l;let c,u,p,m,f,v,x,g,b,y,j;let w=(0,s.c)(41),{event:k}=e,{t:C}=(0,h.$G7)(o.UA),{t:S}=(0,h.$G7)(),z=(0,d.vI)(),{params:E,setParams:I}=t0(),P=(0,h.RQ8)();w[0]!==k.id||w[1]!==k.versionId||w[2]!==k.versionRevisionId||w[3]!==E||w[4]!==I?(c=()=>{I({...E,rev:k.versionRevisionId||"@lastPublished",since:void 0,historyEvent:k.id,historyVersion:(0,h.eBk)(k.versionId)})},w[0]=k.id,w[1]=k.versionId,w[2]=k.versionRevisionId,w[3]=E,w[4]=I,w[5]=c):c=w[5];let A=c;w[6]!==k.versionRevisionId||w[7]!==E||w[8]!==I||w[9]!==P?(u=()=>{I({...E,rev:k.versionRevisionId,preserveRev:"true",since:void 0}),setTimeout(()=>{P("drafts")},100)},w[6]=k.versionRevisionId,w[7]=E,w[8]=I,w[9]=P,w[10]=u):u=w[10];let T=u;w[11]!==k.release?(p=e=>{let{children:t}=e;return(0,a.jsx)(h.Q3e,{$tone:k.release?(0,h._wt)(k.release)?(0,h.Ydd)(k.release):"default":void 0,children:t})},w[11]=k.release,w[12]=p):p=w[12];let R=p,M=k.release&&!(0,h._wt)(k.release),D="timeline-item-menu-button-".concat(k.versionId);w[13]!==C?(m=C("timeline-item.menu-button.aria-label"),w[13]=C,w[14]=m):m=w[14],w[15]!==k.release||w[16]!==M||w[17]!==C?(f=M?C("timeline-item.not-found-release.tooltip",{releaseId:(null===(t=k.release)||void 0===t?void 0:t._id)?(0,h.QXs)(k.release._id):void 0}):C("timeline-item.menu-button.tooltip"),w[15]=k.release,w[16]=M,w[17]=C,w[18]=f):f=w[18],w[19]!==f?(v={content:f},w[19]=f,w[20]=v):v=w[20],w[21]!==M||w[22]!==m||w[23]!==v?(x=(0,a.jsx)(h.lXN,{"aria-label":m,tooltipProps:v,disabled:M}),w[21]=M,w[22]=m,w[23]=v,w[24]=x):x=w[24],w[25]!==R||w[26]!==k.release||w[27]!==k.versionRevisionId||w[28]!==T||w[29]!==A||w[30]!==C||w[31]!==S?(g=(0,a.jsx)(d.v2,{padding:1,children:k.release?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.nR,{intent:h.B91,params:{id:(0,h.QXs)(k.release._id)},style:{textDecoration:"none"},children:(0,a.jsx)(d.sN,{padding:3,children:(0,a.jsx)(d.kC,{align:"center",justify:"flex-start",children:(0,a.jsx)(d.xv,{size:1,style:{textDecoration:"none"},children:(0,a.jsx)(h.vNl,{components:{VersionBadge:e=>{let{children:t}=e;return(0,a.jsx)(R,{children:t})}},i18nKey:"events.open.release",values:{releaseTitle:(null===(n=k.release.metadata)||void 0===n?void 0:n.title)||S("release.placeholder-untitled-release")},t:C})})})})}),(0,a.jsx)(d.sN,{onClick:A,children:(0,a.jsx)(d.kC,{align:"center",justify:"flex-start",children:(0,a.jsx)(d.xv,{size:1,children:(0,a.jsx)(h.vNl,{components:{VersionBadge:e=>{let{children:t}=e;return(0,a.jsx)(R,{children:t})}},i18nKey:"events.inspect.release",values:{releaseTitle:(null===(i=k.release.metadata)||void 0===i?void 0:i.title)||S("release.placeholder-untitled-release")},t:C})})})})]}):(0,a.jsx)(d.sN,{onClick:T,disabled:!k.versionRevisionId,children:(0,a.jsx)(d.kC,{align:"center",children:(0,a.jsx)(d.xv,{size:1,children:(0,a.jsx)(h.vNl,{components:{VersionBadge:a2},i18nKey:"events.open.draft",t:C})})})})}),w[25]=R,w[26]=k.release,w[27]=k.versionRevisionId,w[28]=T,w[29]=A,w[30]=C,w[31]=S,w[32]=g):g=w[32];let L=null===(l=z.elements)||void 0===l||!l[o3]||o3;return w[33]===Symbol.for("react.memo_cache_sentinel")?(b=["bottom-end","bottom-start"],w[33]=b):b=w[33],w[34]!==L?(y={portal:L,placement:"bottom",fallbackPlacements:b},w[34]=L,w[35]=y):y=w[35],w[36]!==y||w[37]!==D||w[38]!==x||w[39]!==g?(j=(0,a.jsx)(r.j2,{id:D,button:x,menu:g,popover:y}),w[36]=y,w[37]=D,w[38]=x,w[39]=g,w[40]=j):j=w[40],j}function a2(e){let{children:t}=e;return(0,a.jsx)(h.Q3e,{$tone:"caution",children:t})}let a3=b.E.create(d.xu),a4={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},a5=e=>{let{events:t,hasMoreEvents:n,selectedEventId:i,onLoadMore:l,onSelect:o,listMaxHeight:r="calc(100vh - 280px)",fetchEventChildren:s}=e,[c,p]=(0,u.useState)(!1),{t:m}=(0,h.$G7)("studio"),[f,v]=(0,u.useState)(()=>{if(i){let e=t.find(e=>e.id===i);if(e&&"parentId"in e&&e.parentId)return new Set([e.parentId])}return new Set}),[x,g]=(0,u.useState)(new Set),b=(0,u.useMemo)(()=>t.filter(e=>(0,h.zv9)(e)&&e.parentId?t[t.length-1].id===e.id||f.has(e.parentId):!(0,h.yLX)(e)||!e.parentId||f.has(e.parentId)),[f,t]),y=(0,u.useCallback)(e=>async()=>{let t=e.id,n=!1;v(e=>{let i=new Set(e);return e.has(t)?i.delete(t):(n=!0,i.add(t)),i}),n&&(g(e=>{let n=new Set(e);return n.add(t),n}),await s(e),g(e=>{let n=new Set(e);return n.delete(t),n}))},[s,g]),j=(0,u.useCallback)(e=>{o(e)},[o]),_=(0,u.useCallback)(e=>{let t=(0,h.ljK)(e.documentId);return(0,h.uUJ)(e)&&"published"===t?(0,a.jsx)(a1,{event:e}):(0,h.uUJ)(e)&&"draft"===t&&e.creationEvent||(0,h.Pm6)(e)&&e.creationEvent?(0,a.jsx)(oN,{isExpanded:f.has(e.id),onExpand:y(e)}):null},[f,y]),w=(0,u.useCallback)((e,t)=>{let{activeIndex:l}=t,o=(0,h.zv9)(e)&&e.parentId&&x.has(e.parentId),r=l===b.length-1;return o?(0,a.jsx)(a3,{animate:{opacity:1},initial:{opacity:0},transition:{duration:.2,delay:.2},children:(0,a.jsx)(d.kC,{align:"center",justify:"center",style:{height:57},children:(0,a.jsx)(d.$j,{})})}):(0,a.jsxs)(a3,{paddingBottom:1,paddingRight:1,animate:"animate",exit:"exit",initial:"initial",variants:"parentId"in e?a4:void 0,paddingLeft:((0,h.yLX)(e)||(0,h.zv9)(e))&&e.parentId&&!r?4:1,children:[(0,a.jsx)(a0,{event:e,isSelected:e.id===i,onSelect:j,optionsMenu:_(e)}),r&&n&&(0,a.jsx)(h.Bwn,{})]},e.timestamp)},[x,i,j,_,b.length,n]);(0,u.useEffect)(()=>p(!0),[]);let k=b.findIndex(e=>e.id===i);return(0,a.jsx)(oB,{$visible:!k||c,"data-ui":"timeline",children:b.length>0?(0,a.jsx)(oU,{direction:"column",$maxHeight:r,id:"timeline-list-wrapper",children:(0,a.jsx)(h.e8h,{activeItemDataAttr:"data-hovered",ariaLabel:m("timeline.list.aria-label"),autoFocus:"list",initialIndex:k,initialScrollAlign:"center",itemHeight:57,items:b,onEndReached:l,onEndReachedIndexOffset:20,overscan:5,renderItem:w,wrapAround:!1})}):(0,a.jsxs)(d.Kq,{padding:3,space:3,children:[(0,a.jsx)(d.xv,{size:1,weight:"medium",children:m("timeline.error.no-document-history-title")}),(0,a.jsx)(d.xv,{muted:!0,size:1,children:m("timeline.error.no-document-history-description")})]})})};a5.displayName="EventsTimeline";let a6=(0,x.zo)(r.J2)(tM()),a7={timestamp:{dateStyle:"medium",timeStyle:"short"}};function a8(e){let{event:t,events:n,mode:i,placement:l}=e,{setTimelineRange:o}=iT(),[s,p]=(0,u.useState)(!1),[f,v]=(0,u.useState)(null),[x,g]=(0,u.useState)(null),b=(0,c.pm)(),{nextCursor:y,loading:j,error:_,findRangeForRevision:w,findRangeForSince:k,loadMoreEvents:C,expandEvent:S}=(0,h.hIH)(),{t:z}=(0,h.$G7)("studio"),E=(0,u.useCallback)(()=>{p(!0)},[]),I=(0,u.useCallback)(()=>{p(!1)},[]),P=(0,u.useCallback)(e=>{s&&("Escape"===e.key||"Tab"===e.key)&&(I(),null==f||f.focus())},[f,I,s]);(0,d.qh)(P),(0,d.Of)(s&&I,()=>[f,x]);let A=(0,u.useCallback)(e=>{try{if((0,h.Pm6)(e)||(0,h.E8O)(e)||(0,h.fWL)(e)||(0,h.rxG)(e)||(0,h.c$P)(e)){console.error("Event is not selectable");return}let[t,n]=w(null==e?void 0:e.id);o(t,n),I()}catch(e){b.push({closable:!0,description:e.message,status:"error",title:z("timeline.error.unable-to-load-revision")})}},[z,b,o,w,I]),T=(0,u.useCallback)(e=>{try{let[t,n]=k(e.id);o(t,n),I()}catch(e){b.push({closable:!0,description:e.message,status:"error",title:z("timeline.error.unable-to-load-revision")})}},[k,o,b,z,I]),R=(0,u.useCallback)(()=>{!j&&y&&C()},[j,C,y]),M=(0,u.useMemo)(()=>_?(0,a.jsx)(o1,{}):(0,a.jsx)(a5,{events:n,fetchEventChildren:S,hasMoreEvents:!!y,selectedEventId:null==t?void 0:t.id,onLoadMore:R,onSelect:"rev"===i?A:T}),[_,i,S,n,y,null==t?void 0:t.id,R,T,A]),D=t?z(h.e9p[t.documentVariantType][t.type],{context:"timestamp",timestamp:new Date(t.timestamp),formatParams:a7}):z("timeline.latest-revision"),L=t?z(h.e9p[t.documentVariantType][t.type],{context:"timestamp",timestamp:new Date(t.timestamp),formatParams:a7}):n.length>0?z("timeline.since-version-missing"):z("timeline.no-previous-events"),N="rev"===i?D:L;return(0,a.jsx)(d.Xp,{__unstable_elements:{"timeline-menu":x},children:(0,a.jsx)(a6,{"data-testid":"timeline-menu",constrainSize:!0,content:s&&M,"data-ui":"versionMenu",open:s,placement:l,matchReferenceWidth:!0,portal:!0,ref:g,children:(0,a.jsx)(d.kC,{width:"fill",children:(0,a.jsx)(r.zx,{"data-testid":s?"timeline-menu-close-button":"timeline-menu-open-button",disabled:j||!n.length,mode:"ghost",onClick:s?I:E,ref:v,selected:s,width:"fill",tooltipProps:null,justify:"space-between",style:{maxWidth:"100%"},iconRight:m.v4q,text:j?z("timeline.loading-history"):N})})})})}let a9=(0,x.zo)(h.l$t)(tD()),se=(0,x.zo)(d.xu)(tL()),st=(0,x.zo)(d.kC)(tN()),sn={diff:null,loading:!0,error:null},si=()=>{var e,t;let n,i,l,r,c,u,m,f,v,x,b,y,j;let _=(0,s.c)(35),{documentId:w,schemaType:k,editState:C,displayed:S}=iT(),{selectedPerspective:z,selectedPerspectiveName:E,selectedReleaseId:I}=(0,h.Wc0)(),{t:P}=(0,h.$G7)(o.UA);if(_[0]!==(null==C?void 0:C.published)?(i=null!==(t=null==C?void 0:C.published)&&void 0!==t?t:{},_[0]=null==C?void 0:C.published,_[1]=i):i=_[1],_[2]!==S||_[3]!==i){let e;_[5]!==S?(e=null!=S?S:{},_[5]=S,_[6]=e):e=_[6],l=(0,g.t)((0,g.r)(i,{author:""}),(0,g.r)(e,{author:""})),_[2]=S,_[3]=i,_[4]=l}else l=_[4];return(n=l,(!I||(null==C?void 0:C.version))&&("drafts"!==z||(null==C?void 0:C.draft))&&"published"!==E&&(null==S?void 0:S._rev))?(_[7]!==P?(r=P("events.compare-with-published.title"),_[7]=P,_[8]=r):r=_[8],_[9]!==r?(c=(0,a.jsx)(d.xv,{size:1,weight:"medium",children:r}),_[9]=r,_[10]=c):c=_[10],_[11]!==z?(u=(0,h._wt)(z)?null===(e=z.metadata)||void 0===e?void 0:e.title:"draft",_[11]=z,_[12]=u):u=_[12],_[13]!==u?(m={version:u},_[13]=u,_[14]=m):m=_[14],_[15]!==P||_[16]!==m?(f=(0,a.jsx)(d.xv,{size:1,muted:!0,children:(0,a.jsx)(h.vNl,{i18nKey:"events.compare-with-published.description",t:P,values:m})}),_[15]=P,_[16]=m,_[17]=f):f=_[17],_[18]!==c||_[19]!==f?(v=(0,a.jsx)(d.Zb,{borderBottom:!0,paddingBottom:3,children:(0,a.jsxs)(d.Kq,{space:3,paddingTop:1,children:[c,f]})}),_[18]=c,_[19]=f,_[20]=v):v=_[20],_[21]!==S||_[22]!==w||_[23]!==n||_[24]!==k?(x={documentId:w,schemaType:k,rootDiff:n,isComparingCurrent:!0,FieldWrapper:sa,value:S,showFromValue:!0},_[21]=S,_[22]=w,_[23]=n,_[24]=k,_[25]=x):x=_[25],_[26]!==n||_[27]!==k?(b=(0,a.jsx)(d.xu,{paddingY:1,children:(0,a.jsx)(h.EyJ,{diff:n,schemaType:k})}),_[26]=n,_[27]=k,_[28]=b):b=_[28],_[29]!==b||_[30]!==x?(y=(0,a.jsx)(p.H7.Provider,{value:x,children:b}),_[29]=b,_[30]=x,_[31]=y):y=_[31],_[32]!==y||_[33]!==v?(j=(0,a.jsxs)(d.Kq,{space:2,marginBottom:3,children:[v,y]}),_[32]=y,_[33]=v,_[34]=j):j=_[34],j):null};function sl(e){let{showChanges:t}=e,{documentId:n,schemaType:i,timelineError:l,value:o,formState:r}=iT(),[s,c]=(0,u.useState)(null),{events:p,revision:m,sinceRevision:f,getChangesList:v}=(0,h.hIH)(),x=!(null==m?void 0:m.revisionId),g=(0,u.useMemo)(()=>v(),[v]),{diff:y,loading:_,error:w}=(0,j.m)(g,sn),{t:k}=(0,h.$G7)("studio"),C=(0,u.useMemo)(()=>({documentId:n,schemaType:i,FieldWrapper:e=>e.path.length>0?(0,a.jsx)(h.MUX,{...e}):e.children,rootDiff:y,isComparingCurrent:x&&!(null==r?void 0:r.readOnly),value:o,showFromValue:!0}),[y,n,x,null==r?void 0:r.readOnly,i,o]),[S,z]=(0,u.useMemo)(()=>p?[p.find(e=>e.id===(null==f?void 0:f.revisionId))||null,p.find(e=>e.id===(null==m?void 0:m.revisionId))||p[0]]:[null,null],[p,null==m?void 0:m.revisionId,null==f?void 0:f.revisionId]),E=(0,u.useMemo)(()=>z?p.slice(p.indexOf(z)+1).map(e=>"parentId"in z&&"parentId"in e&&e.parentId===z.parentId||"parentId"in e&&z.id===e.parentId?{...e,parentId:void 0}:e):p.slice(1),[p,z]);return p.length?(0,a.jsxs)(d.kC,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[(0,a.jsxs)(d.xu,{padding:3,style:{position:"relative"},children:[(0,a.jsxs)(se,{paddingX:2,paddingBottom:2,children:[(0,a.jsx)(d.xv,{size:1,muted:!0,children:k("changes.inspector.from-label")}),(0,a.jsx)(a8,{event:S||null,events:E,mode:"since",placement:"bottom-start"}),(0,a.jsx)(d.xv,{size:1,muted:!0,children:k("changes.inspector.to-label")}),(0,a.jsx)(a8,{event:z||null,events:p,mode:"rev",placement:"bottom-end"})]}),_&&(0,a.jsx)(b.E.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,a.jsxs)(st,{justify:"center",align:"center",gap:2,children:[(0,a.jsx)(d.xv,{muted:!0,size:0,children:k("changes.loading-changes")}),(0,a.jsx)(d.$j,{size:0})]})})]}),(0,a.jsx)(d.Zb,{flex:1,paddingX:2,paddingY:2,children:(0,a.jsx)(d.NM,{element:s,children:(0,a.jsx)(a9,{"data-ui":"Scroller",ref:c,children:(0,a.jsx)(d.xu,{flex:1,paddingX:3,height:"fill",children:t&&(0,a.jsx)(so,{documentContext:C,error:l||w,loading:(null==m?void 0:m.loading)||(null==f?void 0:f.loading)||!1,schemaType:i,sameRevisionSelected:(null==S?void 0:S.id)===(null==z?void 0:z.id),sinceEvent:S})})})})})]}):(0,a.jsx)(d.xu,{paddingX:2,children:(0,a.jsxs)(d.Kq,{padding:3,space:3,children:[(0,a.jsx)(d.xv,{size:1,weight:"medium",children:k("timeline.error.no-document-history-title")}),(0,a.jsx)(d.xv,{muted:!0,size:1,children:k("timeline.error.no-document-history-description")})]})})}function so(e){let t,n;let i=(0,s.c)(15),{error:l,documentContext:o,loading:r,schemaType:c,sameRevisionSelected:u,sinceEvent:m}=e;if(l){let e,t,n;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(si,{}),i[0]=e):e=i[0],i[1]!==l||i[2]!==(null==m?void 0:m.type)?(t=(null==m?void 0:m.type)!=="historyCleared"&&(0,a.jsx)(h.DAA,{error:l}),i[1]=l,i[2]=null==m?void 0:m.type,i[3]=t):t=i[3],i[4]!==t?(n=(0,a.jsxs)(a.Fragment,{children:[e,t]}),i[4]=t,i[5]=n):n=i[5],n}if(r){let e;return i[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(h.Bwn,{showText:!0}),i[6]=e):e=i[6],e}if(u){let e;return i[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(sr,{}),i[7]=e):e=i[7],e}if(!o.rootDiff){let e;return i[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(b.E.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,a.jsx)(h.kwM,{})}),i[8]=e):e=i[8],e}return i[9]!==o.rootDiff||i[10]!==c?(t=(0,a.jsx)(d.xu,{paddingY:1,children:(0,a.jsx)(h.EyJ,{diff:o.rootDiff,schemaType:c})}),i[9]=o.rootDiff,i[10]=c,i[11]=t):t=i[11],i[12]!==o||i[13]!==t?(n=(0,a.jsx)(p.H7.Provider,{value:o,children:t}),i[12]=o,i[13]=t,i[14]=n):n=i[14],n}function sr(){let e,t,n,i,l,o,r;let c=(0,s.c)(12),{t:u}=(0,h.$G7)("");return c[0]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:1},t={opacity:0},n={delay:.2,duration:.2},c[0]=e,c[1]=t,c[2]=n):(e=c[0],t=c[1],n=c[2]),c[3]!==u?(i=u("changes.same-revision-selected-title"),c[3]=u,c[4]=i):i=c[4],c[5]!==i?(l=(0,a.jsx)(d.xv,{size:1,weight:"medium",as:"h3",children:i}),c[5]=i,c[6]=l):l=c[6],c[7]!==u?(o=(0,a.jsx)(d.xv,{as:"p",size:1,muted:!0,children:(0,a.jsx)(h.vNl,{i18nKey:"changes.same-revision-selected-description",t:u})}),c[7]=u,c[8]=o):o=c[8],c[9]!==l||c[10]!==o?(r=(0,a.jsx)(b.E.div,{animate:e,initial:t,transition:n,children:(0,a.jsxs)(d.Kq,{space:3,paddingTop:2,children:[l,o]})}),c[9]=l,c[10]=o,c[11]=r):r=c[11],r}function sa(e){return e.children}let ss=(0,x.zo)(h.l$t)(tO());function sd(e){var t;let{showList:n}=e,[i,l]=(0,u.useState)(null),[o,r]=(0,u.useState)(0),{setTimelineRange:s}=iT(),p=(0,u.useCallback)(e=>{!o&&e&&(r(e.clientHeight?e.clientHeight-1:0),l(e))},[o]),{events:m,nextCursor:f,loading:v,error:x,revision:g,loadMoreEvents:b,findRangeForRevision:y,expandEvent:j}=(0,h.hIH)(),{t:_}=(0,h.$G7)("studio"),w=(0,c.pm)(),k=(0,u.useCallback)(e=>{try{if((0,h.Pm6)(e)||(0,h.E8O)(e)||(0,h.fWL)(e)||(0,h.rxG)(e)||(0,h.c$P)(e)){console.error("Event is not selectable");return}let[t,n]=y(e.id);s(t,n)}catch(e){w.push({closable:!0,description:e.message,status:"error",title:_("timeline.error.unable-to-load-revision")})}},[_,w,s,y]),C=v&&!m.length;return(0,a.jsx)(d.kC,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,a.jsx)(d.Zb,{flex:1,padding:2,paddingTop:0,children:x?(0,a.jsx)(o1,{}):(0,a.jsx)(d.NM,{element:i,children:(0,a.jsxs)(ss,{"data-ui":"Scroller",ref:p,children:[o&&n&&!C?(0,a.jsx)(a5,{events:m,fetchEventChildren:j,hasMoreEvents:!!f,selectedEventId:(null==g?void 0:g.revisionId)||(null===(t=m[0])||void 0===t?void 0:t.id),onLoadMore:b,onSelect:k,listMaxHeight:"".concat(o,"px")}):null,v&&(0,a.jsx)(h.Bwn,{})]})})})})}let sc=(0,x.zo)(h.l$t)(tU());function su(e){let{showList:t}=e,{timelineError:n,setTimelineRange:i,timelineStore:l}=iT(),{selectedReleaseId:o}=(0,h.Wc0)(),[r,s]=(0,u.useState)(null),[p,m]=(0,u.useState)(0),f=(0,u.useCallback)(e=>{(null==e?void 0:e.clientHeight)&&(m(e.clientHeight-1),s(e))},[]),v=(0,h.P08)(l,e=>e.chunks),x=(0,h.P08)(l,e=>e.realRevChunk),g=(0,h.P08)(l,e=>e.hasMoreChunks),b=(0,h.P08)(l,e=>e.isLoading),{t:y}=(0,h.$G7)("studio"),j=(0,c.pm)(),_=(0,u.useCallback)(e=>{try{let[t,n]=(null==l?void 0:l.findRangeForRev(e))||[null,null];i(t,n)}catch(e){j.push({closable:!0,description:e.message,status:"error",title:y("timeline.error.unable-to-load-revision")})}},[i,y,l,j]),w=(0,u.useCallback)(()=>{b||null==l||l.loadMore()},[b,l]);return(0,a.jsx)(d.kC,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,a.jsx)(d.Zb,{flex:1,padding:2,paddingTop:0,children:n||o?(0,a.jsx)(o1,{versionError:!!o}):(0,a.jsx)(d.NM,{element:r,children:(0,a.jsx)(sc,{"data-ui":"Scroller",ref:f,children:p&&t?(0,a.jsx)(o0,{chunks:v,hasMoreChunks:g,lastChunk:x,onLoadMore:w,onSelect:_,listMaxHeight:"".concat(p,"px")}):null})})})})}let sp=(0,x.zo)(d.kC)(tB()),sm=["history","review"],sh=e=>e&&sm.includes(e),sf={error:m.uIy,warning:m.foC,info:m.hQ6},sv={error:"critical",warning:"caution",info:"primary"};function sx(e){let t,n,i,l;let o=(0,s.c)(17),{marker:c,onOpen:p,schemaType:m,value:h}=e;o[0]!==c.path||o[1]!==p?(t=()=>p(c.path),o[0]=c.path,o[1]=p,o[2]=t):t=o[2];let f=t,[v,x]=(0,u.useState)(null),g=sf[c.level];return o[3]!==v?(n=v&&(0,a.jsx)(d.Zb,{padding:3,radius:2,tone:"critical",children:(0,a.jsx)(d.xv,{size:1,children:v.error.message})}),o[3]=v,o[4]=n):n=o[4],o[5]!==g||o[6]!==v||o[7]!==f||o[8]!==c.level||o[9]!==c.message||o[10]!==c.path||o[11]!==m||o[12]!==h?(i=!v&&(0,a.jsx)(d.Zb,{__unstable_focusRing:!0,as:"button",onClick:f,padding:3,radius:2,tone:sv[c.level],children:(0,a.jsxs)(d.kC,{align:"flex-start",gap:3,children:[(0,a.jsx)(d.xu,{flex:"none",children:(0,a.jsx)(d.xv,{size:1,children:(0,a.jsx)(g,{})})}),(0,a.jsxs)(d.Kq,{flex:1,space:2,children:[(0,a.jsx)(sg,{path:c.path,schemaType:m,value:h}),(0,a.jsx)(d.xv,{muted:!0,size:1,children:c.message})]})]})}),o[5]=g,o[6]=v,o[7]=f,o[8]=c.level,o[9]=c.message,o[10]=c.path,o[11]=m,o[12]=h,o[13]=i):i=o[13],o[14]!==n||o[15]!==i?(l=(0,a.jsxs)(r.SV,{onCatch:x,children:[n,i]}),o[14]=n,o[15]=i,o[16]=l):l=o[16],l}function sg(e){let{path:t,schemaType:n,value:i}=e,l=(0,u.useMemo)(()=>{try{return function(e){let{path:t,schemaType:n,value:i}=e,l=[],o=n,r=i;for(let e of t){if("string"==typeof e){if(!(0,h.Uy$)(r)&&void 0!==r)throw Error("Parent value is not an object, cannot get path segment: .".concat(e));if("object"!==o.jsonType)throw Error("Parent type is not an object schema type, cannot get path segment: .".concat(e));r=null==r?void 0:r[e];let t=o.fields.find(t=>t.name===e);if(!t)return l.push({name:e}),l;o=t.type,l.push(o);continue}if("number"==typeof e){if(!(0,h.kJL)(r)&&void 0!==r)throw Error("Parent value is not an array, cannot get path segment: [".concat(e,"]"));if("array"!==o.jsonType)throw Error("Parent type is not an array schema type, cannot get path segment: [".concat(e,"]"));r=null==r?void 0:r[e];let t=o.of.find(e=>"string"==typeof r?"string"===e.jsonType:"number"==typeof r?"number"===e.jsonType:"boolean"==typeof r?"boolean"===e.jsonType:!!(0,h.Uy$)(r)&&e.name===(null==r?void 0:r._type));if(!t)throw Error("Item type not found: [".concat(e,"]"));o=t,l.push(o);continue}if((0,h.Uy$)(e)&&e._key){if(!(0,h.kJL)(r))throw Error("Parent value is not an array, cannot get path segment: [_key == ".concat(e,"]"));if("array"!==o.jsonType)throw Error("Parent type is not an array schema type, cannot get path segment: .".concat(e));if(r=(null!=r?r:[]).find(t=>(0,h.Uy$)(t)&&t._key===e._key),!(0,h.Uy$)(r))throw Error("Array item not found: [_key == ".concat(e._key,"]"));let t=o.of.find(e=>(0,h.Uy$)(r)&&e.name===(null==r?void 0:r._type));if(!t)throw Error("Array item type not found: .".concat(null==r?void 0:r._type));o=t,l.push(o);continue}throw Error("Invalid path segment: ".concat(JSON.stringify(e)))}return l}({path:t,schemaType:n,value:i})}catch(e){console.error(e)}return null},[t,n,i]);return(null==l?void 0:l.length)?(0,a.jsx)(d.xv,{size:1,children:l.map((e,t)=>(0,a.jsxs)(u.Fragment,{children:[t>0&&(0,a.jsx)("span",{style:{color:"var(--card-muted-fg-color)",opacity:.5},children:" / "}),(0,a.jsx)("span",{style:{fontWeight:500},children:e.title||e.name})]},t))}):null}let sb={},sy=_.BC.create("/",[_.BC.intents("/intent"),_.BC.create("/edit/:type/:editDocumentId",[_.BC.create({path:"/:params",transform:{params:{toState:function(e){try{return JSON.parse(decodeURIComponent(e))}catch(e){return console.warn("Failed to parse JSON parameters"),{}}},toPath:function(e){return JSON.stringify(e)}}}})]),_.BC.create({path:"/:panes",children:[_.BC.create("/:action",_.BC.create("/:legacyEditDocumentId"))],transform:{panes:{toState:function(e){var t;return -1!==(t=decodeURIComponent(e)).indexOf(",{")?function(e){let t=[],n=e;for(;n.length;){let[e,i,l]=n.match(sj)||[];if(!e){n=n.slice(1);continue}let o=l&&function(e){try{return JSON.parse(e)}catch(e){console.warn("Failed to parse parameters: ".concat(e.message));return}}(l);t.push({id:i,payload:o}),n=n.slice(e.length)}return[t]}(t):t.split(";").map(e=>{let[t,...n]=e.split("|").map(e=>{let[t,...n]=e.split(",");return function(e,t){let n={...t,params:sb,payload:void 0};return e.reduce((e,t)=>{if(s_(t)){let n=t.slice(0,t.indexOf("=")),i=t.slice(n.length+1);e.params={...e.params,[decodeURIComponent(n)]:decodeURIComponent(i)}}else sw(t)?e.payload=function(e){try{return e?(0,_.ZB)(e):void 0}catch(e){console.warn("Failed to parse parameters: ".concat(e.message));return}}(t):console.warn("Unknown pane segment: %s - skipping",t);return e},n)}(n,{id:t})});return[t,...n.map(e=>({...t,...e,id:e.id||t.id,params:{...w(t.params,sk),...e.params},payload:e.payload||t.payload}))]}).filter(e=>e.length>0)},toPath:function(e){return(e||[]).map(e=>e.map(sS).join("|")).map(encodeURIComponent).join(";")}}}})]),sj=/^([.a-z0-9_-]+),?({.*?})?(?:(;|$))/i,s_=e=>/^[a-z0-9]+=[^=]+/i.test(e),sw=e=>/^[A-Za-z0-9\-_]+(?:={0,2})$/.test(e),sk=["view","since","rev","inspect","comment"],sC=Boolean;function sS(e,t,n){let{payload:i,params:l={},id:o}=e,[r]=n,a=e===r,s=0!==t&&o===r.id,d=typeof i>"u"?void 0:(0,_.B8)(i),c=Object.entries(l).filter(e=>{var t;let[n,i]=e;return!!i&&(!!a||!(i===(null===(t=r.params)||void 0===t?void 0:t[n])&&!sk.includes(n)))}).map(e=>{let[t,n]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n))});return[s?"":o].concat([c.length>0&&c,d].filter(sC).flat()).join(",")||","}let sz=[op,oh,ol,or,on,oa],sE=[aU],sI=[{name:"sanity/structure/validation",component:function(e){let t,n,i,l,o,r,c;let u=(0,s.c)(23),{onClose:p}=e,{onFocus:m,onPathOpen:f,schemaType:v,validation:x,value:g,editState:b}=iT(),{t:y}=(0,h.$G7)("validation");u[0]!==m||u[1]!==f?(t=e=>{f(e),m(e)},u[0]=m,u[1]=f,u[2]=t):t=u[2];let j=t;u[3]!==b?(n=b&&b.version&&(0,h.nOg)(b.version),u[3]=b,u[4]=n):n=u[4];let _=n;return u[5]!==y?(i=y("panel.close-button-aria-label"),u[5]=y,u[6]=i):i=u[6],u[7]!==y?(l=y("panel.title"),u[7]=y,u[8]=l):l=u[8],u[9]!==p||u[10]!==i||u[11]!==l?(o=(0,a.jsx)(iH,{as:"header",closeButtonLabel:i,flex:"none",onClose:p,title:l}),u[9]=p,u[10]=i,u[11]=l,u[12]=o):o=u[12],u[13]!==j||u[14]!==_||u[15]!==v||u[16]!==y||u[17]!==x||u[18]!==g?(r=(0,a.jsx)(d.Zb,{flex:1,overflow:"auto",padding:3,children:_?(0,a.jsx)(d.xu,{padding:2,children:(0,a.jsx)(d.xv,{muted:!0,size:1,children:y("panel.unpublish-message")})}):(0,a.jsxs)(a.Fragment,{children:[0===x.length&&(0,a.jsx)(d.xu,{padding:2,children:(0,a.jsx)(d.xv,{muted:!0,size:1,children:y("panel.no-errors-message")})}),x.length>0&&(0,a.jsx)(d.Kq,{space:2,children:x.map((e,t)=>(0,a.jsx)(sx,{marker:e,onOpen:j,schemaType:v,value:g},t))})]})}),u[13]=j,u[14]=_,u[15]=v,u[16]=y,u[17]=x,u[18]=g,u[19]=r):r=u[19],u[20]!==o||u[21]!==r?(c=(0,a.jsxs)(d.kC,{direction:"column",height:"fill",overflow:"hidden",children:[o,r]}),u[20]=o,u[21]=r,u[22]=c):c=u[22],c},useMenuItem:function(e){let{documentId:t,documentType:n}=e,{t:i}=(0,h.$G7)("validation"),{selectedReleaseId:l}=(0,h.Wc0)(),{validation:o}=(0,h.a3k)(t,n,l),{value:r}=iT(),a=(0,u.useMemo)(()=>o.map(e=>({level:e.level,message:e.message,path:e.path})),[o]),s=a.some(f.z1),d=a.some(f.AY),c=(0,h.nOg)(r),p=(0,u.useMemo)(()=>s?m.uIy:d?m.foC:m.nSX,[s,d]),v=(0,u.useMemo)(()=>s?"critical":d?"caution":"positive",[s,d]);return{hidden:0===a.length||c,icon:p,title:i("panel.title"),tone:v,showAsAction:!0}}},{name:i$,useMenuItem:()=>{let{features:e}=iN(),{t}=(0,h.$G7)();return{hidden:!e.reviewChanges,icon:m.vaD,title:t("changes.title")}},component:function(e){var t,n,i,l,p,f,v,x,g,b,y,j;let _,w,k,C,S,z,E,I,P,A,T,R,M,D,L,N,O,U,B,$,V,G,F,K,W,X;let H=(0,s.c)(72),{params:q,setParams:Y}=t0(),Z=(0,h.Lky)(),[J,Q]=(0,u.useState)(null),{t:ee}=(0,h.$G7)(o.UA),et=(null==q?void 0:q.inspect)===i$,{selectedPerspective:en}=(0,h.Wc0)();H[0]!==q?(_=sh(null==q?void 0:q.changesInspectorTab)?q.changesInspectorTab:sm[0],H[0]=q,H[1]=_):_=H[1];let ei=_;H[2]!==q||H[3]!==Y?(w=e=>Y({...q,changesInspectorTab:e,since:"history"===e?void 0:null==q?void 0:q.since}),H[2]=q,H[3]=Y,H[4]=w):w=H[4];let el=w;H[5]!==en||H[6]!==ee?(k=(0,h._wt)(en)?en.metadata.title:ee("drafts"===en?"compare-versions.status.draft":"compare-versions.status.published"),H[5]=en,H[6]=ee,H[7]=k):k=H[7];let eo=k,er=et?"":void 0;H[8]!==ee?(C=ee("changes.tab.history"),H[8]=ee,H[9]=C):C=H[9],H[10]!==el?(S=()=>el("history"),H[10]=el,H[11]=S):S=H[11];let ea="history"===ei;H[12]!==C||H[13]!==S||H[14]!==ea?(z=(0,a.jsx)(r.OK,{"aria-controls":"history-panel",id:"history-tab",label:C,onClick:S,selected:ea}),H[12]=C,H[13]=S,H[14]=ea,H[15]=z):z=H[15],H[16]!==ee?(E=ee("changes.tab.review-changes"),H[16]=ee,H[17]=E):E=H[17],H[18]!==el?(I=()=>el("review"),H[18]=el,H[19]=I):I=H[19];let es="review"===ei;H[20]!==es||H[21]!==E||H[22]!==I?(P=(0,a.jsx)(r.OK,{"aria-controls":"review-changes-panel",id:"changes-tab",label:E,onClick:I,selected:es}),H[20]=es,H[21]=E,H[22]=I,H[23]=P):P=H[23],H[24]!==P||H[25]!==z?(A=(0,a.jsxs)(d.td,{space:1,flex:1,children:[z,P]}),H[24]=P,H[25]=z,H[26]=A):A=H[26],H[27]!==ee?(T=ee("changes.action.close-label"),H[27]=ee,H[28]=T):T=H[28];let ed=e.onClose;H[29]!==ee?(R=ee("document-inspector.close-button.tooltip"),H[29]=ee,H[30]=R):R=H[30],H[31]!==R?(M={content:R},H[31]=R,H[32]=M):M=H[32],H[33]!==e.onClose||H[34]!==T||H[35]!==M?(D=(0,a.jsx)(r.zx,{"aria-label":T,icon:m.Two,mode:"bleed",onClick:ed,tooltipProps:M}),H[33]=e.onClose,H[34]=T,H[35]=M,H[36]=D):D=H[36],H[37]!==A||H[38]!==D?(L=(0,a.jsx)(d.Zb,{paddingBottom:1,children:(0,a.jsxs)(d.kC,{align:"center",padding:3,gap:2,children:[A,D]})}),H[37]=A,H[38]=D,H[39]=L):L=H[39],H[40]!==ee?(N=(0,a.jsx)(d.xu,{flex:1,padding:1,children:(0,a.jsx)(d.xv,{size:1,children:(0,a.jsx)(h.vNl,{t:ee,i18nKey:"changes.banner.tooltip"})})}),H[40]=ee,H[41]=N):N=H[41],H[42]===Symbol.for("react.memo_cache_sentinel")?(O=(0,a.jsx)(d.xv,{size:0,muted:!0,children:(0,a.jsx)(m.hQ6,{fontSize:1})}),H[42]=O):O=H[42],H[43]!==J||H[44]!==N?(U=(0,a.jsx)(r.u,{portal:!0,placement:"bottom-end",boundaryElement:J,content:N,children:O}),H[43]=J,H[44]=N,H[45]=U):U=H[45],H[46]!==eo?(B={perspective:eo},H[46]=eo,H[47]=B):B=H[47],H[48]!==ee||H[49]!==B?($=(0,a.jsx)(d.xv,{size:0,muted:!0,children:(0,a.jsx)(h.vNl,{t:ee,values:B,i18nKey:"changes.banner.description"})}),H[48]=ee,H[49]=B,H[50]=$):$=H[50],H[51]!==U||H[52]!==$?(V=(0,a.jsx)(d.Zb,{padding:2,marginBottom:3,marginX:3,tone:"neutral",border:!0,radius:3,children:(0,a.jsxs)(d.kC,{gap:2,align:"flex-start",children:[U,$]})}),H[51]=U,H[52]=$,H[53]=V):V=H[53];let ec="history"!==ei;H[54]!==ei||H[55]!==(null===(n=Z.beta)||void 0===n?void 0:null===(t=n.eventsAPI)||void 0===t?void 0:t.documents)?(G=(null===(l=Z.beta)||void 0===l?void 0:null===(i=l.eventsAPI)||void 0===i?void 0:i.documents)?(0,a.jsx)(sd,{showList:"history"===ei}):(0,a.jsx)(su,{showList:"history"===ei}),H[54]=ei,H[55]=null===(f=Z.beta)||void 0===f?void 0:null===(p=f.eventsAPI)||void 0===p?void 0:p.documents,H[56]=G):G=H[56],H[57]!==ec||H[58]!==G?(F=(0,a.jsx)(c.x4,{"aria-labelledby":"history-tab",height:"fill",hidden:ec,id:"history-panel",children:G}),H[57]=ec,H[58]=G,H[59]=F):F=H[59];let eu="review"!==ei;return H[60]!==ei||H[61]!==(null===(x=Z.beta)||void 0===x?void 0:null===(v=x.eventsAPI)||void 0===v?void 0:v.documents)?(K=(null===(b=Z.beta)||void 0===b?void 0:null===(g=b.eventsAPI)||void 0===g?void 0:g.documents)?(0,a.jsx)(a.Fragment,{children:"review"===ei?(0,a.jsx)(sl,{showChanges:"review"===ei}):null}):(0,a.jsx)(aK,{showChanges:"review"===ei}),H[60]=ei,H[61]=null===(j=Z.beta)||void 0===j?void 0:null===(y=j.eventsAPI)||void 0===y?void 0:y.documents,H[62]=K):K=H[62],H[63]!==eu||H[64]!==K?(W=(0,a.jsx)(c.x4,{"aria-labelledby":"review-tab",hidden:eu,id:"review-panel",height:"fill",children:K}),H[63]=eu,H[64]=K,H[65]=W):W=H[65],H[66]!==L||H[67]!==V||H[68]!==F||H[69]!==er||H[70]!==W?(X=(0,a.jsxs)(sp,{direction:"column",padding:0,height:"fill","data-ready":er,ref:Q,children:[L,V,F,W]}),H[66]=L,H[67]=V,H[68]=F,H[69]=er,H[70]=W,H[71]=X):X=H[71],X},onClose:e=>{let{params:t}=e;return{params:{...t,since:void 0,rev:void 0,changesInspectorTab:void 0,historyVersion:void 0}}},onOpen:e=>{let{params:t}=e;return{params:{...t,since:"@lastPublished"}}}}],sP=(0,h.Cw0)(e=>{let t=(null==e?void 0:e.icon)||m.kLv;return{name:"sanity/structure",document:{actions:e=>Array.from(new Set([...e,...sz])),badges:e=>Array.from(new Set([...e,...sE])),inspectors:e=>Array.from(new Set([...e,...sI]))},tools:[{name:(null==e?void 0:e.name)||"structure",title:(null==e?void 0:e.title)||"Structure",icon:t,component:(0,u.lazy)(()=>n.e(418).then(n.bind(n,42418))),canHandleIntent:(e,t)=>{var n;return"create"===e?"type"in t&&(!("template"in t)||{template:!0}):"edit"===e&&"id"in(n=t)&&(!("mode"in n)||{mode:"structure"===n.mode})},getIntentState:aV,controlsDocumentTitle:!0,options:e,router:sy,__internalApplicationType:"sanity/structure"}],i18n:{bundles:[o.Pk]}}});var sA=Object.freeze({__proto__:null,default:rq}),sT=Object.freeze({__proto__:null,default:aO})}}]);