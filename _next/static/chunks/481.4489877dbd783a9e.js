"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[481],{44481:function(t,e,n){n.r(e),n.d(e,{encodeIntoResult:function(){return p},stegaEncodeSourceMap:function(){return x},stegaEncodeSourceMap$1:function(){return S}});var r=n(68832);let o=/_key\s*==\s*['"](.*)['"]/;function i(t){if(!Array.isArray(t))throw Error("Path is not an array");return t.reduce((t,e,n)=>{let r=typeof e;if("number"===r)return"".concat(t,"[").concat(e,"]");if("string"===r)return"".concat(t).concat(0===n?"":".").concat(e);if(("string"==typeof e?o.test(e.trim()):"object"==typeof e&&"_key"in e)&&e._key)return"".concat(t,'[_key=="').concat(e._key,'"]');if(Array.isArray(e)){let[n,r]=e;return"".concat(t,"[").concat(n,":").concat(r,"]")}throw Error("Unsupported path segment `".concat(JSON.stringify(e),"`"))},"")}let c={"\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","'":"\\'","\\":"\\\\"},a={"\\f":"\f","\\n":"\n","\\r":"\r","\\t":"	","\\'":"'","\\\\":"\\"};function l(t){let e;let n=[],r=/\['(.*?)'\]|\[(\d+)\]|\[\?\(@\._key=='(.*?)'\)\]/g;for(;null!==(e=r.exec(t));){if(void 0!==e[1]){let t=e[1].replace(/\\(\\|f|n|r|t|')/g,t=>a[t]);n.push(t);continue}if(void 0!==e[2]){n.push(parseInt(e[2],10));continue}if(void 0!==e[3]){let t=e[3].replace(/\\(\\')/g,t=>a[t]);n.push({_key:t,_index:-1});continue}}return n}function s(t){return t.map(t=>{if("string"==typeof t||"number"==typeof t)return t;if(""!==t._key)return{_key:t._key};if(-1!==t._index)return t._index;throw Error("invalid segment:".concat(JSON.stringify(t)))})}function u(t){return t.map(t=>{if("string"==typeof t||"number"==typeof t)return t;if(-1!==t._index)return t._index;throw Error("invalid segment:".concat(JSON.stringify(t)))})}function p(t,e,n){return function t(e,n){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(null!==e&&Array.isArray(e))return e.map((e,i)=>{if((0,r.Uy)(e)){let r=e._key;if("string"==typeof r)return t(e,n,o.concat({_key:r,_index:i}))}return t(e,n,o.concat(i))});if((0,r.Uy)(e)){if("block"===e._type||"span"===e._type){let r={...e};return"block"===e._type?r.children=t(e.children,n,o.concat("children")):"span"===e._type&&(r.text=t(e.text,n,o.concat("text"))),r}return Object.fromEntries(Object.entries(e).map(e=>{let[r,i]=e;return[r,t(i,n,o.concat(r))]}))}return n(e,o)}(t,(t,r)=>{if("string"!=typeof t)return t;let o=function(t,e){var n;if(!(null==e?void 0:e.mappings))return;let r=(n=u(t),"$".concat(n.map(t=>"string"==typeof t?"['".concat(t.replace(/[\f\n\r\t'\\]/g,t=>c[t]),"']"):"number"==typeof t?"[".concat(t,"]"):""!==t._key?"[?(@._key=='".concat(t._key.replace(/['\\]/g,t=>c[t]),"')]"):"[".concat(t._index,"]")).join("")));if(void 0!==e.mappings[r])return{mapping:e.mappings[r],matchedPath:r,pathSuffix:""};let o=u(t).map(t=>"string"==typeof t?"['".concat(t.replace(/[\f\n\r\t'\\]/g,t=>c[t]),"']"):"number"==typeof t?"[".concat(t,"]"):""!==t._key?"[?(@._key=='".concat(t._key.replace(/['\\]/g,t=>c[t]),"')]"):"[".concat(t._index,"]"));for(let t=o.length-1;t>=0;t--){let n="$".concat(o.slice(0,t).join("")),i=e.mappings[n];if(i){let t=r.substring(n.length);return{mapping:i,matchedPath:n,pathSuffix:t}}}}(r,e);if(!o)return t;let{mapping:i,matchedPath:a}=o;if("value"!==i.type||"documentValue"!==i.source.type)return t;let s=e.documents[i.source.document],p=e.paths[i.source.path],f=l(a);return n({sourcePath:l(p).concat(r.slice(f.length)),sourceDocument:s,resultPath:r,value:t})})}let f="".concat("drafts").concat("."),d="".concat("versions").concat(".");function h(t){return t.startsWith(f)}function g(t){return t.startsWith(d)}let y=t=>{let{sourcePath:e,resultPath:n,value:r}=t;if(/^\d{4}-\d{2}-\d{2}/.test(r)&&Date.parse(r)||function(t){try{let{protocol:e}=new URL(t,t.startsWith("/")?"https://acme.com":void 0);return _.has(e)||e.startsWith("web+")}catch(t){return!1}}(r))return!1;let o=e.at(-1);return!("slug"===e.at(-2)&&"current"===o||"string"==typeof o&&(o.startsWith("_")||o.endsWith("Id"))||e.some(t=>"meta"===t||"metadata"===t||"openGraph"===t||"seo"===t)||v(e)||v(n)||"string"==typeof o&&m.has(o))},m=new Set(["color","colour","currency","email","format","gid","hex","href","hsl","hsla","icon","id","index","key","language","layout","link","linkAction","locale","lqip","page","path","ref","rgb","rgba","route","secret","slug","status","tag","template","theme","type","textTheme","unit","url","username","variant","website"]),_=new Set(["app:","data:","discord:","file:","ftp:","ftps:","geo:","http:","https:","imap:","javascript:","magnet:","mailto:","maps:","ms-excel:","ms-powerpoint:","ms-word:","slack:","sms:","spotify:","steam:","teams:","tel:","vscode:","zoom:"]);function v(t){return t.some(t=>"string"==typeof t&&null!==t.match(/type/i))}let k=[8203,8204,8205,65279],b=k.map(t=>String.fromCharCode(t)),w=[8203,8204,8205,8290,8291,8288,65279,8289,119155,119156,119157,119158,119159,119160,119161,119162];Object.fromEntries(k.map((t,e)=>[t,e])),Object.fromEntries(w.map((t,e)=>[t,e.toString(16)]));let E=String.fromCodePoint(k[0]).repeat(4);function x(t,e,n){var r,c,a,l,u,d,m,_,v;let{filter:k,logger:w,enabled:x}=n;if(!x){let r="config.enabled must be true, don't call this function otherwise";throw null==w||null===(c=w.error)||void 0===c||c.call(w,"[@sanity/client]: ".concat(r),{result:t,resultSourceMap:e,config:n}),TypeError(r)}if(!e)return null==w||null===(r=w.error)||void 0===r||r.call(w,"[@sanity/client]: Missing Content Source Map from response body",{result:t,resultSourceMap:e,config:n}),t;if(!n.studioUrl){let r="config.studioUrl must be defined";throw null==w||null===(a=w.error)||void 0===a||a.call(w,"[@sanity/client]: ".concat(r),{result:t,resultSourceMap:e,config:n}),TypeError(r)}let S={encoded:[],skipped:[]},j=p(t,e,t=>{var e;let r,{sourcePath:o,sourceDocument:c,resultPath:a,value:l}=t;if(("function"==typeof k?k({sourcePath:o,resultPath:a,filterDefault:y,sourceDocument:c,value:l}):y({sourcePath:o,resultPath:a,value:l}))===!1)return w&&S.skipped.push({path:i(s(o)),value:"".concat(l.slice(0,20)).concat(l.length>20?"...":""),length:l.length}),l;w&&S.encoded.push({path:i(s(o)),value:"".concat(l.slice(0,20)).concat(l.length>20?"...":""),length:l.length});let{baseUrl:u,workspace:p,tool:d}=("/"!==(r="string"==typeof(e="function"==typeof n.studioUrl?n.studioUrl(c):n.studioUrl)?e:e.baseUrl)&&(r=r.replace(/\/$/,"")),"string"==typeof e?{baseUrl:r}:{...e,baseUrl:r});if(!u)return l;let{_id:m,_type:_,_projectId:v,_dataset:x}=c;return function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto";return!0!==n&&("auto"!==n||t&&"string"==typeof t&&Date.parse(t)||function(t){try{return new URL(t,t.startsWith("/")?"https://example.com":void 0),!0}catch(t){return!1}}(t))?t:"".concat(t).concat(function(t){if(void 0===t)return"";let e="string"==typeof t?t:JSON.stringify(t),n=new TextEncoder().encode(e),r="";for(let t=0;t<n.length;t++){let e=n[t];r+=b[e>>6&3]+b[e>>4&3]+b[e>>2&3]+b[3&e]}return E+r}(e))}(l,{origin:"sanity.io",href:function(t){let{baseUrl:e,workspace:n="default",tool:r="default",id:o,type:c,path:a,projectId:l,dataset:u}=t;if(!e)throw Error("baseUrl is required");if(!a)throw Error("path is required");if(!o)throw Error("id is required");if("/"!==e&&e.endsWith("/"))throw Error("baseUrl must not end with a slash");let p="default"===n?void 0:n,d="default"===r?void 0:r,y=g(o)?o.split(".").slice(2).join("."):h(o)?o.slice(f.length):o,m=Array.isArray(a)?i(s(a)):a,_=new URLSearchParams({baseUrl:e,id:y,type:c,path:m});if(p&&_.set("workspace",p),d&&_.set("tool",d),l&&_.set("projectId",l),u&&_.set("dataset",u),h(o)||g(o)){if(g(o)){let t=function(t){if(!g(t))return;let[e,n,...r]=t.split(".");return n}(o);_.set("perspective",t)}}else _.set("perspective","published");let v=["/"===e?"":e];p&&v.push(p);let k=["mode=presentation","id=".concat(y),"type=".concat(c),"path=".concat(encodeURIComponent(m))];return d&&k.push("tool=".concat(d)),v.push("intent","edit","".concat(k.join(";"),"?").concat(_)),v.join("/")}({baseUrl:u,workspace:p,tool:d,id:m,type:_,path:o,...!n.omitCrossDatasetReferenceData&&{dataset:x,projectId:v}})},!0)});if(w){let t=S.skipped.length,e=S.encoded.length;if((t||e)&&(null===(l=(null==w?void 0:w.groupCollapsed)||w.log)||void 0===l||l("[@sanity/client]: Encoding source map into result"),null===(u=w.log)||void 0===u||u.call(w,"[@sanity/client]: Paths encoded: ".concat(S.encoded.length,", skipped: ").concat(S.skipped.length))),S.encoded.length>0&&(null==w||null===(d=w.log)||void 0===d||d.call(w,"[@sanity/client]: Table of encoded paths"),null===(m=(null==w?void 0:w.table)||w.log)||void 0===m||m(S.encoded)),S.skipped.length>0){let t=new Set;for(let{path:e}of S.skipped)t.add(e.replace(o,"0").replace(/\[\d+\]/g,"[]"));null==w||null===(v=w.log)||void 0===v||v.call(w,"[@sanity/client]: List of skipped paths",[...t.values()])}(t||e)&&(null==w||null===(_=w.groupEnd)||void 0===_||_.call(w))}return j}[...k,...w].map(t=>"\\u{".concat(t.toString(16),"}")).join("");var S=Object.freeze({__proto__:null,stegaEncodeSourceMap:x})}}]);